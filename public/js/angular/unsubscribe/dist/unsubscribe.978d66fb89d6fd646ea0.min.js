/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

eval("__webpack_require__(1);\r\n__webpack_require__(2);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL3Vuc3Vic2NyaWJlL21haW4uanM/NWRmZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxtQkFBTyxDQUFDLENBQWtCO0FBQzFCLG1CQUFPLENBQUMsQ0FBZSIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnLi9jb250cm9sbGVycy5qcycpO1xyXG5yZXF1aXJlKCcuL3NlcnZpY2VzLmpzJyk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9qcy9hbmd1bGFyL3Vuc3Vic2NyaWJlL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, exports) {

eval("(function () {\r\n  angular.module('unsubscribeApp', ['ngDragDrop', 'unsubscribe.service'])\r\n          .filter('propsFilter', function () {\r\n            return function (items, props) {\r\n              var out = [];\r\n\r\n              if (angular.isArray(items)) {\r\n                var keys = Object.keys(props);\r\n\r\n                items.forEach(function (item) {\r\n                  var itemMatches = false;\r\n\r\n                  for (var i = 0; i < keys.length; i++) {\r\n                    var prop = keys[i];\r\n                    var text = props[prop].toLowerCase();\r\n                    if (item[prop].toString().toLowerCase().indexOf(text) !== -1) {\r\n                      itemMatches = true;\r\n                      break;\r\n                    }\r\n                  }\r\n\r\n                  if (itemMatches) {\r\n                    out.push(item);\r\n                  }\r\n                });\r\n              } else {\r\n                // Let the output be the input untouched\r\n                out = items;\r\n              }\r\n\r\n              return out;\r\n            };\r\n          })\r\n                    \r\n          .directive('htmlSortable', [\"$parse\", \"$timeout\", \"$log\", \"$window\", function ($parse, $timeout, $log, $window) {\r\n\r\n              return {\r\n                restrict: 'A',\r\n                require: '?ngModel',\r\n                scope: {\r\n                  htmlSortable: '=',\r\n                  ngModel: '=',\r\n                  ngExtraSortable: '='\r\n                },\r\n                //scope: true,   // optionally create a child scope\r\n                link: function (scope, element, attrs, ngModel) {\r\n                  //var model = $parse(attrs.htmlSortable);\r\n                  /*attrs.html5Sortable*/\r\n\r\n                  var sortable = {};\r\n                  sortable.is_handle = false;\r\n                  sortable.in_use = false;\r\n\r\n                  sortable.handleDragStart = function (e) {\r\n\r\n                    if (sortable.options && angular.isDefined(sortable.options.disableDrag)) {\r\n                      if (sortable.options.disableDrag(ngModel.$modelValue, angular.element(this)) === true) {\r\n                        e.preventDefault();\r\n                        return;\r\n                      }\r\n                    }\r\n\r\n                    $window['drag_source'] = null;\r\n                    $window['drag_source_extra'] = null;\r\n\r\n                    if (sortable.options && !sortable.is_handle && sortable.options.handle) {\r\n                      e.preventDefault();\r\n                      return;\r\n                    }\r\n\r\n                    sortable.is_handle = false;\r\n                    e.dataTransfer.effectAllowed = 'move';\r\n                    //Fixed on firefox and IE 11\r\n                    if (sortable.browser != \"IE\") {\r\n                      e.dataTransfer.setData('text/plain', 'anything');\r\n                    }\r\n\r\n\r\n                    $window['drag_source'] = this;\r\n                    $window['drag_source_extra'] = element.extra_data;\r\n\r\n                    // this/e.target is the source node.\r\n                    this.classList.add('moving');\r\n                  };\r\n\r\n                  sortable.handleDragOver = function (e) {\r\n                    if (e.preventDefault) {\r\n                      e.preventDefault(); // Allows us to drop.\r\n                    }\r\n\r\n                    e.dataTransfer.dropEffect = 'move';\r\n\r\n                    if (!this.classList.contains('over')) {\r\n                      this.classList.add('over');\r\n                    }\r\n\r\n                    //return false;\r\n                  };\r\n\r\n                  sortable.handleDragEnter = function (e) {\r\n                    if (!this.classList.contains('over')) {\r\n                      this.classList.add('over');\r\n                    }\r\n                  };\r\n\r\n                  sortable.handleDragLeave = function (e) {\r\n                    this.classList.remove('over');\r\n                  };\r\n\r\n                  sortable.handleDrop = function (e) {\r\n                    // this/e.target is current target element.\r\n                    if (e.stopPropagation) {\r\n                      // stops the browser from redirecting.\r\n                      e.stopPropagation();\r\n                    }\r\n                    e.preventDefault();\r\n                    this.classList.remove('over');\r\n\r\n                    // Don't do anything if we're dropping on the same column we're dragging.\r\n                    if ($window['drag_source'] != this) {\r\n\r\n                      if ($window['drag_source'] == null) {\r\n                        //                        $log.info(\"Invalid sortable\");\r\n                        return;\r\n                      }\r\n\r\n\r\n                      var source_model = $window['drag_source'].model;\r\n                      var drop_index = this.index;\r\n\r\n                      if (ngModel.$modelValue.indexOf(source_model) != -1) {\r\n\r\n                        var drag_index = $window['drag_source'].index;\r\n                        var temp = angular.copy(ngModel.$modelValue[drag_index]);\r\n\r\n                        sortable.unbind();\r\n\r\n                        ngModel.$modelValue.splice(drag_index, 1);\r\n                        ngModel.$modelValue.splice(drop_index, 0, temp);\r\n\r\n                      } else if (sortable.options.allow_cross) {\r\n                        ngModel.$modelValue.splice(drop_index, 0, source_model);\r\n                      } else {\r\n                        //                        $log.info(\"disabled cross dropping\");\r\n                        return;\r\n                      }\r\n\r\n                      //return;\r\n                      scope.$apply();\r\n\r\n                      if (sortable.options && angular.isDefined(sortable.options.stop)) {\r\n                        //                        $log.info('Make callback');\r\n                        sortable.options.stop(ngModel.$modelValue, drop_index,\r\n                                element.extra_data, $window['drag_source_extra']);\r\n                      }\r\n                    }\r\n\r\n                    return false;\r\n                  };\r\n\r\n                  sortable.handleDragEnd = function (e) {\r\n                    // this/e.target is the source node.\r\n                    [].forEach.call(sortable.cols_, function (col) {\r\n                      col.classList.remove('over');\r\n                      col.classList.remove('moving');\r\n                    });\r\n\r\n                  };\r\n\r\n                  //Unbind all events are registed before\r\n                  sortable.unbind = function () {\r\n\r\n                    //                    $log.info('Unbind sortable');\r\n                    [].forEach.call(sortable.cols_, function (col) {\r\n                      col.removeAttribute('draggable');\r\n                      col.removeEventListener('dragstart', sortable.handleDragStart, false);\r\n                      col.removeEventListener('dragenter', sortable.handleDragEnter, false);\r\n                      col.removeEventListener('dragover', sortable.handleDragOver, false);\r\n                      col.removeEventListener('dragleave', sortable.handleDragLeave, false);\r\n                      col.removeEventListener('drop', sortable.handleDrop, false);\r\n                      col.removeEventListener('dragend', sortable.handleDragEnd, false);\r\n                    });\r\n                    sortable.in_use = false;\r\n                  }\r\n\r\n                  sortable.activehandle = function () {\r\n                    sortable.is_handle = true;\r\n                  }\r\n\r\n                  sortable.register_drop = function (element_children) {\r\n                    element_children.addEventListener('drop', sortable.handleDrop, false);\r\n                    element_children.addEventListener('dragstart', sortable.handleDragStart, false);\r\n                    element_children.addEventListener('dragenter', sortable.handleDragEnter, false);\r\n                    element_children.addEventListener('dragover', sortable.handleDragOver, false);\r\n                    element_children.addEventListener('dragleave', sortable.handleDragLeave, false);\r\n                    element_children.addEventListener('drop', sortable.handleDrop, false);\r\n                    element_children.addEventListener('dragend', sortable.handleDragEnd, false);\r\n                  }\r\n\r\n                  sortable.getBrowser = function () {\r\n                    var browser_agent = $window.navigator.userAgent;\r\n                    if (browser_agent.indexOf(\".NET\") != -1) {\r\n                      //IE 11\r\n                      return \"IE\";\r\n                    } else if (browser_agent.indexOf(\"Firefox\") != -1) {\r\n                      return \"Firefox\";\r\n                    } else {\r\n                      return \"Chrome\";\r\n                    }\r\n                  }\r\n\r\n                  sortable.update = function () {\r\n                    //                    $log.info(\"Update sortable\");\r\n                    $window['drag_source'] = null;\r\n                    var index = 0;\r\n\r\n                    //This's empty list, so just need listen drop from other\r\n                    if (ngModel.$modelValue.length == 0) {\r\n                      if (element[0].children.length > 0) {\r\n                        //Set index = 0( simulate first index )\r\n                        element[0].children[0].index = 0;\r\n                        sortable.register_drop(element[0].children[0]);\r\n                      }\r\n                      return;\r\n                    }\r\n\r\n                    this.browser = this.getBrowser();\r\n\r\n                    this.cols_ = element[0].children;\r\n\r\n                    [].forEach.call(this.cols_, function (col) {\r\n                      if (sortable.options && sortable.options.handle) {\r\n                        var handle = col.querySelectorAll(sortable.options.handle)[0];\r\n                        handle.addEventListener('mousedown', sortable.activehandle, false);\r\n                      }\r\n\r\n                      col.index = index;\r\n                      col.model = ngModel.$modelValue[index];\r\n\r\n                      index++;\r\n\r\n                      col.setAttribute('draggable', 'true');  // Enable columns to be draggable.\r\n                      sortable.register_drop(col);\r\n                    });\r\n\r\n                    sortable.in_use = true;\r\n                  }\r\n\r\n                  if (ngModel) {\r\n                    ngModel.$render = function () {\r\n                      $timeout(function () {\r\n                        //Init flag indicate the first load sortable is done or not\r\n                        sortable.first_load = false;\r\n\r\n                        scope.$watch('ngExtraSortable', function (value) {\r\n                          element.extra_data = value;\r\n                          //sortable.extra_data = value;\r\n                        });\r\n\r\n                        scope.$watch('htmlSortable', function (value) {\r\n\r\n                          sortable.options = angular.copy(value);\r\n\r\n                          if (value == \"destroy\") {\r\n                            if (sortable.in_use) {\r\n                              sortable.unbind();\r\n                              sortable.in_use = false;\r\n                            }\r\n                            return;\r\n                          }\r\n\r\n                          if (!angular.isDefined(sortable.options)) {\r\n                            sortable.options = {};\r\n                          }\r\n\r\n                          if (!angular.isDefined(sortable.options.allow_cross)) {\r\n                            sortable.options.allow_cross = false\r\n                          }\r\n\r\n                          if (angular.isDefined(sortable.options.construct)) {\r\n                            sortable.options.construct(ngModel.$modelValue);\r\n                          }\r\n\r\n                          element[0].classList.add('html5-sortable');\r\n                          sortable.update();\r\n                          $timeout(function () {\r\n                            sortable.first_load = true;\r\n                          })\r\n                        }, true);\r\n\r\n                        //Watch ngModel and narrate it\r\n                        scope.$watch('ngModel', function (value) {\r\n                          if (!sortable.first_load || sortable.options == 'destroy') {\r\n                            //Ignore on first load\r\n                            return;\r\n                          }\r\n\r\n                          $timeout(function () {\r\n                            sortable.update();\r\n                          });\r\n\r\n                        }, true);\r\n\r\n                      });\r\n                    };\r\n                  } else {\r\n                    //                    $log.info('Missing ng-model in template');\r\n                  }\r\n                }\r\n              };\r\n            }])\r\n          .controller('contactController', ['$scope', 'RestService', 'notificationService', '$window', function ($scope, RestService, notificationService, $window) {\r\n              //data\r\n                            \r\n              $scope.data = {};\r\n              $scope.idMail = idMail;\r\n              $scope.idContact = idContact;\r\n              $scope.sendSelected = [];\r\n              $scope.prueba = {};\r\n              $scope.items = [];\r\n              $scope.arrServices = [];\r\n              $scope.arrConfigDashboard = [];\r\n              $scope.arrSubs = [];\r\n              $scope.arrUnsubs = [];\r\n              $scope.validateView = false; \r\n              $scope.responsemessage = \"\";\r\n              $scope.data.option = \"Ninguno\";\r\n              \r\n              $scope.data.options = [\r\n                {id: 1, name:\"Nunca me suscribí a esta lista\"},\r\n                {id: 2, name:\"El contenido de estos emails no me interesa\"},\r\n                {id: 3, name:\"Recibo estos emails con demasiada frecuencia\"},\r\n                {id: 4, name:\"Estos emails son spam\"},\r\n                {id: 5, name:\"Ninguno\"},\r\n                {id: 6, name:\"Otro\"}\r\n              ];\r\n              $scope.data.other = \"\";\r\n              $scope.data.selectOption = [\r\n                {id: \"one\", name: \"Desuscribirse de esta Base de datos.\"},\r\n                {id: \"all\", name: \"Desuscribirse de todas las Bases de datos.\"}\r\n              ];\r\n              $scope.data.click = \"\";\r\n              $scope.disabled = false;\r\n              $scope.optionDroppable = {\r\n                opacity: 0.4,\r\n              };\r\n              \r\n              $scope.data.idMail = idMail;\r\n              $scope.data.idContact = idContact;\r\n                \r\n              //Misc\r\n              $scope.misc = {};\r\n              $scope.misc.advanceUnsuscribe = false;\r\n              \r\n              //typeView\r\n              if( typeView == 1 ){\r\n                    $scope.validateView = true;   \r\n              }else{\r\n                    $scope.validateView = false;\r\n              }\r\n              \r\n              //Functions\r\n              $scope.functions = {\r\n                changeAdvanceUnsuscribe: function () {\r\n                  if ($scope.misc.advanceUnsuscribe) {\r\n                    $scope.misc.advanceUnsuscribe = false;\r\n                  } else {\r\n                    $scope.misc.advanceUnsuscribe = true;\r\n                  }\r\n                }\r\n              };\r\n\r\n              $scope.restService = {\r\n                sendUnsubscribeSimple: function () {\r\n                  document.getElementById('simpleDesuscribeBtn').disabled = true;\r\n                  RestService.sendUnsubscribeSimple($scope.data).then(function (data) {\r\n                    notificationService.success(data.message);\r\n                  });\r\n                }\r\n              }\r\n\r\n              $scope.draggableOptions = {\r\n                remove: function (index) {\r\n                }\r\n              }\r\n\r\n              //Action Droppable\r\n              $scope.actionDroppableSubs = {\r\n                onOver: function (event, ui) {\r\n                  element = angular.element(document.getElementById('subs'));\r\n                  $(element[0])\r\n                          .removeClass(\"boder-droppable\")\r\n                          .addClass(\"hover-droppable\");\r\n                },\r\n                onDrop: function (event, ui) {\r\n                  element = angular.element(document.getElementById('subs'));\r\n                  $(element[0])\r\n                          .removeClass(\"hover-droppable\")\r\n                          .addClass(\"boder-droppable\")\r\n                          .find(\"p\")\r\n                          .html(\"\");\r\n                },\r\n                remove: function (index) {\r\n                  objList = $scope.arrConfigDashboard[index];\r\n                  for (i in $scope.arrDefaultDashboard.items) {\r\n                    if (objList.title == $scope.arrDefaultDashboard.items[i].title) {\r\n                      $scope.arrConfigDashboard.splice(index, 1);\r\n                      $scope.arrServices.splice(objList.jqyoui_pos, 1, $scope.arrDefaultDashboard.items[i]);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n\r\n              $scope.actionDroppableUnSubs = {\r\n                onOver: function (event, ui) {\r\n                  element = angular.element(document.getElementById('unsubs'));\r\n                  $(element[0])\r\n                          .removeClass(\"boder-droppable\")\r\n                          .addClass(\"hover-droppable\");\r\n                },\r\n                onDrop: function (event, ui) {\r\n                  element = angular.element(document.getElementById('unsubs'));\r\n                  $(element[0])\r\n                          .removeClass(\"hover-droppable\")\r\n                          .addClass(\"boder-droppable\")\r\n                          .find(\"p\")\r\n                          .html(\"\");\r\n                },\r\n                remove: function (index) {\r\n                  objList = $scope.arrConfigDashboard[index];\r\n                  for (i in $scope.arrDefaultDashboard.items) {\r\n                    if (objList.title == $scope.arrDefaultDashboard.items[i].title) {\r\n                      $scope.arrConfigDashboard.splice(index, 1);\r\n                      $scope.arrServices.splice(objList.jqyoui_pos, 1, $scope.arrDefaultDashboard.items[i]);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n              RestService.getContact($scope.idContact, $scope.idMail).then(function (data) {\r\n\r\n                $scope.contact = data;                \r\n                $scope.data.contact = data.contact;\r\n                $scope.data.typeView = $scope.validateView;\r\n                if (!angular.isDefined($scope.contact.contact.name)) {\r\n                  $scope.name = $scope.contact.contact.email;\r\n                } else if (!angular.isDefined($scope.contact.contact.lastname)) {\r\n                  $scope.name = $scope.contact.contact.name;\r\n                } else {\r\n                  $scope.name = $scope.contact.contact.name + \" \" + $scope.contact.contact.lastname;\r\n                }\r\n\r\n                for (var i = 0; i < $scope.contact.arrUnsubscribedCategories.length; i++) {\r\n                  $scope.contact.arrUnsubscribedCategories[i].jqyoui_pos = i;\r\n                  $scope.contact.arrUnsubscribedCategories[i].drag = true;\r\n                }\r\n\r\n                for (var i = 0; i < $scope.contact.arrSubscribedCategories.length; i++) {\r\n                  $scope.contact.arrSubscribedCategories[i].jqyoui_pos = i;\r\n                  $scope.contact.arrSubscribedCategories[i].drag = true;\r\n                }\r\n\r\n                $scope.arrSubs = angular.copy($scope.contact.arrSubscribedCategories);\r\n                $scope.arrUnsubs = angular.copy($scope.contact.arrUnsubscribedCategories);\r\n                \r\n                //var arrayCategory = $scope.arrSubsConcat.concat($scope.arrUnsubs);\r\n                //console.log(\"arrayCategory\",arrayCategory);\r\n                //$scope.arrUnsubs = arrayCategory;\r\n                \r\n                if(data.message != ''){\r\n                  $scope.disabled = true;\r\n                  notificationService.primary(data.message);\r\n                }\r\n              })\r\n\r\n              $scope.not = false;\r\n              \r\n              \r\n              $scope.opeModalMoreCa = function () {\r\n                \r\n                $('#alertMoreCaracter').removeClass('modal');\r\n                if($scope.data.other.length > 0 && $scope.data.option === 'Otro'){\r\n                    $(\"#textmessage\").text(\"La desuscripción fue realizada correctamente, muchas gracias por informarnos el motivo de la desuscripción, esperamos mejorar para usted.\");\r\n                }else{\r\n                    $(\"#textmessage\").text(\"La desuscripción fue realizada correctamente.\");\r\n                } \r\n                $('#alertMoreCaracter').addClass('dialog dialog--open'); \r\n              }\r\n              \r\n              $scope.closeModalMoreCa = function () {\r\n                \r\n                if($scope.data.typeView == 0){\r\n                    $scope.disabled = true;  \r\n                }\r\n                $('#alertMoreCaracter').removeClass('dialog dialog--open');\r\n                $('#alertMoreCaracter').addClass('modal'); \r\n              }\r\n\r\n              $scope.sendUnsubscribe = function () {\r\n                 \r\n                $scope.data.subscribe = $scope.arrSubs;\r\n                $scope.data.unsubscribe = $scope.arrUnsubs;\r\n                RestService.sendUnsubscribe($scope.data, $scope.idContact).then(function (data) {\r\n                  //notificationService.success(data.message);\r\n                  $scope.opeModalMoreCa();\r\n                  if($scope.data.typeView == 0){\r\n                    $scope.disabled = true;  \r\n                  }else{\r\n                    $scope.disabled = true;\r\n                    $scope.data.other = \"\";\r\n                  }\r\n                  \r\n                });\r\n\r\n              }\r\n\r\n              $scope.subscribe = function (category) {\r\n                for (var i = 0; i < $scope.arrUnsubs.length; i++) {\r\n                  if ($scope.arrUnsubs[i].idContactlistCategory == category.idContactlistCategory) {\r\n                    $scope.arrUnsubs.splice(i, 1);\r\n                  }\r\n                }\r\n                $scope.arrSubs.push(category);\r\n              }\r\n              $scope.unsubscribe = function (category) {\r\n                for (var i = 0; i < $scope.arrSubs.length; i++) {\r\n                  if ($scope.arrSubs[i].idContactlistCategory == category.idContactlistCategory) {\r\n                    $scope.arrSubs.splice(i, 1);\r\n                  }\r\n                }\r\n                $scope.arrUnsubs.push(category);\r\n              }\r\n              $scope.selectOption = function (name){\r\n                $scope.data.option = name;\r\n                if($scope.data.option != 'Otro'){\r\n                    $scope.data.other ='';\r\n                }\r\n              }\r\n              $scope.selectButton = function (name){\r\n                $scope.data.click = name;\r\n              }\r\n            \r\n            }])\r\n            \r\n            .controller('advanceController', ['$scope', 'RestService', 'notificationService', '$window', function ($scope, RestService, notificationService, $window) {\r\n                \r\n                $scope.initial = 0;\r\n                $scope.page = 1;\r\n                $scope.stringsearch = -1;\r\n                $scope.shownewblockade = true;\r\n                $scope.showblockade = true;\r\n                $scope.search = \"\";\r\n                                \r\n              //data\r\n                $scope.getAll = function () {\r\n                    RestService.getAll($scope.initial, $scope.stringsearch).then(function (data) {                \r\n                        if (data.total > 0) {\r\n                            $scope.showblockade = false;\r\n                        } else {\r\n                            $scope.shownewblockade = false;\r\n                        }\r\n                        $scope.blockade = data;\r\n                    })\r\n                };\r\n                $scope.getAll();\r\n                $scope.forward = function () {\r\n                    $scope.progressbar = false;\r\n                    $scope.initial += 1;\r\n                    $scope.page += 1;\r\n                    $scope.getAll();\r\n                };\r\n                $scope.fastforward = function () {\r\n                    $scope.progressbar = false;\r\n                    $scope.initial = ($scope.blockade.total_pages - 1);\r\n                    $scope.page = $scope.blockade.total_pages;\r\n                    $scope.getAll();\r\n                };\r\n                $scope.backward = function () {\r\n                    $scope.progressbar = false;\r\n                    $scope.initial -= 1;\r\n                    $scope.page -= 1;\r\n                    $scope.getAll();\r\n                };\r\n                $scope.fastbackward = function () {\r\n                    $scope.progressbar = false;\r\n                    $scope.initial = 0;\r\n                    $scope.page = 1;\r\n                    $scope.getAll();\r\n                };\r\n                \r\n                              \r\n                $scope.searchContact = function (param) {\r\n                    if(param == 1){                        \r\n                        if($scope.search != ''){\r\n                            $scope.stringsearch = $scope.search;\r\n                            $scope.getAll();   \r\n                        }else{\r\n                            $scope.getAll();\r\n                        }\r\n                                                         \r\n                    }else if (param == 2){\r\n                        $scope.search = \"\";\r\n                        $scope.stringsearch = -1;\r\n                        $scope.getAll();  \r\n                    }    \r\n                };\r\n                \r\n                $scope.deleteUnsub = function (idContact) {\r\n                    RestService.deleteUnsub(idContact).then(function (data) {\r\n                    notificationService.success(data.message);\r\n                    $scope.getAll();\r\n                    });\r\n                }\r\n                \r\n            }])\r\n            .controller('createController', ['$scope', 'RestService', 'notificationService', '$window', function ($scope, RestService, notificationService, $window) {\r\n              $scope.allcategories = false; \r\n              $scope.services = [];\r\n                            \r\n              $scope.initComponents = function () {\r\n                RestService.listindicative().then(function (response) {\r\n                  $scope.listindicative = response;\r\n                }).catch(function (error) {\r\n                  notificationService.error(error.message);\r\n                });\r\n                \r\n                RestService.listCategories().then(function (response) {              \r\n                  $scope.listAllAddressee = response;\r\n                  console.log(\"data----->\",response );\r\n                }).catch(function (error) {\r\n                  notificationService.error(error.message);\r\n                });\r\n                                                \r\n              };\r\n              $scope.initComponents();\r\n                 \r\n              $scope.addUnsub = function () {\r\n                                               \r\n                $scope.data.services = $scope.services;\r\n                RestService.createUnsub($scope.data).then(function (response) {                    \r\n                    var route=  fullUrlBase + templateBase+\"/list\";\r\n                    $window.location.href = route;\r\n                    notificationService.success(response.message);                    \r\n                }).catch(function (error) {\r\n                    notificationService.error(error.message);\r\n                });\r\n\r\n              }                                  \r\n                \r\n            }])\r\n          .controller('contactautomaticController', ['$scope', 'RestService', 'notificationService', '$window', function ($scope, RestService, notificationService, $window) {\r\n              $scope.idMail = idMail;\r\n              $scope.idContact = idContact;\r\n              $scope.sendSelected = [];\r\n              $scope.prueba = {};\r\n              $scope.items = [];\r\n              $scope.arrServices = [];\r\n              $scope.arrConfigDashboard = [];\r\n              $scope.arrSubs = [];\r\n              $scope.arrUnsubs = [];\r\n              $scope.optionDroppable = {\r\n                opacity: 0.4,\r\n              };\r\n\r\n              $scope.draggableOptions = {\r\n                remove: function (index) {\r\n                }\r\n              }\r\n\r\n              //Action Droppable\r\n              $scope.actionDroppableSubs = {\r\n                onOver: function (event, ui) {\r\n                  element = angular.element(document.getElementById('subs'));\r\n                  $(element[0])\r\n                          .removeClass(\"boder-droppable\")\r\n                          .addClass(\"hover-droppable\");\r\n                },\r\n                onDrop: function (event, ui) {\r\n                  element = angular.element(document.getElementById('subs'));\r\n                  $(element[0])\r\n                          .removeClass(\"hover-droppable\")\r\n                          .addClass(\"boder-droppable\")\r\n                          .find(\"p\")\r\n                          .html(\"\");\r\n                },\r\n                remove: function (index) {\r\n                  objList = $scope.arrConfigDashboard[index];\r\n                  for (i in $scope.arrDefaultDashboard.items) {\r\n                    if (objList.title == $scope.arrDefaultDashboard.items[i].title) {\r\n                      $scope.arrConfigDashboard.splice(index, 1);\r\n                      $scope.arrServices.splice(objList.jqyoui_pos, 1, $scope.arrDefaultDashboard.items[i]);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n\r\n              \r\n              $scope.actionDroppableUnSubs = {\r\n                onOver: function (event, ui) {\r\n                  element = angular.element(document.getElementById('unsubs'));\r\n                  $(element[0])\r\n                          .removeClass(\"boder-droppable\")\r\n                          .addClass(\"hover-droppable\");\r\n                },\r\n                onDrop: function (event, ui) {\r\n                  element = angular.element(document.getElementById('unsubs'));\r\n                  $(element[0])\r\n                          .removeClass(\"hover-droppable\")\r\n                          .addClass(\"boder-droppable\")\r\n                          .find(\"p\")\r\n                          .html(\"\");\r\n                },\r\n                remove: function (index) {\r\n                  objList = $scope.arrConfigDashboard[index];\r\n                  console.log(objList);\r\n                  for (i in $scope.arrDefaultDashboard.items) {\r\n                    if (objList.title == $scope.arrDefaultDashboard.items[i].title) {\r\n                      $scope.arrConfigDashboard.splice(index, 1);\r\n                      $scope.arrServices.splice(objList.jqyoui_pos, 1, $scope.arrDefaultDashboard.items[i]);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n              RestService.getContact($scope.idContact,$scope.idMail).then(function (data) {\r\n\r\n                $scope.contact = data;\r\n\r\n                if (!angular.isDefined($scope.contact.contact.name)) {\r\n                  $scope.name = $scope.contact.contact.email;\r\n                } else if (!angular.isDefined($scope.contact.contact.lastname)) {\r\n                  $scope.name = $scope.contact.contact.name;\r\n                } else {\r\n                  $scope.name = $scope.contact.contact.name + \" \" + $scope.contact.contact.lastname;\r\n                }\r\n                for (var i = 0; i < $scope.contact.arrUnsubscribedCategories.length; i++) {\r\n                  $scope.contact.arrUnsubscribedCategories[i].jqyoui_pos = i;\r\n                  $scope.contact.arrUnsubscribedCategories[i].drag = true;\r\n                }\r\n\r\n                for (var i = 0; i < $scope.contact.arrSubscribedCategories.length; i++) {\r\n                  $scope.contact.arrSubscribedCategories[i].jqyoui_pos = i;\r\n                  $scope.contact.arrSubscribedCategories[i].drag = true;\r\n                }\r\n\r\n                $scope.arrSubs = angular.copy($scope.contact.arrSubscribedCategories);\r\n                $scope.arrUnsubs = angular.copy($scope.contact.arrUnsubscribedCategories);\r\n\r\n              });\r\n\r\n              $scope.sendUnsubscribe = function () {\r\n                var sendunsubscribes = {idMail: $scope.idMail, arrSubs: $scope.arrSubs, arrUnsubs: $scope.arrUnsubs};\r\n                RestService.sendUnsubscribeAutomatic(sendunsubscribes, $scope.idContact).then(function (data) {\r\n                  notificationService.success(data.message);\r\n                });\r\n\r\n              }\r\n\r\n              $scope.subscribe = function (category) {\r\n                for (var i = 0; i < $scope.arrUnsubs.length; i++) {\r\n                  if ($scope.arrUnsubs[i].idContactlistCategory == category.idContactlistCategory) {\r\n                    $scope.arrUnsubs.splice(i, 1);\r\n                  }\r\n                }\r\n                $scope.arrSubs.push(category);\r\n              }\r\n\r\n              $scope.unsubscribe = function (category) {\r\n                for (var i = 0; i < $scope.arrSubs.length; i++) {\r\n                  if ($scope.arrSubs[i].idContactlistCategory == category.idContactlistCategory) {\r\n                    $scope.arrSubs.splice(i, 1);\r\n                  }\r\n                }\r\n                $scope.arrUnsubs.push(category);\r\n              }\r\n            }]);\r\n          \r\n          \r\n  angular.element().ready(function () {\r\n    angular.bootstrap(document, ['unsubscribeApp'])\r\n  });\r\n\r\n})();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL3Vuc3Vic2NyaWJlL2NvbnRyb2xsZXJzLmpzP2YwNmQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaUNBQWlDLGlCQUFpQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsZUFBZTtBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVzs7QUFFWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsdUJBQXVCO0FBQ3ZCO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7O0FBRXJCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLDREQUE0RDtBQUM1RDtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qjs7QUFFekI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IseUJBQXlCOztBQUV6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJCQUEyQjs7QUFFM0IseUJBQXlCOztBQUV6Qix1QkFBdUI7QUFDdkI7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQiw2Q0FBNkM7QUFDOUQsaUJBQWlCLDBEQUEwRDtBQUMzRSxpQkFBaUIsMkRBQTJEO0FBQzVFLGlCQUFpQixvQ0FBb0M7QUFDckQsaUJBQWlCLHNCQUFzQjtBQUN2QyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdEQUF3RDtBQUN6RSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwrQztBQUNBLGVBQWU7QUFDZjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQSwrQkFBK0IscURBQXFEO0FBQ3BGO0FBQ0E7QUFDQTs7QUFFQSwrQkFBK0IsbURBQW1EO0FBQ2xGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7O0FBRWY7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGlCO0FBQ0Esd0U7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDJDO0FBQ0E7QUFDQTtBQUNBLDBEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkM7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBOztBQUVBLGlCQUFpQjs7QUFFakI7O0FBRUE7QUFDQSwrQkFBK0IsNkJBQTZCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDJCQUEyQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsYUFBYTs7QUFFYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtHO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxtQztBQUNBO0FBQ0E7QUFDQSw0QztBQUNBLHlCQUF5QjtBQUN6QjtBQUNBOztBQUVBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0Esd0M7QUFDQSxxQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCOztBQUVBLGFBQWE7QUFDYjtBQUNBLDJDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCOztBQUVqQix1RTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSwrRTtBQUNBO0FBQ0E7QUFDQSxrRTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGlCQUFpQjs7QUFFakIsZTs7QUFFQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsK0JBQStCLHFEQUFxRDtBQUNwRjtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCLG1EQUFtRDtBQUNsRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxlQUFlOztBQUVmO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCOztBQUVBO0FBQ0EsK0JBQStCLDZCQUE2QjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0IsMkJBQTJCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7OztBQUdiO0FBQ0E7QUFDQSxHQUFHOztBQUVILENBQUMiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XHJcbiAgYW5ndWxhci5tb2R1bGUoJ3Vuc3Vic2NyaWJlQXBwJywgWyduZ0RyYWdEcm9wJywgJ3Vuc3Vic2NyaWJlLnNlcnZpY2UnXSlcclxuICAgICAgICAgIC5maWx0ZXIoJ3Byb3BzRmlsdGVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGl0ZW1zLCBwcm9wcykge1xyXG4gICAgICAgICAgICAgIHZhciBvdXQgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNBcnJheShpdGVtcykpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1NYXRjaGVzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IGtleXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRleHQgPSBwcm9wc1twcm9wXS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtW3Byb3BdLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHRleHQpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaXRlbU1hdGNoZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAoaXRlbU1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIExldCB0aGUgb3V0cHV0IGJlIHRoZSBpbnB1dCB1bnRvdWNoZWRcclxuICAgICAgICAgICAgICAgIG91dCA9IGl0ZW1zO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgcmV0dXJuIG91dDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAuZGlyZWN0aXZlKCdodG1sU29ydGFibGUnLCBbXCIkcGFyc2VcIiwgXCIkdGltZW91dFwiLCBcIiRsb2dcIiwgXCIkd2luZG93XCIsIGZ1bmN0aW9uICgkcGFyc2UsICR0aW1lb3V0LCAkbG9nLCAkd2luZG93KSB7XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICAgIGh0bWxTb3J0YWJsZTogJz0nLFxyXG4gICAgICAgICAgICAgICAgICBuZ01vZGVsOiAnPScsXHJcbiAgICAgICAgICAgICAgICAgIG5nRXh0cmFTb3J0YWJsZTogJz0nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgLy9zY29wZTogdHJ1ZSwgICAvLyBvcHRpb25hbGx5IGNyZWF0ZSBhIGNoaWxkIHNjb3BlXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vdmFyIG1vZGVsID0gJHBhcnNlKGF0dHJzLmh0bWxTb3J0YWJsZSk7XHJcbiAgICAgICAgICAgICAgICAgIC8qYXR0cnMuaHRtbDVTb3J0YWJsZSovXHJcblxyXG4gICAgICAgICAgICAgICAgICB2YXIgc29ydGFibGUgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgc29ydGFibGUuaXNfaGFuZGxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgIHNvcnRhYmxlLmluX3VzZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgc29ydGFibGUuaGFuZGxlRHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvcnRhYmxlLm9wdGlvbnMgJiYgYW5ndWxhci5pc0RlZmluZWQoc29ydGFibGUub3B0aW9ucy5kaXNhYmxlRHJhZykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3J0YWJsZS5vcHRpb25zLmRpc2FibGVEcmFnKG5nTW9kZWwuJG1vZGVsVmFsdWUsIGFuZ3VsYXIuZWxlbWVudCh0aGlzKSkgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkd2luZG93WydkcmFnX3NvdXJjZSddID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAkd2luZG93WydkcmFnX3NvdXJjZV9leHRyYSddID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvcnRhYmxlLm9wdGlvbnMgJiYgIXNvcnRhYmxlLmlzX2hhbmRsZSAmJiBzb3J0YWJsZS5vcHRpb25zLmhhbmRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc29ydGFibGUuaXNfaGFuZGxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJztcclxuICAgICAgICAgICAgICAgICAgICAvL0ZpeGVkIG9uIGZpcmVmb3ggYW5kIElFIDExXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvcnRhYmxlLmJyb3dzZXIgIT0gXCJJRVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgJ2FueXRoaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvd1snZHJhZ19zb3VyY2UnXSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvd1snZHJhZ19zb3VyY2VfZXh0cmEnXSA9IGVsZW1lbnQuZXh0cmFfZGF0YTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy9lLnRhcmdldCBpcyB0aGUgc291cmNlIG5vZGUuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdtb3ZpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHNvcnRhYmxlLmhhbmRsZURyYWdPdmVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBBbGxvd3MgdXMgdG8gZHJvcC5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbW92ZSc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ292ZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdvdmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3JldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHNvcnRhYmxlLmhhbmRsZURyYWdFbnRlciA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNsYXNzTGlzdC5jb250YWlucygnb3ZlcicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ292ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICBzb3J0YWJsZS5oYW5kbGVEcmFnTGVhdmUgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcicpO1xyXG4gICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgc29ydGFibGUuaGFuZGxlRHJvcCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy9lLnRhcmdldCBpcyBjdXJyZW50IHRhcmdldCBlbGVtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gc3RvcHMgdGhlIGJyb3dzZXIgZnJvbSByZWRpcmVjdGluZy5cclxuICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ292ZXInKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgd2UncmUgZHJvcHBpbmcgb24gdGhlIHNhbWUgY29sdW1uIHdlJ3JlIGRyYWdnaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkd2luZG93WydkcmFnX3NvdXJjZSddICE9IHRoaXMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoJHdpbmRvd1snZHJhZ19zb3VyY2UnXSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgJGxvZy5pbmZvKFwiSW52YWxpZCBzb3J0YWJsZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlX21vZGVsID0gJHdpbmRvd1snZHJhZ19zb3VyY2UnXS5tb2RlbDtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhciBkcm9wX2luZGV4ID0gdGhpcy5pbmRleDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAobmdNb2RlbC4kbW9kZWxWYWx1ZS5pbmRleE9mKHNvdXJjZV9tb2RlbCkgIT0gLTEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcmFnX2luZGV4ID0gJHdpbmRvd1snZHJhZ19zb3VyY2UnXS5pbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBhbmd1bGFyLmNvcHkobmdNb2RlbC4kbW9kZWxWYWx1ZVtkcmFnX2luZGV4XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0YWJsZS51bmJpbmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5nTW9kZWwuJG1vZGVsVmFsdWUuc3BsaWNlKGRyYWdfaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRtb2RlbFZhbHVlLnNwbGljZShkcm9wX2luZGV4LCAwLCB0ZW1wKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNvcnRhYmxlLm9wdGlvbnMuYWxsb3dfY3Jvc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kbW9kZWxWYWx1ZS5zcGxpY2UoZHJvcF9pbmRleCwgMCwgc291cmNlX21vZGVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgJGxvZy5pbmZvKFwiZGlzYWJsZWQgY3Jvc3MgZHJvcHBpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAvL3JldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3J0YWJsZS5vcHRpb25zICYmIGFuZ3VsYXIuaXNEZWZpbmVkKHNvcnRhYmxlLm9wdGlvbnMuc3RvcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAkbG9nLmluZm8oJ01ha2UgY2FsbGJhY2snKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc29ydGFibGUub3B0aW9ucy5zdG9wKG5nTW9kZWwuJG1vZGVsVmFsdWUsIGRyb3BfaW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5leHRyYV9kYXRhLCAkd2luZG93WydkcmFnX3NvdXJjZV9leHRyYSddKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHNvcnRhYmxlLmhhbmRsZURyYWdFbmQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMvZS50YXJnZXQgaXMgdGhlIHNvdXJjZSBub2RlLlxyXG4gICAgICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChzb3J0YWJsZS5jb2xzXywgZnVuY3Rpb24gKGNvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29sLmNsYXNzTGlzdC5yZW1vdmUoJ292ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbC5jbGFzc0xpc3QucmVtb3ZlKCdtb3ZpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAvL1VuYmluZCBhbGwgZXZlbnRzIGFyZSByZWdpc3RlZCBiZWZvcmVcclxuICAgICAgICAgICAgICAgICAgc29ydGFibGUudW5iaW5kID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgJGxvZy5pbmZvKCdVbmJpbmQgc29ydGFibGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoc29ydGFibGUuY29sc18sIGZ1bmN0aW9uIChjb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbC5yZW1vdmVBdHRyaWJ1dGUoJ2RyYWdnYWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29sLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHNvcnRhYmxlLmhhbmRsZURyYWdTdGFydCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29sLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIHNvcnRhYmxlLmhhbmRsZURyYWdFbnRlciwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29sLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgc29ydGFibGUuaGFuZGxlRHJhZ092ZXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBzb3J0YWJsZS5oYW5kbGVEcmFnTGVhdmUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcm9wJywgc29ydGFibGUuaGFuZGxlRHJvcCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29sLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBzb3J0YWJsZS5oYW5kbGVEcmFnRW5kLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydGFibGUuaW5fdXNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgIHNvcnRhYmxlLmFjdGl2ZWhhbmRsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0YWJsZS5pc19oYW5kbGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICBzb3J0YWJsZS5yZWdpc3Rlcl9kcm9wID0gZnVuY3Rpb24gKGVsZW1lbnRfY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50X2NoaWxkcmVuLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBzb3J0YWJsZS5oYW5kbGVEcm9wLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudF9jaGlsZHJlbi5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBzb3J0YWJsZS5oYW5kbGVEcmFnU3RhcnQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50X2NoaWxkcmVuLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIHNvcnRhYmxlLmhhbmRsZURyYWdFbnRlciwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfY2hpbGRyZW4uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBzb3J0YWJsZS5oYW5kbGVEcmFnT3ZlciwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfY2hpbGRyZW4uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgc29ydGFibGUuaGFuZGxlRHJhZ0xlYXZlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudF9jaGlsZHJlbi5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgc29ydGFibGUuaGFuZGxlRHJvcCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfY2hpbGRyZW4uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHNvcnRhYmxlLmhhbmRsZURyYWdFbmQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgc29ydGFibGUuZ2V0QnJvd3NlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnJvd3Nlcl9hZ2VudCA9ICR3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYnJvd3Nlcl9hZ2VudC5pbmRleE9mKFwiLk5FVFwiKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy9JRSAxMVxyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiSUVcIjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJyb3dzZXJfYWdlbnQuaW5kZXhPZihcIkZpcmVmb3hcIikgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIkZpcmVmb3hcIjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiQ2hyb21lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICBzb3J0YWJsZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICRsb2cuaW5mbyhcIlVwZGF0ZSBzb3J0YWJsZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkd2luZG93WydkcmFnX3NvdXJjZSddID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL1RoaXMncyBlbXB0eSBsaXN0LCBzbyBqdXN0IG5lZWQgbGlzdGVuIGRyb3AgZnJvbSBvdGhlclxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZ01vZGVsLiRtb2RlbFZhbHVlLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFswXS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU2V0IGluZGV4ID0gMCggc2ltdWxhdGUgZmlyc3QgaW5kZXggKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50WzBdLmNoaWxkcmVuWzBdLmluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc29ydGFibGUucmVnaXN0ZXJfZHJvcChlbGVtZW50WzBdLmNoaWxkcmVuWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnJvd3NlciA9IHRoaXMuZ2V0QnJvd3NlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbHNfID0gZWxlbWVudFswXS5jaGlsZHJlbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKHRoaXMuY29sc18sIGZ1bmN0aW9uIChjb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3J0YWJsZS5vcHRpb25zICYmIHNvcnRhYmxlLm9wdGlvbnMuaGFuZGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGUgPSBjb2wucXVlcnlTZWxlY3RvckFsbChzb3J0YWJsZS5vcHRpb25zLmhhbmRsZSlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzb3J0YWJsZS5hY3RpdmVoYW5kbGUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBjb2wuaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbC5tb2RlbCA9IG5nTW9kZWwuJG1vZGVsVmFsdWVbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgY29sLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgJ3RydWUnKTsgIC8vIEVuYWJsZSBjb2x1bW5zIHRvIGJlIGRyYWdnYWJsZS5cclxuICAgICAgICAgICAgICAgICAgICAgIHNvcnRhYmxlLnJlZ2lzdGVyX2Ryb3AoY29sKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc29ydGFibGUuaW5fdXNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgaWYgKG5nTW9kZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSW5pdCBmbGFnIGluZGljYXRlIHRoZSBmaXJzdCBsb2FkIHNvcnRhYmxlIGlzIGRvbmUgb3Igbm90XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRhYmxlLmZpcnN0X2xvYWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaCgnbmdFeHRyYVNvcnRhYmxlJywgZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5leHRyYV9kYXRhID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zb3J0YWJsZS5leHRyYV9kYXRhID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKCdodG1sU29ydGFibGUnLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGFibGUub3B0aW9ucyA9IGFuZ3VsYXIuY29weSh2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBcImRlc3Ryb3lcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvcnRhYmxlLmluX3VzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0YWJsZS51bmJpbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGFibGUuaW5fdXNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKHNvcnRhYmxlLm9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0YWJsZS5vcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKHNvcnRhYmxlLm9wdGlvbnMuYWxsb3dfY3Jvc3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0YWJsZS5vcHRpb25zLmFsbG93X2Nyb3NzID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChzb3J0YWJsZS5vcHRpb25zLmNvbnN0cnVjdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRhYmxlLm9wdGlvbnMuY29uc3RydWN0KG5nTW9kZWwuJG1vZGVsVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFswXS5jbGFzc0xpc3QuYWRkKCdodG1sNS1zb3J0YWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRhYmxlLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRhYmxlLmZpcnN0X2xvYWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9XYXRjaCBuZ01vZGVsIGFuZCBuYXJyYXRlIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaCgnbmdNb2RlbCcsIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc29ydGFibGUuZmlyc3RfbG9hZCB8fCBzb3J0YWJsZS5vcHRpb25zID09ICdkZXN0cm95Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9JZ25vcmUgb24gZmlyc3QgbG9hZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGFibGUudXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAkbG9nLmluZm8oJ01pc3NpbmcgbmctbW9kZWwgaW4gdGVtcGxhdGUnKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1dKVxyXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ2NvbnRhY3RDb250cm9sbGVyJywgWyckc2NvcGUnLCAnUmVzdFNlcnZpY2UnLCAnbm90aWZpY2F0aW9uU2VydmljZScsICckd2luZG93JywgZnVuY3Rpb24gKCRzY29wZSwgUmVzdFNlcnZpY2UsIG5vdGlmaWNhdGlvblNlcnZpY2UsICR3aW5kb3cpIHtcclxuICAgICAgICAgICAgICAvL2RhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICRzY29wZS5kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmlkTWFpbCA9IGlkTWFpbDtcclxuICAgICAgICAgICAgICAkc2NvcGUuaWRDb250YWN0ID0gaWRDb250YWN0O1xyXG4gICAgICAgICAgICAgICRzY29wZS5zZW5kU2VsZWN0ZWQgPSBbXTtcclxuICAgICAgICAgICAgICAkc2NvcGUucHJ1ZWJhID0ge307XHJcbiAgICAgICAgICAgICAgJHNjb3BlLml0ZW1zID0gW107XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFyclNlcnZpY2VzID0gW107XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFyckNvbmZpZ0Rhc2hib2FyZCA9IFtdO1xyXG4gICAgICAgICAgICAgICRzY29wZS5hcnJTdWJzID0gW107XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFyclVuc3VicyA9IFtdO1xyXG4gICAgICAgICAgICAgICRzY29wZS52YWxpZGF0ZVZpZXcgPSBmYWxzZTsgXHJcbiAgICAgICAgICAgICAgJHNjb3BlLnJlc3BvbnNlbWVzc2FnZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmRhdGEub3B0aW9uID0gXCJOaW5ndW5vXCI7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmRhdGEub3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIHtpZDogMSwgbmFtZTpcIk51bmNhIG1lIHN1c2NyaWLDrSBhIGVzdGEgbGlzdGFcIn0sXHJcbiAgICAgICAgICAgICAgICB7aWQ6IDIsIG5hbWU6XCJFbCBjb250ZW5pZG8gZGUgZXN0b3MgZW1haWxzIG5vIG1lIGludGVyZXNhXCJ9LFxyXG4gICAgICAgICAgICAgICAge2lkOiAzLCBuYW1lOlwiUmVjaWJvIGVzdG9zIGVtYWlscyBjb24gZGVtYXNpYWRhIGZyZWN1ZW5jaWFcIn0sXHJcbiAgICAgICAgICAgICAgICB7aWQ6IDQsIG5hbWU6XCJFc3RvcyBlbWFpbHMgc29uIHNwYW1cIn0sXHJcbiAgICAgICAgICAgICAgICB7aWQ6IDUsIG5hbWU6XCJOaW5ndW5vXCJ9LFxyXG4gICAgICAgICAgICAgICAge2lkOiA2LCBuYW1lOlwiT3Ryb1wifVxyXG4gICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmRhdGEub3RoZXIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICRzY29wZS5kYXRhLnNlbGVjdE9wdGlvbiA9IFtcclxuICAgICAgICAgICAgICAgIHtpZDogXCJvbmVcIiwgbmFtZTogXCJEZXN1c2NyaWJpcnNlIGRlIGVzdGEgQmFzZSBkZSBkYXRvcy5cIn0sXHJcbiAgICAgICAgICAgICAgICB7aWQ6IFwiYWxsXCIsIG5hbWU6IFwiRGVzdXNjcmliaXJzZSBkZSB0b2RhcyBsYXMgQmFzZXMgZGUgZGF0b3MuXCJ9XHJcbiAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jbGljayA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLm9wdGlvbkRyb3BwYWJsZSA9IHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNCxcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICRzY29wZS5kYXRhLmlkTWFpbCA9IGlkTWFpbDtcclxuICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5pZENvbnRhY3QgPSBpZENvbnRhY3Q7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAvL01pc2NcclxuICAgICAgICAgICAgICAkc2NvcGUubWlzYyA9IHt9O1xyXG4gICAgICAgICAgICAgICRzY29wZS5taXNjLmFkdmFuY2VVbnN1c2NyaWJlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgLy90eXBlVmlld1xyXG4gICAgICAgICAgICAgIGlmKCB0eXBlVmlldyA9PSAxICl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnZhbGlkYXRlVmlldyA9IHRydWU7ICAgXHJcbiAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnZhbGlkYXRlVmlldyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAvL0Z1bmN0aW9uc1xyXG4gICAgICAgICAgICAgICRzY29wZS5mdW5jdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VBZHZhbmNlVW5zdXNjcmliZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm1pc2MuYWR2YW5jZVVuc3VzY3JpYmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy5hZHZhbmNlVW5zdXNjcmliZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLmFkdmFuY2VVbnN1c2NyaWJlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICRzY29wZS5yZXN0U2VydmljZSA9IHtcclxuICAgICAgICAgICAgICAgIHNlbmRVbnN1YnNjcmliZVNpbXBsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltcGxlRGVzdXNjcmliZUJ0bicpLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgUmVzdFNlcnZpY2Uuc2VuZFVuc3Vic2NyaWJlU2ltcGxlKCRzY29wZS5kYXRhKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5zdWNjZXNzKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmRyYWdnYWJsZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgLy9BY3Rpb24gRHJvcHBhYmxlXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbkRyb3BwYWJsZVN1YnMgPSB7XHJcbiAgICAgICAgICAgICAgICBvbk92ZXI6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcclxuICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VicycpKTtcclxuICAgICAgICAgICAgICAgICAgJChlbGVtZW50WzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcImJvZGVyLWRyb3BwYWJsZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImhvdmVyLWRyb3BwYWJsZVwiKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkRyb3A6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcclxuICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VicycpKTtcclxuICAgICAgICAgICAgICAgICAgJChlbGVtZW50WzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcImhvdmVyLWRyb3BwYWJsZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImJvZGVyLWRyb3BwYWJsZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFwicFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgIG9iakxpc3QgPSAkc2NvcGUuYXJyQ29uZmlnRGFzaGJvYXJkW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgZm9yIChpIGluICRzY29wZS5hcnJEZWZhdWx0RGFzaGJvYXJkLml0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iakxpc3QudGl0bGUgPT0gJHNjb3BlLmFyckRlZmF1bHREYXNoYm9hcmQuaXRlbXNbaV0udGl0bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJDb25maWdEYXNoYm9hcmQuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJTZXJ2aWNlcy5zcGxpY2Uob2JqTGlzdC5qcXlvdWlfcG9zLCAxLCAkc2NvcGUuYXJyRGVmYXVsdERhc2hib2FyZC5pdGVtc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9uRHJvcHBhYmxlVW5TdWJzID0ge1xyXG4gICAgICAgICAgICAgICAgb25PdmVyOiBmdW5jdGlvbiAoZXZlbnQsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Vuc3VicycpKTtcclxuICAgICAgICAgICAgICAgICAgJChlbGVtZW50WzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcImJvZGVyLWRyb3BwYWJsZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImhvdmVyLWRyb3BwYWJsZVwiKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkRyb3A6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcclxuICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndW5zdWJzJykpO1xyXG4gICAgICAgICAgICAgICAgICAkKGVsZW1lbnRbMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKFwiaG92ZXItZHJvcHBhYmxlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiYm9kZXItZHJvcHBhYmxlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCJwXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmh0bWwoXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgb2JqTGlzdCA9ICRzY29wZS5hcnJDb25maWdEYXNoYm9hcmRbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICBmb3IgKGkgaW4gJHNjb3BlLmFyckRlZmF1bHREYXNoYm9hcmQuaXRlbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqTGlzdC50aXRsZSA9PSAkc2NvcGUuYXJyRGVmYXVsdERhc2hib2FyZC5pdGVtc1tpXS50aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFyckNvbmZpZ0Rhc2hib2FyZC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFyclNlcnZpY2VzLnNwbGljZShvYmpMaXN0LmpxeW91aV9wb3MsIDEsICRzY29wZS5hcnJEZWZhdWx0RGFzaGJvYXJkLml0ZW1zW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgUmVzdFNlcnZpY2UuZ2V0Q29udGFjdCgkc2NvcGUuaWRDb250YWN0LCAkc2NvcGUuaWRNYWlsKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRhY3QgPSBkYXRhOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmNvbnRhY3QgPSBkYXRhLmNvbnRhY3Q7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS50eXBlVmlldyA9ICRzY29wZS52YWxpZGF0ZVZpZXc7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKCRzY29wZS5jb250YWN0LmNvbnRhY3QubmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLm5hbWUgPSAkc2NvcGUuY29udGFjdC5jb250YWN0LmVtYWlsO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLmNvbnRhY3QuY29udGFjdC5sYXN0bmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLm5hbWUgPSAkc2NvcGUuY29udGFjdC5jb250YWN0Lm5hbWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZSA9ICRzY29wZS5jb250YWN0LmNvbnRhY3QubmFtZSArIFwiIFwiICsgJHNjb3BlLmNvbnRhY3QuY29udGFjdC5sYXN0bmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5jb250YWN0LmFyclVuc3Vic2NyaWJlZENhdGVnb3JpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRhY3QuYXJyVW5zdWJzY3JpYmVkQ2F0ZWdvcmllc1tpXS5qcXlvdWlfcG9zID0gaTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRhY3QuYXJyVW5zdWJzY3JpYmVkQ2F0ZWdvcmllc1tpXS5kcmFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5jb250YWN0LmFyclN1YnNjcmliZWRDYXRlZ29yaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jb250YWN0LmFyclN1YnNjcmliZWRDYXRlZ29yaWVzW2ldLmpxeW91aV9wb3MgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY29udGFjdC5hcnJTdWJzY3JpYmVkQ2F0ZWdvcmllc1tpXS5kcmFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyU3VicyA9IGFuZ3VsYXIuY29weSgkc2NvcGUuY29udGFjdC5hcnJTdWJzY3JpYmVkQ2F0ZWdvcmllcyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyVW5zdWJzID0gYW5ndWxhci5jb3B5KCRzY29wZS5jb250YWN0LmFyclVuc3Vic2NyaWJlZENhdGVnb3JpZXMpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvL3ZhciBhcnJheUNhdGVnb3J5ID0gJHNjb3BlLmFyclN1YnNDb25jYXQuY29uY2F0KCRzY29wZS5hcnJVbnN1YnMpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcImFycmF5Q2F0ZWdvcnlcIixhcnJheUNhdGVnb3J5KTtcclxuICAgICAgICAgICAgICAgIC8vJHNjb3BlLmFyclVuc3VicyA9IGFycmF5Q2F0ZWdvcnk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEubWVzc2FnZSAhPSAnJyl7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UucHJpbWFyeShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICRzY29wZS5ub3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAkc2NvcGUub3BlTW9kYWxNb3JlQ2EgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICQoJyNhbGVydE1vcmVDYXJhY3RlcicpLnJlbW92ZUNsYXNzKCdtb2RhbCcpO1xyXG4gICAgICAgICAgICAgICAgaWYoJHNjb3BlLmRhdGEub3RoZXIubGVuZ3RoID4gMCAmJiAkc2NvcGUuZGF0YS5vcHRpb24gPT09ICdPdHJvJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiN0ZXh0bWVzc2FnZVwiKS50ZXh0KFwiTGEgZGVzdXNjcmlwY2nDs24gZnVlIHJlYWxpemFkYSBjb3JyZWN0YW1lbnRlLCBtdWNoYXMgZ3JhY2lhcyBwb3IgaW5mb3JtYXJub3MgZWwgbW90aXZvIGRlIGxhIGRlc3VzY3JpcGNpw7NuLCBlc3BlcmFtb3MgbWVqb3JhciBwYXJhIHVzdGVkLlwiKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjdGV4dG1lc3NhZ2VcIikudGV4dChcIkxhIGRlc3VzY3JpcGNpw7NuIGZ1ZSByZWFsaXphZGEgY29ycmVjdGFtZW50ZS5cIik7XHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgJCgnI2FsZXJ0TW9yZUNhcmFjdGVyJykuYWRkQ2xhc3MoJ2RpYWxvZyBkaWFsb2ctLW9wZW4nKTsgXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICRzY29wZS5jbG9zZU1vZGFsTW9yZUNhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZigkc2NvcGUuZGF0YS50eXBlVmlldyA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzYWJsZWQgPSB0cnVlOyAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKCcjYWxlcnRNb3JlQ2FyYWN0ZXInKS5yZW1vdmVDbGFzcygnZGlhbG9nIGRpYWxvZy0tb3BlbicpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2FsZXJ0TW9yZUNhcmFjdGVyJykuYWRkQ2xhc3MoJ21vZGFsJyk7IFxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNlbmRVbnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLnN1YnNjcmliZSA9ICRzY29wZS5hcnJTdWJzO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEudW5zdWJzY3JpYmUgPSAkc2NvcGUuYXJyVW5zdWJzO1xyXG4gICAgICAgICAgICAgICAgUmVzdFNlcnZpY2Uuc2VuZFVuc3Vic2NyaWJlKCRzY29wZS5kYXRhLCAkc2NvcGUuaWRDb250YWN0KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vbm90aWZpY2F0aW9uU2VydmljZS5zdWNjZXNzKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5vcGVNb2RhbE1vcmVDYSgpO1xyXG4gICAgICAgICAgICAgICAgICBpZigkc2NvcGUuZGF0YS50eXBlVmlldyA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzYWJsZWQgPSB0cnVlOyAgXHJcbiAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEub3RoZXIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuYXJyVW5zdWJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYXJyVW5zdWJzW2ldLmlkQ29udGFjdGxpc3RDYXRlZ29yeSA9PSBjYXRlZ29yeS5pZENvbnRhY3RsaXN0Q2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXJyVW5zdWJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyclN1YnMucHVzaChjYXRlZ29yeSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICRzY29wZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuYXJyU3Vicy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFyclN1YnNbaV0uaWRDb250YWN0bGlzdENhdGVnb3J5ID09IGNhdGVnb3J5LmlkQ29udGFjdGxpc3RDYXRlZ29yeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJTdWJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyclVuc3Vicy5wdXNoKGNhdGVnb3J5KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdE9wdGlvbiA9IGZ1bmN0aW9uIChuYW1lKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLm9wdGlvbiA9IG5hbWU7XHJcbiAgICAgICAgICAgICAgICBpZigkc2NvcGUuZGF0YS5vcHRpb24gIT0gJ090cm8nKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5vdGhlciA9Jyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICRzY29wZS5zZWxlY3RCdXR0b24gPSBmdW5jdGlvbiAobmFtZSl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jbGljayA9IG5hbWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgfV0pXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuY29udHJvbGxlcignYWR2YW5jZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICdSZXN0U2VydmljZScsICdub3RpZmljYXRpb25TZXJ2aWNlJywgJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHNjb3BlLCBSZXN0U2VydmljZSwgbm90aWZpY2F0aW9uU2VydmljZSwgJHdpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFnZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RyaW5nc2VhcmNoID0gLTE7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd25ld2Jsb2NrYWRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zaG93YmxvY2thZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgLy9kYXRhXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFJlc3RTZXJ2aWNlLmdldEFsbCgkc2NvcGUuaW5pdGlhbCwgJHNjb3BlLnN0cmluZ3NlYXJjaCkudGhlbihmdW5jdGlvbiAoZGF0YSkgeyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEudG90YWwgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd2Jsb2NrYWRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd25ld2Jsb2NrYWRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJsb2NrYWRlID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGwoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5mb3J3YXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9ncmVzc2JhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbml0aWFsICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZhc3Rmb3J3YXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9ncmVzc2JhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbml0aWFsID0gKCRzY29wZS5ibG9ja2FkZS50b3RhbF9wYWdlcyAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlID0gJHNjb3BlLmJsb2NrYWRlLnRvdGFsX3BhZ2VzO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGwoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYmFja3dhcmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzYmFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWwgLT0gMTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnZSAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGwoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmFzdGJhY2t3YXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9ncmVzc2JhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbml0aWFsID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldEFsbCgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWFyY2hDb250YWN0ID0gZnVuY3Rpb24gKHBhcmFtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocGFyYW0gPT0gMSl7ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5zZWFyY2ggIT0gJycpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN0cmluZ3NlYXJjaCA9ICRzY29wZS5zZWFyY2g7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsKCk7ICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldEFsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmIChwYXJhbSA9PSAyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdHJpbmdzZWFyY2ggPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldEFsbCgpOyAgXHJcbiAgICAgICAgICAgICAgICAgICAgfSAgICBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICRzY29wZS5kZWxldGVVbnN1YiA9IGZ1bmN0aW9uIChpZENvbnRhY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBSZXN0U2VydmljZS5kZWxldGVVbnN1YihpZENvbnRhY3QpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLnN1Y2Nlc3MoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfV0pXHJcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdjcmVhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnUmVzdFNlcnZpY2UnLCAnbm90aWZpY2F0aW9uU2VydmljZScsICckd2luZG93JywgZnVuY3Rpb24gKCRzY29wZSwgUmVzdFNlcnZpY2UsIG5vdGlmaWNhdGlvblNlcnZpY2UsICR3aW5kb3cpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuYWxsY2F0ZWdvcmllcyA9IGZhbHNlOyBcclxuICAgICAgICAgICAgICAkc2NvcGUuc2VydmljZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICRzY29wZS5pbml0Q29tcG9uZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIFJlc3RTZXJ2aWNlLmxpc3RpbmRpY2F0aXZlKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3RpbmRpY2F0aXZlID0gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBSZXN0U2VydmljZS5saXN0Q2F0ZWdvcmllcygpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7ICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3RBbGxBZGRyZXNzZWUgPSByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJkYXRhLS0tLS0+XCIscmVzcG9uc2UgKTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmluaXRDb21wb25lbnRzKCk7XHJcbiAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFkZFVuc3ViID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuc2VydmljZXMgPSAkc2NvcGUuc2VydmljZXM7XHJcbiAgICAgICAgICAgICAgICBSZXN0U2VydmljZS5jcmVhdGVVbnN1Yigkc2NvcGUuZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByb3V0ZT0gIGZ1bGxVcmxCYXNlICsgdGVtcGxhdGVCYXNlK1wiL2xpc3RcIjtcclxuICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSByb3V0ZTtcclxuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLnN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSk7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XSlcclxuICAgICAgICAgIC5jb250cm9sbGVyKCdjb250YWN0YXV0b21hdGljQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ1Jlc3RTZXJ2aWNlJywgJ25vdGlmaWNhdGlvblNlcnZpY2UnLCAnJHdpbmRvdycsIGZ1bmN0aW9uICgkc2NvcGUsIFJlc3RTZXJ2aWNlLCBub3RpZmljYXRpb25TZXJ2aWNlLCAkd2luZG93KSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmlkTWFpbCA9IGlkTWFpbDtcclxuICAgICAgICAgICAgICAkc2NvcGUuaWRDb250YWN0ID0gaWRDb250YWN0O1xyXG4gICAgICAgICAgICAgICRzY29wZS5zZW5kU2VsZWN0ZWQgPSBbXTtcclxuICAgICAgICAgICAgICAkc2NvcGUucHJ1ZWJhID0ge307XHJcbiAgICAgICAgICAgICAgJHNjb3BlLml0ZW1zID0gW107XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFyclNlcnZpY2VzID0gW107XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFyckNvbmZpZ0Rhc2hib2FyZCA9IFtdO1xyXG4gICAgICAgICAgICAgICRzY29wZS5hcnJTdWJzID0gW107XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFyclVuc3VicyA9IFtdO1xyXG4gICAgICAgICAgICAgICRzY29wZS5vcHRpb25Ecm9wcGFibGUgPSB7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjQsXHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmRyYWdnYWJsZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgLy9BY3Rpb24gRHJvcHBhYmxlXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbkRyb3BwYWJsZVN1YnMgPSB7XHJcbiAgICAgICAgICAgICAgICBvbk92ZXI6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcclxuICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VicycpKTtcclxuICAgICAgICAgICAgICAgICAgJChlbGVtZW50WzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcImJvZGVyLWRyb3BwYWJsZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImhvdmVyLWRyb3BwYWJsZVwiKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkRyb3A6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcclxuICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VicycpKTtcclxuICAgICAgICAgICAgICAgICAgJChlbGVtZW50WzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcImhvdmVyLWRyb3BwYWJsZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImJvZGVyLWRyb3BwYWJsZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFwicFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgIG9iakxpc3QgPSAkc2NvcGUuYXJyQ29uZmlnRGFzaGJvYXJkW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgZm9yIChpIGluICRzY29wZS5hcnJEZWZhdWx0RGFzaGJvYXJkLml0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iakxpc3QudGl0bGUgPT0gJHNjb3BlLmFyckRlZmF1bHREYXNoYm9hcmQuaXRlbXNbaV0udGl0bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJDb25maWdEYXNoYm9hcmQuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJTZXJ2aWNlcy5zcGxpY2Uob2JqTGlzdC5qcXlvdWlfcG9zLCAxLCAkc2NvcGUuYXJyRGVmYXVsdERhc2hib2FyZC5pdGVtc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9uRHJvcHBhYmxlVW5TdWJzID0ge1xyXG4gICAgICAgICAgICAgICAgb25PdmVyOiBmdW5jdGlvbiAoZXZlbnQsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Vuc3VicycpKTtcclxuICAgICAgICAgICAgICAgICAgJChlbGVtZW50WzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcImJvZGVyLWRyb3BwYWJsZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImhvdmVyLWRyb3BwYWJsZVwiKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkRyb3A6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcclxuICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndW5zdWJzJykpO1xyXG4gICAgICAgICAgICAgICAgICAkKGVsZW1lbnRbMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKFwiaG92ZXItZHJvcHBhYmxlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiYm9kZXItZHJvcHBhYmxlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCJwXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmh0bWwoXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgb2JqTGlzdCA9ICRzY29wZS5hcnJDb25maWdEYXNoYm9hcmRbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhvYmpMaXN0KTtcclxuICAgICAgICAgICAgICAgICAgZm9yIChpIGluICRzY29wZS5hcnJEZWZhdWx0RGFzaGJvYXJkLml0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iakxpc3QudGl0bGUgPT0gJHNjb3BlLmFyckRlZmF1bHREYXNoYm9hcmQuaXRlbXNbaV0udGl0bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJDb25maWdEYXNoYm9hcmQuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJTZXJ2aWNlcy5zcGxpY2Uob2JqTGlzdC5qcXlvdWlfcG9zLCAxLCAkc2NvcGUuYXJyRGVmYXVsdERhc2hib2FyZC5pdGVtc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIFJlc3RTZXJ2aWNlLmdldENvbnRhY3QoJHNjb3BlLmlkQ29udGFjdCwkc2NvcGUuaWRNYWlsKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRhY3QgPSBkYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLmNvbnRhY3QuY29udGFjdC5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZSA9ICRzY29wZS5jb250YWN0LmNvbnRhY3QuZW1haWw7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZCgkc2NvcGUuY29udGFjdC5jb250YWN0Lmxhc3RuYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZSA9ICRzY29wZS5jb250YWN0LmNvbnRhY3QubmFtZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5uYW1lID0gJHNjb3BlLmNvbnRhY3QuY29udGFjdC5uYW1lICsgXCIgXCIgKyAkc2NvcGUuY29udGFjdC5jb250YWN0Lmxhc3RuYW1lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuY29udGFjdC5hcnJVbnN1YnNjcmliZWRDYXRlZ29yaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jb250YWN0LmFyclVuc3Vic2NyaWJlZENhdGVnb3JpZXNbaV0uanF5b3VpX3BvcyA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jb250YWN0LmFyclVuc3Vic2NyaWJlZENhdGVnb3JpZXNbaV0uZHJhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuY29udGFjdC5hcnJTdWJzY3JpYmVkQ2F0ZWdvcmllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY29udGFjdC5hcnJTdWJzY3JpYmVkQ2F0ZWdvcmllc1tpXS5qcXlvdWlfcG9zID0gaTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRhY3QuYXJyU3Vic2NyaWJlZENhdGVnb3JpZXNbaV0uZHJhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyclN1YnMgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLmNvbnRhY3QuYXJyU3Vic2NyaWJlZENhdGVnb3JpZXMpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyclVuc3VicyA9IGFuZ3VsYXIuY29weSgkc2NvcGUuY29udGFjdC5hcnJVbnN1YnNjcmliZWRDYXRlZ29yaWVzKTtcclxuXHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICRzY29wZS5zZW5kVW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VuZHVuc3Vic2NyaWJlcyA9IHtpZE1haWw6ICRzY29wZS5pZE1haWwsIGFyclN1YnM6ICRzY29wZS5hcnJTdWJzLCBhcnJVbnN1YnM6ICRzY29wZS5hcnJVbnN1YnN9O1xyXG4gICAgICAgICAgICAgICAgUmVzdFNlcnZpY2Uuc2VuZFVuc3Vic2NyaWJlQXV0b21hdGljKHNlbmR1bnN1YnNjcmliZXMsICRzY29wZS5pZENvbnRhY3QpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5zdWNjZXNzKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAkc2NvcGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5hcnJVbnN1YnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hcnJVbnN1YnNbaV0uaWRDb250YWN0bGlzdENhdGVnb3J5ID09IGNhdGVnb3J5LmlkQ29udGFjdGxpc3RDYXRlZ29yeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJVbnN1YnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyU3Vicy5wdXNoKGNhdGVnb3J5KTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICRzY29wZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuYXJyU3Vicy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFyclN1YnNbaV0uaWRDb250YWN0bGlzdENhdGVnb3J5ID09IGNhdGVnb3J5LmlkQ29udGFjdGxpc3RDYXRlZ29yeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJTdWJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyclVuc3Vicy5wdXNoKGNhdGVnb3J5KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgXHJcbiAgYW5ndWxhci5lbGVtZW50KCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgYW5ndWxhci5ib290c3RyYXAoZG9jdW1lbnQsIFsndW5zdWJzY3JpYmVBcHAnXSlcclxuICB9KTtcclxuXHJcbn0pKCk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vanMvYW5ndWxhci91bnN1YnNjcmliZS9jb250cm9sbGVycy5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports) {

eval("(function () {\r\n  angular.module('unsubscribe.service', [])\r\n    .service('RestService',['$http','$q','notificationService', function ($http, $q, notificationService) {\r\n\r\n      this.getContact = function (idContact,idMail) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/unsubscribe/getcontact/' + idContact + '/' + idMail;\r\n        $http.get(url)\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.primary(data.message);\r\n          });\r\n        return deferred.promise;\r\n      }\r\n\r\n      this.sendUnsubscribe = function (data, idContact) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/unsubscribe/insunsubscribe/' + idContact;\r\n        $http.post(url, data)\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data.message);\r\n          });\r\n        return deferred.promise;\r\n      }\r\n      \r\n      this.getAll = function (page, stringsearch) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/unsubscribe/getcontactsunsubscribe/'+page;\r\n        $http.post(url,{stringsearch: stringsearch})\r\n       \r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data.message);\r\n          });\r\n        return deferred.promise;\r\n      }\r\n      \r\n      this.deleteUnsub = function (idContact) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/unsubscribe/deleteunsub/' + idContact;\r\n        $http.get(url)\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data.message);\r\n          });\r\n        return deferred.promise;\r\n      }\r\n      this.sendUnsubscribeAutomatic = function (data, idContact) {\r\n        let deferred = $q.defer();\r\n        let url = fullUrlBase + \"api/unsubscribe/insunsubscribeautomatic/\" + idContact;\r\n\r\n        $http.post(url, data)\r\n          .success(function (response) {\r\n            deferred.resolve(response);\r\n          })\r\n          .error(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n        return deferred.promise;\r\n      }\r\n      \r\n      this.sendUnsubscribeSimple = function(data){\r\n        let deferred = $q.defer();\r\n        let url = fullUrlBase + \"api/unsubscribe/insunsubscribesimple/\" + data.idMail+\"/\"+data.idContact;\r\n\r\n        $http.get(url)\r\n          .success(function (response) {\r\n            deferred.resolve(response);\r\n          })\r\n          .error(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n        return deferred.promise;\r\n      }\r\n      \r\n       this.listindicative = function () {\r\n        let defered = $q.defer();\r\n        let url = fullUrlBase + \"api/country/indicatives\";\r\n        $http.get(url)\r\n          .success(function (response) {\r\n            defered.resolve(response);\r\n          })\r\n          .error(function (error) {\r\n            defered.reject(error);\r\n          });\r\n\r\n        return defered.promise;\r\n      }\r\n      \r\n      this.listCategories = function () {\r\n        let defered = $q.defer();\r\n        let url = fullUrlBase + \"api/unsubscribe/getcategories\";\r\n        $http.get(url)\r\n          .success(function (response) {\r\n            defered.resolve(response);\r\n          })\r\n          .error(function (error) {\r\n            defered.reject(error);\r\n          });\r\n\r\n        return defered.promise;\r\n      }\r\n      \r\n      this.createUnsub = function (data) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/unsubscribe/createcontactunsub';\r\n        $http.post(url, data)\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data.message);\r\n          });\r\n        return deferred.promise;\r\n      }\r\n\r\n    }])\r\n    .factory('notificationService', function () {\r\n      function error(message) {\r\n        slideOnTop(message, 4000, 'glyphicon glyphicon-remove-circle', 'danger');\r\n      }\r\n\r\n      function success(message) {\r\n        slideOnTop(message, 4000, 'glyphicon glyphicon-ok-circle', 'success');\r\n      }\r\n\r\n      function warning(message) {\r\n        slideOnTop(message, 4000, 'glyphicon glyphicon-exclamation-sign', 'warning');\r\n      }\r\n\r\n      function notice(message) {\r\n        slideOnTop(message, 4000, 'glyphicon glyphicon-exclamation-sign', 'notice');\r\n      }\r\n\r\n      function primary(message) {\r\n        slideOnTop(message, 4000, 'glyphicon glyphicon-exclamation-sign', 'primary');\r\n      }\r\n\r\n      return {\r\n        error: error,\r\n        success: success,\r\n        warning: warning,\r\n        notice: notice,\r\n        primary: primary\r\n      };\r\n    })\r\n})();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL3Vuc3Vic2NyaWJlL3NlcnZpY2VzLmpzPzIwMjIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDJCQUEyQjs7QUFFbkQ7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xyXG4gIGFuZ3VsYXIubW9kdWxlKCd1bnN1YnNjcmliZS5zZXJ2aWNlJywgW10pXHJcbiAgICAuc2VydmljZSgnUmVzdFNlcnZpY2UnLFsnJGh0dHAnLCckcScsJ25vdGlmaWNhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHAsICRxLCBub3RpZmljYXRpb25TZXJ2aWNlKSB7XHJcblxyXG4gICAgICB0aGlzLmdldENvbnRhY3QgPSBmdW5jdGlvbiAoaWRDb250YWN0LGlkTWFpbCkge1xyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgdmFyIHVybCA9IGZ1bGxVcmxCYXNlICsgJ2FwaS91bnN1YnNjcmliZS9nZXRjb250YWN0LycgKyBpZENvbnRhY3QgKyAnLycgKyBpZE1haWw7XHJcbiAgICAgICAgJGh0dHAuZ2V0KHVybClcclxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhKTtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5wcmltYXJ5KGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5zZW5kVW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoZGF0YSwgaWRDb250YWN0KSB7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICB2YXIgdXJsID0gZnVsbFVybEJhc2UgKyAnYXBpL3Vuc3Vic2NyaWJlL2luc3Vuc3Vic2NyaWJlLycgKyBpZENvbnRhY3Q7XHJcbiAgICAgICAgJGh0dHAucG9zdCh1cmwsIGRhdGEpXHJcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB0aGlzLmdldEFsbCA9IGZ1bmN0aW9uIChwYWdlLCBzdHJpbmdzZWFyY2gpIHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIHZhciB1cmwgPSBmdWxsVXJsQmFzZSArICdhcGkvdW5zdWJzY3JpYmUvZ2V0Y29udGFjdHN1bnN1YnNjcmliZS8nK3BhZ2U7XHJcbiAgICAgICAgJGh0dHAucG9zdCh1cmwse3N0cmluZ3NlYXJjaDogc3RyaW5nc2VhcmNofSlcclxuICAgICAgIFxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdGhpcy5kZWxldGVVbnN1YiA9IGZ1bmN0aW9uIChpZENvbnRhY3QpIHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIHZhciB1cmwgPSBmdWxsVXJsQmFzZSArICdhcGkvdW5zdWJzY3JpYmUvZGVsZXRldW5zdWIvJyArIGlkQ29udGFjdDtcclxuICAgICAgICAkaHR0cC5nZXQodXJsKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNlbmRVbnN1YnNjcmliZUF1dG9tYXRpYyA9IGZ1bmN0aW9uIChkYXRhLCBpZENvbnRhY3QpIHtcclxuICAgICAgICBsZXQgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIGxldCB1cmwgPSBmdWxsVXJsQmFzZSArIFwiYXBpL3Vuc3Vic2NyaWJlL2luc3Vuc3Vic2NyaWJlYXV0b21hdGljL1wiICsgaWRDb250YWN0O1xyXG5cclxuICAgICAgICAkaHR0cC5wb3N0KHVybCwgZGF0YSlcclxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdGhpcy5zZW5kVW5zdWJzY3JpYmVTaW1wbGUgPSBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICBsZXQgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIGxldCB1cmwgPSBmdWxsVXJsQmFzZSArIFwiYXBpL3Vuc3Vic2NyaWJlL2luc3Vuc3Vic2NyaWJlc2ltcGxlL1wiICsgZGF0YS5pZE1haWwrXCIvXCIrZGF0YS5pZENvbnRhY3Q7XHJcblxyXG4gICAgICAgICRodHRwLmdldCh1cmwpXHJcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgICB0aGlzLmxpc3RpbmRpY2F0aXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBkZWZlcmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICBsZXQgdXJsID0gZnVsbFVybEJhc2UgKyBcImFwaS9jb3VudHJ5L2luZGljYXRpdmVzXCI7XHJcbiAgICAgICAgJGh0dHAuZ2V0KHVybClcclxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBkZWZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgZGVmZXJlZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZlcmVkLnByb21pc2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHRoaXMubGlzdENhdGVnb3JpZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IGRlZmVyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIGxldCB1cmwgPSBmdWxsVXJsQmFzZSArIFwiYXBpL3Vuc3Vic2NyaWJlL2dldGNhdGVnb3JpZXNcIjtcclxuICAgICAgICAkaHR0cC5nZXQodXJsKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGRlZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBkZWZlcmVkLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRlZmVyZWQucHJvbWlzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdGhpcy5jcmVhdGVVbnN1YiA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICB2YXIgdXJsID0gZnVsbFVybEJhc2UgKyAnYXBpL3Vuc3Vic2NyaWJlL2NyZWF0ZWNvbnRhY3R1bnN1Yic7XHJcbiAgICAgICAgJGh0dHAucG9zdCh1cmwsIGRhdGEpXHJcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgfV0pXHJcbiAgICAuZmFjdG9yeSgnbm90aWZpY2F0aW9uU2VydmljZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgZnVuY3Rpb24gZXJyb3IobWVzc2FnZSkge1xyXG4gICAgICAgIHNsaWRlT25Ub3AobWVzc2FnZSwgNDAwMCwgJ2dseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlLWNpcmNsZScsICdkYW5nZXInKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gc3VjY2VzcyhtZXNzYWdlKSB7XHJcbiAgICAgICAgc2xpZGVPblRvcChtZXNzYWdlLCA0MDAwLCAnZ2x5cGhpY29uIGdseXBoaWNvbi1vay1jaXJjbGUnLCAnc3VjY2VzcycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UpIHtcclxuICAgICAgICBzbGlkZU9uVG9wKG1lc3NhZ2UsIDQwMDAsICdnbHlwaGljb24gZ2x5cGhpY29uLWV4Y2xhbWF0aW9uLXNpZ24nLCAnd2FybmluZycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBub3RpY2UobWVzc2FnZSkge1xyXG4gICAgICAgIHNsaWRlT25Ub3AobWVzc2FnZSwgNDAwMCwgJ2dseXBoaWNvbiBnbHlwaGljb24tZXhjbGFtYXRpb24tc2lnbicsICdub3RpY2UnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gcHJpbWFyeShtZXNzYWdlKSB7XHJcbiAgICAgICAgc2xpZGVPblRvcChtZXNzYWdlLCA0MDAwLCAnZ2x5cGhpY29uIGdseXBoaWNvbi1leGNsYW1hdGlvbi1zaWduJywgJ3ByaW1hcnknKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBlcnJvcjogZXJyb3IsXHJcbiAgICAgICAgc3VjY2Vzczogc3VjY2VzcyxcclxuICAgICAgICB3YXJuaW5nOiB3YXJuaW5nLFxyXG4gICAgICAgIG5vdGljZTogbm90aWNlLFxyXG4gICAgICAgIHByaW1hcnk6IHByaW1hcnlcclxuICAgICAgfTtcclxuICAgIH0pXHJcbn0pKCk7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vanMvYW5ndWxhci91bnN1YnNjcmliZS9zZXJ2aWNlcy5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ })
/******/ ]);