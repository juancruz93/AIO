/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

eval("__webpack_require__(1);\r\n__webpack_require__(2);\r\n__webpack_require__(3);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL2F1dG9yZXNwb25kZXIvbWFpbi5qcz9lMGYzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG1CQUFPLENBQUMsQ0FBVTtBQUNsQixtQkFBTyxDQUFDLENBQWtCO0FBQzFCLG1CQUFPLENBQUMsQ0FBZSIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnLi9hcHAuanMnKTtcclxucmVxdWlyZSgnLi9jb250cm9sbGVycy5qcycpO1xyXG5yZXF1aXJlKCcuL3NlcnZpY2VzLmpzJyk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9qcy9hbmd1bGFyL2F1dG9yZXNwb25kZXIvbWFpbi5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, exports) {

eval("(function () {\r\n    angular.module('autoresponder', ['ui.router', 'autoresponder.controllers', 'autoresponder.services', 'ui.select', 'ngSanitize', 'ngMaterial', 'moment-picker'])\r\n        .config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {\r\n              $stateProvider\r\n                      .state('index', { \r\n                        url: \"/\",\r\n                        templateUrl: fullUrlBase + templateBase + '/list',\r\n                        controller: 'listController'\r\n                      })  \r\n                      .state('tools', {\r\n                        url: \"/tools\",\r\n                        templateUrl: fullUrlBase + templateBase + '/tools',\r\n                        controller: 'toolsController' \r\n                      })\r\n                      .state('birthday', {\r\n                        url: \"/birthday/:id\",\r\n                        templateUrl: fullUrlBase + templateBase + '/birthday',\r\n                        controller: 'birthdayController'\r\n                      })\r\n                      .state('birthdaysms', {\r\n                        url: \"/birthdaysms/:id\",\r\n                        templateUrl: fullUrlBase + templateBase + '/birthdaysms',\r\n                        controller: 'birthdaySmsController'\r\n                      })\r\n                      .state('edit', {\r\n                        url: \"/edit/:id\",\r\n                        templateUrl: fullUrlBase + templateBase + '/edit',\r\n                        controller: 'editController'\r\n                      });\r\n\r\n              $urlRouterProvider.otherwise('/')\r\n            }]);\r\n})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL2F1dG9yZXNwb25kZXIvYXBwLmpzP2ZkYTMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qjs7QUFFdkI7QUFDQSxhQUFhO0FBQ2IsQ0FBQyIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhdXRvcmVzcG9uZGVyJywgWyd1aS5yb3V0ZXInLCAnYXV0b3Jlc3BvbmRlci5jb250cm9sbGVycycsICdhdXRvcmVzcG9uZGVyLnNlcnZpY2VzJywgJ3VpLnNlbGVjdCcsICduZ1Nhbml0aXplJywgJ25nTWF0ZXJpYWwnLCAnbW9tZW50LXBpY2tlciddKVxyXG4gICAgICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICAgICAgICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAuc3RhdGUoJ2luZGV4JywgeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi9cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGZ1bGxVcmxCYXNlICsgdGVtcGxhdGVCYXNlICsgJy9saXN0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2xpc3RDb250cm9sbGVyJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSkgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgLnN0YXRlKCd0b29scycsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi90b29sc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogZnVsbFVybEJhc2UgKyB0ZW1wbGF0ZUJhc2UgKyAnL3Rvb2xzJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3Rvb2xzQ29udHJvbGxlcicgXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnN0YXRlKCdiaXJ0aGRheScsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi9iaXJ0aGRheS86aWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGZ1bGxVcmxCYXNlICsgdGVtcGxhdGVCYXNlICsgJy9iaXJ0aGRheScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdiaXJ0aGRheUNvbnRyb2xsZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnN0YXRlKCdiaXJ0aGRheXNtcycsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi9iaXJ0aGRheXNtcy86aWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGZ1bGxVcmxCYXNlICsgdGVtcGxhdGVCYXNlICsgJy9iaXJ0aGRheXNtcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdiaXJ0aGRheVNtc0NvbnRyb2xsZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgLnN0YXRlKCdlZGl0Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL2VkaXQvOmlkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBmdWxsVXJsQmFzZSArIHRlbXBsYXRlQmFzZSArICcvZWRpdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdlZGl0Q29udHJvbGxlcidcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJylcclxuICAgICAgICAgICAgfV0pO1xyXG59KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vanMvYW5ndWxhci9hdXRvcmVzcG9uZGVyL2FwcC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports) {

eval("(function () {\r\n    angular.module('autoresponder.controllers', [])\r\n            .filter('propsFilter', function () {\r\n                return function (items, props) {\r\n                    var out = [];\r\n                    if (angular.isArray(items)) {\r\n                        var keys = Object.keys(props);\r\n                        items.forEach(function (item) {\r\n                            var itemMatches = false;\r\n                            for (var i = 0; i < keys.length; i++) {\r\n                                var prop = keys[i];\r\n                                var text = props[prop].toLowerCase();\r\n                                if (item[prop].toString().toLowerCase().indexOf(text) !== -1) {\r\n                                    itemMatches = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n\r\n                            if (itemMatches) {\r\n                                out.push(item);\r\n                            }\r\n                        });\r\n                    } else {\r\n                        out = items;\r\n                    }\r\n                    return out;\r\n                };\r\n            })\r\n            .controller('listController', ['$scope', 'RestServices', 'notificationService', function ($scope, RestServices, notificationService) {\r\n                    $scope.initial = 0;\r\n                    $scope.page = 1;\r\n\r\n                    $scope.forward = function () {\r\n                        $scope.initial += 1;\r\n                        $scope.page += 1;\r\n                        $scope.listAutoresponse();\r\n                    };\r\n                    $scope.fastforward = function () {\r\n                        $scope.initial = ($scope.list.total_pages - 1);\r\n                        $scope.page = $scope.list.total_pages;\r\n                        $scope.listAutoresponse();\r\n                    };\r\n                    $scope.backward = function () {\r\n                        $scope.initial -= 1;\r\n                        $scope.page -= 1;\r\n                        $scope.listAutoresponse();\r\n                    };\r\n                    $scope.fastbackward = function () {\r\n                        $scope.initial = 0;\r\n                        $scope.page = 1;\r\n                        $scope.listAutoresponse();\r\n                    };\r\n\r\n                    $scope.listAutoresponse = function () {\r\n                        RestServices.getAllAutoresponder($scope.initial, $scope.filter).then(function (res) {\r\n                            $scope.list = res;\r\n                        });\r\n                    };\r\n\r\n                    $scope.listAutoresponse();\r\n\r\n//-----------------------------------------------\r\n//Filtros\r\n                    $scope.filtername = function () {\r\n                        RestServices.getAllAutoresponder($scope.initial, $scope.filter).then(function (res) {\r\n                            $scope.list = res;\r\n                        });\r\n                    };\r\n\r\n//-----------------------------------------------\r\n//Eliminar\r\n                    $scope.confirmDelete = function (id) {\r\n                        $scope.idAutoresponder = id;\r\n                        openModal();\r\n                    };\r\n\r\n                    $scope.deleteAutoresponder = function () {\r\n                        RestServices.delete($scope.idAutoresponder).then(function (res) {\r\n                            notificationService.warning(res.message);\r\n                            $scope.listAutoresponse();\r\n                        });\r\n                        closeModal();\r\n                    };\r\n\r\n                    $scope.translationDays = function (day) {\r\n                        switch (day) {\r\n                            case 'Monday':\r\n                                day = 'Lunes';\r\n                                break;\r\n                            case 'Tuesday':\r\n                                day = 'Martes';\r\n                                break;\r\n                            case 'Wednesday':\r\n                                day = 'Miercoles';\r\n                                break;\r\n                            case 'Thursday':\r\n                                day = 'Jueves';\r\n                                break;\r\n                            case 'Friday':\r\n                                day = 'Viernes';\r\n                                break;\r\n                            case 'Saturday':\r\n                                day = 'Sabado';\r\n                                break;\r\n                            case 'Sunday':\r\n                                day = 'Domingo';\r\n                                break;\r\n                        }\r\n                        return day;\r\n                    };\r\n\r\n                    $scope.translateClass = function (type) {\r\n                        switch (type) {\r\n                            case 'sms':\r\n                                type = 'Mensaje de Texto';\r\n                                break;\r\n                            case 'mail':\r\n                                type = 'Correo Electronico';\r\n                                break;\r\n                        }\r\n                        return type;\r\n                    }\r\n\r\n                    $scope.previewAutoresponder = function (idAutoresponder) {\r\n                        $('#modal-body-preview').empty();\r\n                        htmlPreviewAutores(idAutoresponder);\r\n                    };\r\n                }])\r\n            .controller('birthdayController', ['$scope', 'RestServices', 'notificationService', '$window', '$stateParams', function ($scope, RestServices, notificationService, $window, $stateParams) {\r\n                    $scope.data = {};\r\n                    $scope.data.status = true;\r\n                    $scope.boolEditors = true;\r\n                    $scope.insertoption = false;\r\n                    $scope.countContactList=\"\";\r\n                    $scope.addressees = [];\r\n                    $scope.addressees.selectdContactlis = [];\r\n                    $scope.addressees.count = 0;\r\n                    $scope.customfield = [];\r\n                    $scope.idcontactlist;\r\n                    $scope.aligncenter = false;\r\n                    $scope.negrita = false;\r\n                    $scope.alignleft = false;\r\n                    $scope.alignright = false;\r\n                    $scope.align=\"\";                \r\n                    $scope.letra=\"\";\r\n                    $scope.services = [];              \r\n                    $scope.nombreletra;\r\n                    $scope.disabled2 = true;\r\n                    $scope.disabled = true;\r\n                    $scope.disabled3 = true;\r\n                    $scope.optionadvance=0;\r\n                    \r\n                    $scope.mixedField = \"\";//almacena el nombre del campo personalizado dinamicamente\r\n                    $scope.idCPmixed = 0;//obtiene el id del campo personalizado al crearlo dinamicamente\r\n                    $scope.resCP = \"\";//guarda la respuesta de la creacion del campo (campos de la tabla)\r\n                    $scope.selectCF = [];//VALORES DE MULTISELECT EVITANDO AUTOSORT\r\n                    $scope.tabs = [];//ARREGLO DE TBS DINAMICOS\r\n                    $scope.textAlign = \"left\";//ALINEACION DE TEXTO\r\n                    $scope.infoLeft = \"\";//CSS BOTON LEFT\r\n                    $scope.infoCenter = \"\";//CSS BOTON CENTER\r\n                    $scope.infoRight = \"\";//CSS BOTON RIGHT\r\n                    var OLDselectCF = [];\r\n                    var idcustomfield = [];\r\n\r\n                    $scope.setAlign = function (prm) {\r\n                        \r\n                        if(prm == 2 && $scope.insertoption == true){\r\n                            if ($('#insertoption').prop('checked')) {\r\n                                $scope.insertoption = true;\r\n                                $scope.optionadvance=1;\r\n                                //si el switch esta en on , se pone el campo en requerido\r\n                                $(\"#services\").attr(\"required\", true);\r\n                                if($scope.addressees.selectdContactlis !== undefined) {\r\n                                    \r\n                                    $scope.countContactList = $scope.addressees.selectdContactlis.length ;\r\n                                    if ($scope.countContactList === 1) {\r\n                                        $('#hiddecontent').css('display','none');\r\n                                        $scope.idcontactlist = $scope.addressees.selectdContactlis[0].idContactlist;\r\n                                        RestServices.findcustomfields($scope.idcontactlist).then(function (data) {\r\n                                            $scope.customfield = data;\r\n                                        }).catch(function (error) {\r\n                                            notificationService.error(error.message);\r\n                                            $scope.insertoption = false;\r\n                                        });\r\n                                        \r\n                                    }else {\r\n                                        $('#hiddecontent').css({\"display\": \"none\"});\r\n                                        notificationService.error(\"Estimado usuario sólo puedes elegir una lista de contacto para esta opción avanzada\");                                        \r\n                                        $scope.insertoption = false;\r\n                                        $scope.optionadvance=0;\r\n                                    }\r\n                                } else {\r\n                                    notificationService.error(\"Estimado usuario debes elegir una lista de contacto\");\r\n                                    $('#hiddecontent').css({\"display\": \"none\"});\r\n                                    $scope.insertoption = false;\r\n                                    $scope.optionadvance=0;\r\n                                }\r\n                                \r\n    \r\n                            }else{\r\n                              $scope.insertoption = false;\r\n                              $('#insertoption').prop('checked', false); \r\n                              $('#hiddecontent').css({\"display\": \"block\"});  \r\n                            }    \r\n                        }else{                            \r\n                            if($('#advancedoptions').prop('checked') == false) {\r\n                                $scope.insertoption = false;\r\n                                 $('#insertoption').prop('checked', false); \r\n                            } \r\n                        }                        \r\n                        \r\n                        if(prm == 2 && $scope.insertoption == false){//OCULTA DE NUEVO EL PANEL DE OPCIONES AVANZADAS Y SETEA TODO EN VACIO\r\n                            $scope.num=\"\";\r\n                            $scope.num2=\"\";\r\n                            $scope.num3=\"\";\r\n                            $scope.disabled = true;\r\n                            $scope.disabled3 = true;\r\n                            $scope.disabled2 = true;\r\n                            $('#selectcolor').val(\"\");\r\n                            $('#result1').css({\"color\": \"black\"});\r\n                            $('#result2').css({\"color\": \"black\"});\r\n                            $('#result3').css({\"color\": \"black\"});\r\n                            $('#result1').css({\"font-size\": \"14px\"});\r\n                            $('#result2').css({\"font-size\": \"14px\"});\r\n                            $('#result3').css({\"font-size\": \"14px\"});\r\n                            $scope.optionadvance=0;                          \r\n                            $('#result3').val(\"\");\r\n                            $('#result2').val(\"\");\r\n                            $('#result1').val(\"\");\r\n                            $('#services').val();\r\n                            $('#services').val(\"\");\r\n                            $('#optionspan').val();\r\n                            $('#hiddecontent').css({\"display\": \"none\"});\r\n                            $scope.selectCF=[];\r\n                            $scope.selectCF.length =0;\r\n                            $scope.negrita=false;\r\n                            $('#negrita').removeClass('info-inverted'); \r\n                            $('.alinear').css({\"text-align\": \"left\"});                            \r\n                            $('#check4').prop('checked', false);\r\n                            $('#check3').prop('checked', false);\r\n                            $('#alignright').removeClass('info-inverted');\r\n                            $('#alignright').addClass('default-inverted');\r\n                            $('#aligncenter').removeClass('info-inverted');\r\n                            $('#aligncenter').addClass('default-inverted');\r\n                            $scope.aligncenter = false;\r\n                            $scope.alignright = false;\r\n                            $('#alignleft').addClass('info-inverted');\r\n                            $scope.aligncenter = false;\r\n                            $scope.alignright = false;\r\n                            $all_LI = $(\"span.spanLC\").find(\"ul\").find(\"li\");\r\n                            $all_LI.remove();\r\n                            $scope.tabs = [];\r\n                            OLDselectCF = [];\r\n                            idcustomfield = [];\r\n                            $scope.selectCF = [];        \r\n                        }\r\n                    };\r\n                    //FUNCION PARA EXTRAER POSICION DE ARRELO QUE CONTIENE UN OBJETO\r\n                    function findWithAttr(array, attr, value) {\r\n                        for(var i = 0; i < array.length; i += 1) {\r\n                            if(array[i][attr] === value) {\r\n                                return i;\r\n                            }\r\n                        }\r\n                        return -1;\r\n                    }\r\n                    //FUNCION PARA GUARDAR EL CAMPO PERSONALIZADO COMBINADO AUTOMATICAMENTE\r\n                    $scope.saveCP = function(name){\r\n                        var data = {\r\n                            id : $scope.idCPmixed,\r\n                            name : name,\r\n                            idContactList : $scope.idcontactlist\r\n                        };\r\n                        RestServices.addcustomfield(data).then(function (res) {\r\n                            $scope.idCPmixed = res.customfield.idCustomfield;\r\n                            $scope.resCP = res.customfield;\r\n                            //notificationService.success(res.message);\r\n                      }).catch(function (res) {\r\n                        $scope.btndisabled = false;\r\n                        notificationService.error(res.message);\r\n                      });\r\n                    };\r\n                                                          \r\n                    //Funcion escoger Campos personalizados (maximo 3)\r\n                    $scope.limitfields = function (num){//NUM ES 1 PARA CREACION Y 2 PARA EDICION, ESTO CON EL FIN DE CONTROLAR LA CREACION DE CFMIXED\r\n                        $scope.mixedField = \"\";\r\n                        var str = \"\", x = 0;\r\n                        \r\n                        if($scope.services){\r\n                            if($scope.services.length > 0){\r\n                                                   \r\n                                //VALIDAR EL NUMERO DE selectCF Y EL NUMERO DE TABS SI selectCF ES MENOR A TABS ELIMINAR EL TAB INDICADO SI NO AGREGAR\r\n                                if($scope.services.length < $scope.tabs.length){\r\n                                    \r\n                                    //BUSCAMOS LA DIFERENCIA ENTRE LOS CF SELECCINADOS Y LOS QUE ESTABAN ANTES\r\n                                    var difference = OLDselectCF.filter(z => !$scope.services.includes(z));\r\n                                    //EN CUSTOMFIELD (DATA DE SQL) BUSCAMOS EL NOMBRE SEGUN EL ID DEL CF Y LO ELIMINAMOS DE LOS TABS\r\n                                    var searchCustomfield = findWithAttr(idcustomfield,'idcustomfield',difference[0]);\r\n                                    $scope.tabs.splice(searchCustomfield, 1);\r\n                                    //TAMBIEN ELIMINAMOS LA POSICION DEL ARREGLO CON LOS CF\r\n                                    $scope.selectCF.splice(searchCustomfield, 1);\r\n                                    \r\n                                    //ACTUALIZAMOS LA VARIABLE VIEJA CON LA NUEVA INFO SELECCIONADA\r\n                                    OLDselectCF = $scope.services;\r\n                                    \r\n                                    //RECORREMOS LOS TABS PARA ACTUALIZAR CFMIXED\r\n                                    for(var i=0; i<$scope.tabs.length; i++){\r\n                                        str += $scope.tabs[i].nameService+\".\";\r\n                                    }\r\n                                    \r\n                                    //ENVIAMOS LAS VARIABLES DE CFMIXED\r\n                                    var concat = str.substring(0, str.length-1);\r\n                                    $scope.mixedField = \"%%\"+concat.toUpperCase()+\"%%\";\r\n                                    \r\n                                }else{\r\n                                    //AGREGAR EL ULTIMO SELECCIONADO PARA QUE EL SORT AUTOMATICO DEL MULTISELECT NO AFECTE EL ORDEN\r\n                                    var diff = $scope.services.filter(i => !$scope.selectCF.includes(i));\r\n                                    if(diff[0]){\r\n                                       $scope.selectCF.push(diff[0]); \r\n                                    }\r\n                                    idcustomfield = [];\r\n                                    //BUSCAMOS EN EL ARRELO CUSTOMFIELD EL ALTERNATIVE NAME SEGUN EL SELECCIONADO, AGREGAMOS EL NOMBRE EN CFMIXED\r\n                                    for(var i=0; i<$scope.selectCF.length; i++){\r\n                                        //VALIDAMOS LOS CAMPOS POR DEFECTOS QUE CONTIENEN LOS CONTACTOS\r\n                                        if($scope.selectCF[i] == 0){\r\n                                            str += \"NOMBRE\"+\".\";\r\n                                            idcustomfield.push({idcustomfield : \"0\"});\r\n                                        }else if($scope.selectCF[i] == 1){\r\n                                            str += \"APELLIDO\"+\".\";\r\n                                            idcustomfield.push({idcustomfield : \"1\"});\r\n                                        }else if($scope.selectCF[i] == 2){\r\n                                            str += \"FECHA_NACIMIENTO\"+\".\";\r\n                                            idcustomfield.push({idcustomfield : \"2\"});\r\n                                        }else{\r\n                                            x = findWithAttr($scope.customfield,'idCustomfield',$scope.selectCF[i]);\r\n                                            str += $scope.customfield[x].alternativename+\".\";\r\n                                            idcustomfield.push({idcustomfield : $scope.customfield[x].idCustomfield});\r\n                                        }\r\n                                        \r\n                                    }\r\n                                    \r\n                                    //BUSCAMOS LA DIFERENCIA ENTRE LA SELECCION VIEJA Y LA NUEVA \r\n                                    var difference = $scope.selectCF.filter(z => !OLDselectCF.includes(z));\r\n                                    \r\n                                    if(difference[0]){\r\n                                       //EN CUSTOMFIELD (DATA DE SQL) BUSCAMOS EL NOMBRE SEGUN EL ID DEL CF Y LO ENVIAMOS A LOS TABS\r\n                                        var searchCustomfield = findWithAttr($scope.customfield,'idCustomfield',difference[0]);\r\n                                        $scope.tabs.push({idcustomfield : diff[0], nameService:$scope.customfield[searchCustomfield].name, disabled: false});\r\n                                    }\r\n                                        \r\n                                    \r\n                                    //ACTUALIZAMOS LA VARIABLE VIEJA CON LA NUEVA INFO SELECCIONADA\r\n                                    OLDselectCF.push(diff[0]);\r\n                                    \r\n                                    //ENVIAMOS LAS VARIABLES DE CFMIXED\r\n                                    var concat = str.substring(0, str.length-1);\r\n                                    $scope.mixedField = \"%%\"+concat.toUpperCase()+\"%%\";\r\n                                }\r\n                                if(num == 1){\r\n                                    $scope.saveCP($scope.mixedField);\r\n                                }\r\n                            }else{\r\n                                //SI ENTRA AQUI ES PORQUE NO HAY NINGUN CF SELECCIONADO EN EL ELEMENTO SELECT ENTONCES VACIAMOS LAS VARIABLES DINAMICAS\r\n                                $scope.tabs = [];\r\n                                OLDselectCF = [];\r\n                                idcustomfield = [];\r\n                                $scope.selectCF = [];\r\n                            }\r\n                        }else{\r\n                            //SI ENTRA AQUI ES PORQUE NO HAY NINGUN CF SELECCIONADO EN EL ELEMENTO SELECT ENTONCES VACIAMOS LAS VARIABLES DINAMICAS\r\n                            $scope.tabs = [];\r\n                            OLDselectCF = [];\r\n                            idcustomfield = [];\r\n                            $scope.selectCF = [];\r\n                        }\r\n                         \r\n                    };\r\n                    \r\n                    //CAMBIAR TAMAÑO DE LA LETRA RECIBIENDO EL INDICE Y ATRIBUTOS DE INPUT EN ARREGLO DE TABS\r\n                    $scope.changeSize = function (index, value) {\r\n                        $scope.tabs[index].fontSize = value.selectedOption;\r\n                    };\r\n\r\n                    //CAMBIAR COLOR DE LA LETRA RECIBIENDO EL INDICE Y ATRIBUTOS DE INPUT EN ARREGLO DE TABS\r\n                    $scope.changeColor = function (index, value) {  \r\n                        $scope.tabs[index].color = value.selectColor;                \r\n                    };\r\n                                        \r\n                    //CAMBIAR ESTILO DE LA LETRA RECIBIENDO EL INDICE Y ATRIBUTOS DE INPUT EN ARREGLO DE TABS\r\n                    $scope.changeStyle = function (index, value) {                    \r\n\r\n                        if(value.bold){\r\n                            $scope.tabs[index].fontWeight = \"bold\";\r\n                            $scope.tabs[index].boldClass = \"info-inverted\";\r\n                        }else{\r\n                            $scope.tabs[index].fontWeight = \"\";\r\n                            $scope.tabs[index].boldClass = \"\";\r\n                        }\r\n                        \r\n                        if(value.italics){\r\n                            $scope.tabs[index].fontStyle = \"italic\";\r\n                            $scope.tabs[index].italicsClass = \"info-inverted\";\r\n                        }else{\r\n                            $scope.tabs[index].fontStyle = \"\";\r\n                            $scope.tabs[index].italicsClass = \"\";\r\n                        }\r\n                        \r\n                        if(value.underlined){\r\n                            $scope.tabs[index].textDecoration = \"underline\";\r\n                            $scope.tabs[index].underlinedClass = \"info-inverted\";\r\n                        }else{\r\n                            $scope.tabs[index].textDecoration = \"\";\r\n                            $scope.tabs[index].underlinedClass = \"\";\r\n                        }             \r\n                        \r\n                    };\r\n                    \r\n                    //CAMBIAR FUENTE DE LA LETRA RECIBIENDO EL INDICE Y ATRIBUTOS DE INPUT EN ARREGLO DE TABS\r\n                    $scope.changeFont = function (index, value){\r\n                        $scope.tabs[index].fontFamily = value.fontFamily; \r\n                    };\r\n                    \r\n                    //CAMBIAR ALINEACION DE LA LETRA RECIBIENDO EL INDICE Y ATRIBUTOS DE INPUT EN ARREGLO DE TABS\r\n                    $scope.alignText =  function (value){\r\n                        \r\n                        if(value.left){\r\n                            $scope.textAlign = \"left\";\r\n                            $scope.infoLeft = \"info-inverted\";\r\n                        }else if(value.center){\r\n                            $scope.textAlign = \"center\";\r\n                            $scope.infoCenter = \"info-inverted\";\r\n                        }else if(value.right){\r\n                            $scope.textAlign = \"right\";\r\n                            $scope.infoRight = \"info-inverted\";\r\n                        }else{\r\n                            $scope.textAlign = \"\";\r\n                            $scope.infoLeft = \"\";\r\n                            $scope.infoCenter = \"\";\r\n                            $scope.infoRight = \"\";\r\n                        }\r\n                        \r\n                    };\r\n                    $scope.serviceSelected = [];          \r\n                    if ($stateParams.id) {\r\n                        RestServices.getAutoresponder($stateParams.id).then(function (res) {\r\n                            $scope.data = res.autoresponder;\r\n                            $(\"#valueDatepicker\").val(res.autoresponder.time);\r\n                            $scope.data.senderNameSelect = res.autoresponder.idNameSender;\r\n                            $scope.data.senderMailSelect = res.autoresponder.idEmailsender;\r\n                            $scope.data.status = (res.autoresponder.status == 1);\r\n                            if (res.autoresponder.target) {\r\n                                $scope.addressees.showstep1 = false;\r\n                                var json = jQuery.parseJSON(res.autoresponder.target);\r\n                                $scope.addressees.count = res.autoresponder.quantitytarget;\r\n                                $scope.addressees.condition = json.condition;\r\n                                $scope.filters = json.filters;\r\n                                if (json.type == \"contactlist\") {\r\n                                    $scope.addressees.showContactlist = false;\r\n                                    $scope.addressees.selectdContactlis = json.contactlists;\r\n                                    $scope.getAllContactlist();\r\n\r\n                                } else if (json.type == \"segment\") {\r\n                                    $scope.addressees.showSegment = false;\r\n                                    $scope.addressees.selectdSegment = json.segment;\r\n                                    $scope.getAllSegment();\r\n                                }\r\n                            }\r\n\r\n                            //RECUPERAMOS LA INFORMACION DE OPTIONADVANCE\r\n                            if(res.autoresponder.optionAdvance == 1){\r\n                                $scope.optionadvance = res.autoresponder.optionAdvance;\r\n                                $scope.advancedoptions = true;\r\n                                $scope.insertoption = true;\r\n                                $('#advancedoptions').prop('checked', true);\r\n                                $('#insertoption').prop('checked', true);\r\n                                $scope.setAlign(2);\r\n                            }\r\n                            \r\n                            //RECUPERAMOS LA INFORMACION DE CUSTOMFIELDS Y LA RECORREMOS\r\n                            if(res.autoresponder.customFields){                            \r\n                                var obj= JSON.parse(res.autoresponder.customFields);\r\n\r\n                                Object.keys(obj).forEach(function (key) {\r\n                                    var value = obj[key];\r\n                                    var indiceCF =0;\r\n                                    \r\n                                    if(key == \"customFields\"){\r\n                                        var valueArrCF = value;\r\n                                        RestServices.findcustomfields($scope.idcontactlist).then(function (data) {\r\n                                            $scope.customfield = data;\r\n                                            for (var x=Object.keys(valueArrCF),i=0;i<x.length,keyCF=x[i],valueCF=valueArrCF[keyCF];i++){\r\n                                                \r\n                                                $scope.services.push(keyCF);\r\n                                                $scope.limitfields(2);\r\n                                                //INSERTAMOS LOS VALORES DE TABS DESPUES DE CREAR LA POSICION EN LA FUNCION limitfields\r\n                                                $scope.tabs[i].idcustomfield = keyCF;\r\n                                                $scope.tabs[i].fontSize = valueCF.fontSize;\r\n                                                $scope.tabs[i].color = valueCF.color;\r\n                                                $scope.tabs[i].fontWeight = valueCF.fontWeight;\r\n                                                $scope.tabs[i].fontStyle = valueCF.fontStyle;\r\n                                                $scope.tabs[i].textDecoration = valueCF.textDecoration;\r\n                                                $scope.tabs[i].fontFamily = valueCF.fontFamily;\r\n\r\n                                            }\r\n                                            \r\n                                            $(\"#services\").val($scope.services).trigger(\"change.select2\");\r\n                                                                            \r\n                                        }).catch(function (error) {\r\n                                            notificationService.error(error.message);\r\n                                            $scope.insertoption = false;\r\n                                        });\r\n                                        \r\n                                    }\r\n                                    \r\n                                    if(key == \"idCFmixed\"){\r\n                                        $scope.idCPmixed = value;\r\n                                    }\r\n                                    \r\n                                    if(key == \"textAlign\"){\r\n                                        \r\n                                        $scope.textAlign = value;\r\n\r\n                                        if(value == \"left\"){\r\n                                            $scope.textAlign = \"left\";\r\n                                            $scope.infoLeft = \"info-inverted\";\r\n                                        }else if(value == \"center\"){\r\n                                            $scope.textAlign = \"center\";\r\n                                            $scope.infoCenter = \"info-inverted\";\r\n                                        }else if(value == \"right\"){\r\n                                            $scope.textAlign = \"right\";\r\n                                            $scope.infoRight = \"info-inverted\";\r\n                                        }\r\n                                        \r\n                                    }\r\n                                    \r\n                                });\r\n                                \r\n                            }\r\n\r\n                            if (!res.autoresponder.autorespondercontent) {\r\n                                $scope.boolEditors = true;\r\n                            } else {\r\n                                $scope.boolEditors = false;\r\n                                htmlPreview($stateParams.id);\r\n                                $scope.getUrl = res.autoresponder.autorespondercontent.url;\r\n                            }\r\n                            \r\n                        });\r\n                    }\r\n\r\n\r\n                    $scope.addressees = {selectdContactlis: []};\r\n                    $scope.addressees = {selectdSegment: []};\r\n                    $scope.addressees.showSegment = true;\r\n                    $scope.addressees.showstep1 = true;\r\n                    $scope.addressees.showContactlist = true;\r\n\r\n\r\n                    $('#dateInitial').datetimepicker({\r\n                        format: 'hh:mm',\r\n                        language: 'es'\r\n                    }).on('changeDate', function (ev) {\r\n                        $scope.$apply();\r\n                    });\r\n                    \r\n                    $scope.saveAutoresponder = function () {/*************************************************************************/\r\n                        \r\n                        //VALIDAMOS QUE SE HAYA ELEGIDO UNA PLANTILLA ANTES DE GUARDAR LA AUTORESPUESTA\r\n                        if($scope.boolEditors == true){\r\n                            notificationService.error(\"Por favor seleccione una plantilla.\");\r\n                            return;\r\n                        }\r\n                        \r\n                        var template = $('#frame').contents().find('body').html();\r\n                        var patt = new RegExp($scope.mixedField);\r\n                        var searchSTR = patt.test(template);\r\n                        if(!searchSTR){\r\n                            notificationService.error(\"Por favor ingresa el nombre del campo personalizado en la plantilla.\");\r\n                            return;\r\n                        }\r\n                        \r\n                         \r\n                        if($scope.optionadvance != 0 ){\r\n                            \r\n                            if($scope.services.length >= 2){\r\n                                \r\n                                $scope.data.optionAdvance = $scope.optionadvance;\r\n                                \r\n                                if(!$scope.data.customFields){//ENTRA CUANDO ESTA CREANDO\r\n                                    $scope.data.customFields = [];\r\n                                }else{//ENTRA CUANDO ESTA EDITANDO\r\n                                    $scope.data.customFields = [];\r\n                                }\r\n                                \r\n                                //RECORREMOS EL ARREGLO DE TABS PARA EXTRAER LA INFO NECESARIA PARA EL JSON\r\n                                for(var i=0; i < $scope.tabs.length; i++){\r\n    \r\n                                    //SI EL TAMAÑO DE FUENTE NO FUE SELECCIONADO PONEMOS POR DEFECTO 12\r\n                                    if(!$scope.tabs[i].fontSize){\r\n                                        $scope.tabs[i].fontSize = \"12\";\r\n                                    }\r\n                                    //SI EL COLOR NO FUE SELECCIONADO PONEMOS POR DEFECTO NEGRO\r\n                                    if(!$scope.tabs[i].color){\r\n                                        $scope.tabs[i].color = \"#000000\";\r\n                                    }\r\n                                    //SI NEGRITA NO FUE SELECCIONADO PONEMOS POR DEFECTO UNSET\r\n                                    if(!$scope.tabs[i].fontWeight){\r\n                                        $scope.tabs[i].fontWeight = \"unset\";\r\n                                    }\r\n                                    //SI CURSIVA NO FUE SELECCIONADO PONEMOS POR DEFECTO UNSET\r\n                                    if(!$scope.tabs[i].fontStyle){\r\n                                        $scope.tabs[i].fontStyle = \"unset\";\r\n                                    }\r\n                                    //SI SUBRAYADO NO FUE SELECCIONADO PONEMOS POR DEFECTO NONE\r\n                                    if(!$scope.tabs[i].textDecoration){\r\n                                        $scope.tabs[i].textDecoration = \"none\";\r\n                                    }\r\n                                    //SI TIPO DE LETRA NO FUE SELECCIONADO PONEMOS POR DEFECTO INHERIT\r\n                                    if(!$scope.tabs[i].fontFamily){\r\n                                        $scope.tabs[i].fontFamily = \"inherit\";\r\n                                    }\r\n                                    //$scope.tabs[i].idcustomfield\r\n                                    $scope.data.customFields.push({\r\n                                            \r\n                                            idCF : $scope.tabs[i].idcustomfield,\r\n                                            fontSize: $scope.tabs[i].fontSize, \r\n                                            color: $scope.tabs[i].color, \r\n                                            fontWeight: $scope.tabs[i].fontWeight, \r\n                                            fontStyle: $scope.tabs[i].fontStyle,\r\n                                            textDecoration: $scope.tabs[i].textDecoration,\r\n                                            fontFamily: $scope.tabs[i].fontFamily\r\n                                            \r\n                                    });\r\n                                }\r\n                                $scope.data.textAlign = $scope.textAlign;\r\n                                                                \r\n                                if(!$scope.resCP && $scope.idCPmixed == 0){\r\n                                    $scope.data.idCFmix = \"\";\r\n                                }\r\n                                if(!$scope.resCP && $scope.idCPmixed != 0){\r\n                                    $scope.data.idCFmix = $scope.idCPmixed;\r\n                                }else{\r\n                                    $scope.data.idCFmix = $scope.resCP.idCustomfield;\r\n                                }   \r\n                            }else{\r\n                                notificationService.error(\"Para crear autrespuesta con opciones avanzadas debe seleccionar al menos 2 campos personalizados.\");\r\n                                return;\r\n                            }\r\n                            \r\n                        }else{\r\n                            $scope.data.customFields = null;\r\n                        }\r\n                        \r\n                         \r\n                        $scope.data.addressees = $scope.addressees; \r\n                        $scope.data.time = $(\"#valueDatepicker\").val();\r\n                        $scope.data.filters = $scope.filters;\r\n                        $scope.data.condition = $scope.addressees.condition;\r\n                        var idAutoresponder = $stateParams.id ? $stateParams.id : 0;\r\n\r\n                        RestServices.createAutoresponder($scope.data, idAutoresponder).then(function (res) {\r\n                            notificationService.success(res['message']);\r\n                            $window.location.href = fullUrlBase + templateBase + \"#/\";\r\n                        }).catch(function (error) {\r\n                            notificationService.error(error.message);\r\n                            return;\r\n                        });\r\n                    };\r\n\r\n                    $scope.clearSelect = function () {\r\n                        $scope.filters = [];\r\n                        $scope.addressees.count = 0;\r\n                        $scope.disabledContactlist = false;\r\n                        $scope.disabledSegment = false;\r\n                        $scope.addressees.selectdContactlis = \"\";\r\n                        $scope.addressees.selectdSegment = \"\";\r\n                        $scope.insertoption=false;\r\n                    };\r\n                    $scope.getContactlist = function () {\r\n                        $scope.addressees = {selectdSegment: []};\r\n                        $scope.segments = [];\r\n                        $scope.filters = [];\r\n                        $scope.contactlists = [];\r\n                        $scope.addressees.showstep1 = false;\r\n                        $scope.addressees.count = 0;\r\n                        $scope.addressees.showSegment = true;\r\n                        $scope.addressees.showContactlist = false;\r\n                        $scope.prueba = undefined;  \r\n                        $scope.getAllContactlist();\r\n                        $scope.getAllSegment();\r\n                    };\r\n                    $scope.getAllContactlist = function () {\r\n                        RestServices.getContactlist().then(function (data) {\r\n                            $scope.contactlists = data;\r\n                        });\r\n                    };\r\n                    $scope.getSegment = function () {\r\n                        $scope.addressees = {selectdContactlis: []};\r\n                        $scope.segments = [];\r\n                        $scope.contactlists = [];\r\n                        $scope.filters = [];\r\n                        $scope.addressees.showstep1 = false;\r\n                        $scope.addressees.count = 0;\r\n                        $scope.prueba = undefined;\r\n                        $scope.prueba2 = undefined;\r\n                        $scope.addressees.selectdContactlis = [];\r\n                        $scope.addressees.selectdSegment = [];\r\n                        $scope.addressees.showSegment = false;\r\n                        $scope.addressees.showContactlist = true;\r\n                        $scope.getAllSegment();\r\n                        $scope.getAllContactlist();\r\n                    };\r\n\r\n                    $scope.getAllSegment = function () {\r\n                        RestServices.getSegment().then(function (data) {\r\n                            $scope.segments = data;\r\n                        });\r\n                    };\r\n\r\n                    $scope.selectAction = function () {\r\n                        $scope.countContacts(\"contactlist\");\r\n                    };\r\n\r\n                    $scope.selectActionSegment = function () {\r\n                        $scope.countContacts(\"segment\");\r\n                    };\r\n\r\n                    $scope.allSegment = function () {\r\n                        $scope.disabledSegment = true;\r\n                        $scope.addressees.selectdSegment = $scope.segments;\r\n                        $scope.countContacts(\"segment\");\r\n                    };\r\n\r\n                    $scope.allContactlist = function () {\r\n                        $scope.disabledContactlist = true;\r\n                        $scope.addressees.selectdContactlis = $scope.contactlists;\r\n                        $scope.countContacts(\"contactlist\");\r\n                    };\r\n\r\n                    $scope.countContacts = function (type) {\r\n                        $scope.addressees.count = 0;\r\n                        var data = {\r\n                            type: type,\r\n                            segment: $scope.addressees.selectdSegment,\r\n                            contactlist: $scope.addressees.selectdContactlis,\r\n                            filters: $scope.filters,\r\n                            condition: $scope.addressees.condition,\r\n                            idMail: $scope.idMail\r\n                        };\r\n                        RestServices.countContact(data).then(function (data) {\r\n                            $scope.addressees.count = data;\r\n                        });\r\n                    };\r\n\r\n                    function getemailname() {\r\n                        RestServices.getemailname().then(function (res) {\r\n                            $scope.emailname = res;\r\n                        });\r\n                    }\r\n\r\n                    function getemailsend() {\r\n                        RestServices.getemailsend().then(function (res) {\r\n                            $scope.emailsend = res;\r\n                        });\r\n                    }\r\n\r\n                    getemailname();\r\n                    getemailsend();\r\n\r\n                    $scope.showInputName = false;\r\n                    $scope.showSelectName = true;\r\n                    $scope.showIconsName = true;\r\n                    $scope.showIconsSaveName = false;\r\n\r\n                    $scope.changeStatusInputName = function () {\r\n                        if (!$scope.showInputName) {\r\n                            $scope.showInputName = true;\r\n                            $scope.showSelectName = false;\r\n                            $scope.showIconsName = false;\r\n                            $scope.showIconsSaveName = true;\r\n                        } else {\r\n                            $scope.showInputName = false;\r\n                            $scope.showSelectName = true;\r\n                            $scope.showIconsName = true;\r\n                            $scope.showIconsSaveName = false;\r\n                        }\r\n                    };\r\n\r\n                    $scope.showInputEmail = false;\r\n                    $scope.showSelectEmail = true;\r\n                    $scope.showIconsEmail = true;\r\n                    $scope.showIconsSaveEmail = false;\r\n\r\n                    $scope.changeStatusInputEmail = function () {\r\n                        if (!$scope.showInputEmail) {\r\n                            $scope.showInputEmail = true;\r\n                            $scope.showSelectEmail = false;\r\n                            $scope.showIconsEmail = false;\r\n                            $scope.showIconsSaveEmail = true;\r\n                        } else {\r\n                            $scope.showInputEmail = false;\r\n                            $scope.showSelectEmail = true;\r\n                            $scope.showIconsEmail = true;\r\n                            $scope.showIconsSaveEmail = false;\r\n                        }\r\n                    };\r\n\r\n                    $scope.saveName = function () {\r\n                        var data = {name: $scope.senderName};\r\n\r\n                        RestServices.addEmailName(data).then(function (res) {\r\n                            notificationService.success(res['msg']);\r\n                            $scope.senderName = \"\";\r\n                            getemailname();\r\n                            $scope.changeStatusInputName();\r\n                            $scope.data.senderNameSelect = res['idNameSender'];\r\n                        });\r\n                    };\r\n\r\n                    $scope.saveEmail = function () {\r\n                        var data = {email: $scope.senderMail};\r\n\r\n                        RestServices.addEmailSender(data).then(function (res) {\r\n                            notificationService.success(res['msg']);\r\n                            $scope.senderMail = \"\";\r\n                            getemailsend();\r\n                            $scope.changeStatusInputEmail();\r\n                            $scope.data.senderMailSelect = res['idEmailsender'];\r\n                        });\r\n                    };\r\n\r\n                    $scope.openMailTemplate = function () {\r\n                        \r\n                        if($scope.optionadvance != 0 ){\r\n                            \r\n                            if($scope.services.length >= 2){\r\n                                \r\n                                $scope.data.optionAdvance = $scope.optionadvance;\r\n                                \r\n                                if(!$scope.data.customFields){//ENTRA CUANDO ESTA CREANDO\r\n                                    $scope.data.customFields = [];\r\n                                }else{//ENTRA CUANDO ESTA EDITANDO\r\n                                    $scope.data.customFields = [];\r\n                                }\r\n                                \r\n                                //RECORREMOS EL ARREGLO DE TABS PARA EXTRAER LA INFO NECESARIA PARA EL JSON\r\n                                for(var i=0; i < $scope.tabs.length; i++){\r\n                        \r\n                                    //SI EL TAMAÑO DE FUENTE NO FUE SELECCIONADO PONEMOS POR DEFECTO 12\r\n                                    if(!$scope.tabs[i].fontSize){\r\n                                        $scope.tabs[i].fontSize = \"12\";\r\n                                    }\r\n                                    //SI EL COLOR NO FUE SELECCIONADO PONEMOS POR DEFECTO NEGRO\r\n                                    if(!$scope.tabs[i].color){\r\n                                        $scope.tabs[i].color = \"#000000\";\r\n                                    }\r\n                                    //SI NEGRITA NO FUE SELECCIONADO PONEMOS POR DEFECTO UNSET\r\n                                    if(!$scope.tabs[i].fontWeight){\r\n                                        $scope.tabs[i].fontWeight = \"unset\";\r\n                                    }\r\n                                    //SI CURSIVA NO FUE SELECCIONADO PONEMOS POR DEFECTO UNSET\r\n                                    if(!$scope.tabs[i].fontStyle){\r\n                                        $scope.tabs[i].fontStyle = \"unset\";\r\n                                    }\r\n                                    //SI SUBRAYADO NO FUE SELECCIONADO PONEMOS POR DEFECTO NONE\r\n                                    if(!$scope.tabs[i].textDecoration){\r\n                                        $scope.tabs[i].textDecoration = \"none\";\r\n                                    }\r\n                                    //SI TIPO DE LETRA NO FUE SELECCIONADO PONEMOS POR DEFECTO INHERIT\r\n                                    if(!$scope.tabs[i].fontFamily){\r\n                                        $scope.tabs[i].fontFamily = \"inherit\";\r\n                                    }\r\n                                    //$scope.tabs[i].idcustomfield\r\n                                    $scope.data.customFields.push({\r\n                                            \r\n                                            idCF : $scope.tabs[i].idcustomfield,\r\n                                            fontSize: $scope.tabs[i].fontSize, \r\n                                            color: $scope.tabs[i].color, \r\n                                            fontWeight: $scope.tabs[i].fontWeight, \r\n                                            fontStyle: $scope.tabs[i].fontStyle,\r\n                                            textDecoration: $scope.tabs[i].textDecoration,\r\n                                            fontFamily: $scope.tabs[i].fontFamily\r\n                                            \r\n                                    });\r\n                                }\r\n                                $scope.data.textAlign = $scope.textAlign;\r\n                                if(!$scope.resCP && $scope.idCPmixed == 0){\r\n                                    $scope.data.idCFmix = \"\";\r\n                                }\r\n                                if(!$scope.resCP && $scope.idCPmixed != 0){\r\n                                    $scope.data.idCFmix = $scope.idCPmixed;\r\n                                }else{\r\n                                    $scope.data.idCFmix = $scope.resCP.idCustomfield;\r\n                                }  \r\n                            }else{\r\n                                notificationService.error(\"Para crear autrespuesta con opciones avanzadas debe seleccionar al menos 2 campos personalizados.\");\r\n                                return;\r\n                            }\r\n                            \r\n                        }else{\r\n                            $scope.data.customFields = null;\r\n                        }\r\n                        \r\n                        $scope.data.addressees = $scope.addressees;\r\n                        $scope.data.filters = $scope.filters;\r\n                        $scope.data.condition = $scope.addressees.condition;\r\n                        $scope.data.time = $(\"#valueDatepicker\").val();\r\n                        var idAutoresponder = $stateParams.id ? $stateParams.id : 0;\r\n\r\n                        RestServices.createAutoresponder($scope.data, idAutoresponder).then(function (res) {\r\n                            $window.location.href = fullUrlBase + 'mailtemplate#/selectautoresponder/' + res.autoresponder.idAutoresponder;\r\n                        });\r\n                    };\r\n\r\n                    $scope.openContentEditor = function () {\r\n                        \r\n                        if($scope.optionadvance != 0 ){\r\n                            \r\n                            if($scope.services.length >= 2){\r\n                                \r\n                                $scope.data.optionAdvance = $scope.optionadvance;\r\n                                \r\n                                if(!$scope.data.customFields){//ENTRA CUANDO ESTA CREANDO\r\n                                    $scope.data.customFields = [];\r\n                                }else{//ENTRA CUANDO ESTA EDITANDO\r\n                                    $scope.data.customFields = [];\r\n                                }\r\n                                \r\n                                //RECORREMOS EL ARREGLO DE TABS PARA EXTRAER LA INFO NECESARIA PARA EL JSON\r\n                                for(var i=0; i < $scope.tabs.length; i++){\r\n                        \r\n                                    //SI EL TAMAÑO DE FUENTE NO FUE SELECCIONADO PONEMOS POR DEFECTO 12\r\n                                    if(!$scope.tabs[i].fontSize){\r\n                                        $scope.tabs[i].fontSize = \"12\";\r\n                                    }\r\n                                    //SI EL COLOR NO FUE SELECCIONADO PONEMOS POR DEFECTO NEGRO\r\n                                    if(!$scope.tabs[i].color){\r\n                                        $scope.tabs[i].color = \"#000000\";\r\n                                    }\r\n                                    //SI NEGRITA NO FUE SELECCIONADO PONEMOS POR DEFECTO UNSET\r\n                                    if(!$scope.tabs[i].fontWeight){\r\n                                        $scope.tabs[i].fontWeight = \"unset\";\r\n                                    }\r\n                                    //SI CURSIVA NO FUE SELECCIONADO PONEMOS POR DEFECTO UNSET\r\n                                    if(!$scope.tabs[i].fontStyle){\r\n                                        $scope.tabs[i].fontStyle = \"unset\";\r\n                                    }\r\n                                    //SI SUBRAYADO NO FUE SELECCIONADO PONEMOS POR DEFECTO NONE\r\n                                    if(!$scope.tabs[i].textDecoration){\r\n                                        $scope.tabs[i].textDecoration = \"none\";\r\n                                    }\r\n                                    //SI TIPO DE LETRA NO FUE SELECCIONADO PONEMOS POR DEFECTO INHERIT\r\n                                    if(!$scope.tabs[i].fontFamily){\r\n                                        $scope.tabs[i].fontFamily = \"inherit\";\r\n                                    }\r\n                                    //$scope.tabs[i].idcustomfield\r\n                                    $scope.data.customFields.push({\r\n                                            \r\n                                            idCF : $scope.tabs[i].idcustomfield,\r\n                                            fontSize: $scope.tabs[i].fontSize, \r\n                                            color: $scope.tabs[i].color, \r\n                                            fontWeight: $scope.tabs[i].fontWeight, \r\n                                            fontStyle: $scope.tabs[i].fontStyle,\r\n                                            textDecoration: $scope.tabs[i].textDecoration,\r\n                                            fontFamily: $scope.tabs[i].fontFamily\r\n                                            \r\n                                    });\r\n                                }\r\n                                $scope.data.textAlign = $scope.textAlign;\r\n                                if(!$scope.resCP && $scope.idCPmixed == 0){\r\n                                    $scope.data.idCFmix = \"\";\r\n                                }\r\n                                if(!$scope.resCP && $scope.idCPmixed != 0){\r\n                                    $scope.data.idCFmix = $scope.idCPmixed;\r\n                                }else{\r\n                                    $scope.data.idCFmix = $scope.resCP.idCustomfield;\r\n                                }   \r\n                            }else{\r\n                                notificationService.error(\"Para crear autrespuesta con opciones avanzadas debe seleccionar al menos 2 campos personalizados.\");\r\n                                return;\r\n                            }\r\n                            \r\n                        }else{\r\n                            $scope.data.customFields = null;\r\n                        }\r\n                        \r\n                        $scope.data.addressees = $scope.addressees;\r\n                        $scope.data.filters = $scope.filters;\r\n                        $scope.data.condition = $scope.addressees.condition;\r\n                        $scope.data.time = $(\"#valueDatepicker\").val();\r\n                        var idAutoresponder = $stateParams.id ? $stateParams.id : 0;\r\n\r\n                        RestServices.createAutoresponder($scope.data, idAutoresponder).then(function (res) {\r\n                            $window.location.href = fullUrlBase + templateBase + '/contenteditor/' + res.autoresponder.idAutoresponder;\r\n                        });\r\n                    };\r\n\r\n                    $scope.openEditorHtml = function () {\r\n                        \r\n                        if($scope.optionadvance != 0 ){\r\n                            \r\n                            if($scope.services.length >= 2){\r\n                                \r\n                                $scope.data.optionAdvance = $scope.optionadvance;\r\n                                \r\n                                if(!$scope.data.customFields){//ENTRA CUANDO ESTA CREANDO\r\n                                    $scope.data.customFields = [];\r\n                                }else{//ENTRA CUANDO ESTA EDITANDO\r\n                                    $scope.data.customFields = [];\r\n                                }\r\n                                \r\n                                //RECORREMOS EL ARREGLO DE TABS PARA EXTRAER LA INFO NECESARIA PARA EL JSON\r\n                                for(var i=0; i < $scope.tabs.length; i++){\r\n                        \r\n                                    //SI EL TAMAÑO DE FUENTE NO FUE SELECCIONADO PONEMOS POR DEFECTO 12\r\n                                    if(!$scope.tabs[i].fontSize){\r\n                                        $scope.tabs[i].fontSize = \"12\";\r\n                                    }\r\n                                    //SI EL COLOR NO FUE SELECCIONADO PONEMOS POR DEFECTO NEGRO\r\n                                    if(!$scope.tabs[i].color){\r\n                                        $scope.tabs[i].color = \"#000000\";\r\n                                    }\r\n                                    //SI NEGRITA NO FUE SELECCIONADO PONEMOS POR DEFECTO UNSET\r\n                                    if(!$scope.tabs[i].fontWeight){\r\n                                        $scope.tabs[i].fontWeight = \"unset\";\r\n                                    }\r\n                                    //SI CURSIVA NO FUE SELECCIONADO PONEMOS POR DEFECTO UNSET\r\n                                    if(!$scope.tabs[i].fontStyle){\r\n                                        $scope.tabs[i].fontStyle = \"unset\";\r\n                                    }\r\n                                    //SI SUBRAYADO NO FUE SELECCIONADO PONEMOS POR DEFECTO NONE\r\n                                    if(!$scope.tabs[i].textDecoration){\r\n                                        $scope.tabs[i].textDecoration = \"none\";\r\n                                    }\r\n                                    //SI TIPO DE LETRA NO FUE SELECCIONADO PONEMOS POR DEFECTO INHERIT\r\n                                    if(!$scope.tabs[i].fontFamily){\r\n                                        $scope.tabs[i].fontFamily = \"inherit\";\r\n                                    }\r\n                                    //$scope.tabs[i].idcustomfield\r\n                                    $scope.data.customFields.push({\r\n                                            \r\n                                            idCF : $scope.tabs[i].idcustomfield,\r\n                                            fontSize: $scope.tabs[i].fontSize, \r\n                                            color: $scope.tabs[i].color, \r\n                                            fontWeight: $scope.tabs[i].fontWeight, \r\n                                            fontStyle: $scope.tabs[i].fontStyle,\r\n                                            textDecoration: $scope.tabs[i].textDecoration,\r\n                                            fontFamily: $scope.tabs[i].fontFamily\r\n                                            \r\n                                    });\r\n                                }\r\n                                $scope.data.textAlign = $scope.textAlign;\r\n                                if(!$scope.resCP && $scope.idCPmixed == 0){\r\n                                    $scope.data.idCFmix = \"\";\r\n                                }\r\n                                if(!$scope.resCP && $scope.idCPmixed != 0){\r\n                                    $scope.data.idCFmix = $scope.idCPmixed;\r\n                                }else{\r\n                                    $scope.data.idCFmix = $scope.resCP.idCustomfield;\r\n                                }    \r\n                            }else{\r\n                                notificationService.error(\"Para crear autrespuesta con opciones avanzadas debe seleccionar al menos 2 campos personalizados.\");\r\n                                return;\r\n                            }\r\n                            \r\n                        }else{\r\n                            $scope.data.customFields = null;\r\n                        }\r\n                        \r\n                        $scope.data.addressees = $scope.addressees;\r\n                        $scope.data.filters = $scope.filters;\r\n                        $scope.data.condition = $scope.addressees.condition;\r\n                        $scope.data.time = $(\"#valueDatepicker\").val();\r\n                        var idAutoresponder = $stateParams.id ? $stateParams.id : 0;\r\n\r\n                        RestServices.createAutoresponder($scope.data, idAutoresponder).then(function (res) {\r\n                            $window.location.href = fullUrlBase + templateBase + '/contenthtml/' + res.autoresponder.idAutoresponder;\r\n                        });\r\n                    };\r\n\r\n                    $scope.editContentEditor = function () {\r\n                        \r\n                        if($scope.optionadvance != 0 ){\r\n                            \r\n                            if($scope.services.length >= 2){\r\n                                \r\n                                $scope.data.optionAdvance = $scope.optionadvance;\r\n                                \r\n                                if(!$scope.data.customFields){//ENTRA CUANDO ESTA CREANDO\r\n                                    $scope.data.customFields = [];\r\n                                }else{//ENTRA CUANDO ESTA EDITANDO\r\n                                    $scope.data.customFields = [];\r\n                                }\r\n                                \r\n                                //RECORREMOS EL ARREGLO DE TABS PARA EXTRAER LA INFO NECESARIA PARA EL JSON\r\n                                for(var i=0; i < $scope.tabs.length; i++){\r\n                        \r\n                                    //SI EL TAMAÑO DE FUENTE NO FUE SELECCIONADO PONEMOS POR DEFECTO 12\r\n                                    if(!$scope.tabs[i].fontSize){\r\n                                        $scope.tabs[i].fontSize = \"12\";\r\n                                    }\r\n                                    //SI EL COLOR NO FUE SELECCIONADO PONEMOS POR DEFECTO NEGRO\r\n                                    if(!$scope.tabs[i].color){\r\n                                        $scope.tabs[i].color = \"#000000\";\r\n                                    }\r\n                                    //SI NEGRITA NO FUE SELECCIONADO PONEMOS POR DEFECTO UNSET\r\n                                    if(!$scope.tabs[i].fontWeight){\r\n                                        $scope.tabs[i].fontWeight = \"unset\";\r\n                                    }\r\n                                    //SI CURSIVA NO FUE SELECCIONADO PONEMOS POR DEFECTO UNSET\r\n                                    if(!$scope.tabs[i].fontStyle){\r\n                                        $scope.tabs[i].fontStyle = \"unset\";\r\n                                    }\r\n                                    //SI SUBRAYADO NO FUE SELECCIONADO PONEMOS POR DEFECTO NONE\r\n                                    if(!$scope.tabs[i].textDecoration){\r\n                                        $scope.tabs[i].textDecoration = \"none\";\r\n                                    }\r\n                                    //SI TIPO DE LETRA NO FUE SELECCIONADO PONEMOS POR DEFECTO INHERIT\r\n                                    if(!$scope.tabs[i].fontFamily){\r\n                                        $scope.tabs[i].fontFamily = \"inherit\";\r\n                                    }\r\n                                    //$scope.tabs[i].idcustomfield\r\n                                    $scope.data.customFields.push({\r\n                                            \r\n                                            idCF : $scope.tabs[i].idcustomfield,\r\n                                            fontSize: $scope.tabs[i].fontSize, \r\n                                            color: $scope.tabs[i].color, \r\n                                            fontWeight: $scope.tabs[i].fontWeight, \r\n                                            fontStyle: $scope.tabs[i].fontStyle,\r\n                                            textDecoration: $scope.tabs[i].textDecoration,\r\n                                            fontFamily: $scope.tabs[i].fontFamily\r\n                                            \r\n                                    });\r\n                                }\r\n                                $scope.data.textAlign = $scope.textAlign;\r\n                                if(!$scope.resCP && $scope.idCPmixed == 0){\r\n                                    $scope.data.idCFmix = \"\";\r\n                                }\r\n                                if(!$scope.resCP && $scope.idCPmixed != 0){\r\n                                    $scope.data.idCFmix = $scope.idCPmixed;\r\n                                }else{\r\n                                    $scope.data.idCFmix = $scope.resCP.idCustomfield;\r\n                                }    \r\n                            }else{\r\n                                notificationService.error(\"Para crear autrespuesta con opciones avanzadas debe seleccionar al menos 2 campos personalizados.\");\r\n                                return;\r\n                            }\r\n                            \r\n                        }else{\r\n                            $scope.data.customFields = null;\r\n                        }\r\n                        \r\n                        $scope.data.addressees = $scope.addressees;\r\n                        $scope.data.time = $(\"#valueDatepicker\").val();\r\n\r\n                        RestServices.createAutoresponder($scope.data, $stateParams.id).then(function (res) {\r\n                            $window.location.href = fullUrlBase + $scope.data.autorespondercontent.url + res.autoresponder.idAutoresponder;\r\n                        });\r\n                    };\r\n\r\n                    $scope.filters = [];\r\n                    $scope.tipeFilters = [\r\n                        {id: 1, name: \"Enviar a contactos que hayan recibido un correo\"},\r\n                        {id: 2, name: \"Enviar a contactos que hayan abierto un correo\"},\r\n                        {id: 3, name: \"Enviar a contactos que hayan hecho clic un enlace\"}\r\n                    ];\r\n                    $scope.selectMailFilter = function (key) {\r\n                        if (key.typeFilters == 3) {\r\n                            RestServices.getLinksByMail(key.mailSelected).then(function (data) {\r\n                                key.links = data;\r\n                            });\r\n                        } else {\r\n                            if (!$scope.addressees.showContactlist) {\r\n                                $scope.countContacts(\"contactlist\");\r\n                            } else {\r\n                                $scope.countContacts(\"segment\");\r\n                            }\r\n\r\n                        }\r\n                    };\r\n\r\n                    $scope.selectLinkFilter = function () {\r\n                        if (!$scope.addressees.showContactlist) {\r\n                            $scope.countContacts(\"contactlist\");\r\n                        } else {\r\n                            $scope.countContacts(\"segment\");\r\n                        }\r\n                    };\r\n\r\n                    $scope.selectTypeFilter = function (key) {\r\n                        key.mailSelected = [];\r\n                        key.linkSelected = [];\r\n                        key.mail = [];\r\n                        key.links = [];\r\n                        RestServices.getMailFilters(key.typeFilters).then(function (data) {\r\n                            key.mail = data;\r\n                        });\r\n                        switch (key.typeFilters) {\r\n                            case 1:\r\n\r\n                                break;\r\n                            case 2:\r\n\r\n                                break;\r\n                            case 3:\r\n\r\n                                break;\r\n                        }\r\n                    };\r\n\r\n                    $scope.addFilter = function () {\r\n                        $scope.addressees.condition = \"all\";\r\n                        $scope.filters.push({});\r\n                    };\r\n\r\n                    $scope.removeFilters = function (index) {\r\n                        $scope.filters.splice(index, 1);\r\n                        if (!$scope.addressees.showContactlist) {\r\n                            $scope.countContacts(\"contactlist\");\r\n                        } else {\r\n                            $scope.countContacts(\"segment\");\r\n                        }\r\n                    };\r\n\r\n                }])\r\n            .controller('birthdaySmsController', ['$q', '$scope', 'RestServices', 'notificationService', '$window', '$stateParams', function ($q, $scope, RestServices, notificationService, $window, $stateParams) {\r\n                    $scope.data = {};\r\n                    $scope.filter = \"\";\r\n                    $scope.misc = {};\r\n                    $scope.data.birthdate = false;\r\n                    $scope.data.status = true;\r\n                    $scope.data.class = \"sms\";\r\n                    $scope.data.message = \"\";\r\n                    //$scope.data.category = false;\r\n                    $scope.data.idSmsCategory = \"\";\r\n                    $scope.data.scheduledate = \"\";\r\n                    $scope.initial = 0;\r\n                    $scope.tags = \"\";\r\n                    $scope.boolEditors = true;\r\n                    $scope.data.morecaracter = false;\r\n                    $scope.data.days = {\r\n                        Monday: false,\r\n                        Tuesday: false,\r\n                        Wednesday: false,\r\n                        Thursday: false,\r\n                        Friday: false,\r\n                        Saturday: false,\r\n                        Sunday: false\r\n                    };\r\n                    $scope.misc.category = false;\r\n                    $scope.addressees = [];\r\n                    $scope.addressees.results = 0;\r\n\r\n                    if ($stateParams.id) {\r\n                        RestServices.getAutoresponder($stateParams.id).then(function (res) {\r\n                            $scope.data = res.autoresponder;\r\n                            $(\"#valueDatepicker\").val(res.autoresponder.time);\r\n\r\n                            $scope.data.status = (res.autoresponder.status == 1);\r\n\r\n                            if (res.autoresponder.target) {\r\n                                $scope.addressees.showstep1 = false;\r\n                                var json = jQuery.parseJSON(res.autoresponder.target);\r\n                                $scope.addressees.results = res.autoresponder.quantitytarget;\r\n                                $scope.addressees.condition = json.condition;\r\n                                $scope.filters = json.filters;\r\n                                if (json.type == \"contactlist\") {\r\n                                    $scope.addressees.showContactlist = false;\r\n                                    $scope.addressees.selectdContactlis = json.contactlists;\r\n                                    $scope.getAllContactlist();\r\n\r\n                                } else if (json.type == \"segment\") {\r\n                                    $scope.addressees.showSegment = false;\r\n                                    $scope.addressees.selectdSegment = json.segment;\r\n                                    $scope.getAllSegment();\r\n                                }\r\n                            }\r\n\r\n                            if (!res.autoresponder.autorespondercontent) {\r\n                                $scope.boolEditors = true;\r\n                            } else {\r\n                                $scope.boolEditors = false;\r\n                                htmlPreview($stateParams.id);\r\n                                $scope.getUrl = res.autoresponder.autorespondercontent.url;\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    $scope.addressees = {selectdContactlis: []};\r\n                    $scope.addressees = {selectdSegment: []};\r\n                    $scope.addressees.showSegment = true;\r\n                    $scope.addressees.showstep1 = true;\r\n                    $scope.addressees.showContactlist = true;\r\n\r\n                    $scope.opeModalMoreCa = function () {\r\n                        if ($('#morecaracter').prop('checked')) {\r\n                            $('#alertMoreCaracter').removeClass('modal');\r\n                            $('#alertMoreCaracter').addClass('dialog dialog--open');\r\n                        }\r\n                    }\r\n\r\n                    $('#dateInitial').datetimepicker({\r\n                        format: 'hh:mm',\r\n                        language: 'es'\r\n                    }).on('changeDate', function (ev) {\r\n                        $scope.$apply();\r\n                    });\r\n                    $scope.birthdatefunction = function () {\r\n                        if ($scope.data.birthdate) {\r\n                            $scope.data.birthdate = false;\r\n                            $scope.data.days = {}\r\n                        } else {\r\n                            $scope.data.birthdate = true;\r\n                            $scope.data.days = {\r\n                                Monday: true, Tuesday: true, Wednesday: true, Thursday: true,\r\n                                Friday: true, Saturday: true, Sunday: true};\r\n                        }\r\n                    };\r\n                    $scope.saveAutorespdesms = function () {\r\n                        $scope.data.addressees = $scope.addressees;\r\n                        $scope.data.time = $(\"#valueDatepicker\").val();\r\n                        $scope.data.filters = $scope.filters;\r\n                        $scope.data.condition = $scope.addressees.condition;\r\n                        var idAutoresponder = $stateParams.id ? $stateParams.id : 0;\r\n                        RestServices.createAutorespdesms($scope.data, idAutoresponder).then(function (res) {\r\n\r\n                            notificationService.success(res['message']);\r\n                            $window.location.href = fullUrlBase + templateBase + \"#/\";\r\n                        });\r\n                    };\r\n                    $scope.clearSelect = function () {\r\n                        $scope.filters = [];\r\n                        $scope.addressees.results = 0;\r\n                        $scope.disabledContactlist = false;\r\n                        $scope.disabledSegment = false;\r\n                        $scope.addressees.selectdContactlis = \"\";\r\n                        $scope.addressees.selectdSegment = \"\";\r\n                    };\r\n                    $scope.getContactlist = function () {\r\n                        $scope.addressees = {selectdSegment: []};\r\n                        $scope.segments = [];\r\n                        $scope.filters = [];\r\n                        $scope.contactlists = [];\r\n                        $scope.addressees.showstep1 = false;\r\n                        $scope.addressees.results = 0;\r\n                        $scope.addressees.showSegment = true;\r\n                        $scope.addressees.showContactlist = false;\r\n                        $scope.prueba = undefined;\r\n                        $scope.getAllContactlist();\r\n                        $scope.getAllSegment();\r\n                    };\r\n                    $scope.setAllContactList = function () {\r\n\r\n                    }\r\n                    $scope.getAllContactlist = function () {\r\n                        RestServices.getContactlist().then(function (data) {\r\n                            $scope.contactlists = data;\r\n                        });\r\n                    };\r\n                    $scope.getSegment = function () {\r\n                        $scope.addressees = {selectdContactlis: []};\r\n                        $scope.segments = [];\r\n                        $scope.contactlists = [];\r\n                        $scope.filters = [];\r\n                        $scope.addressees.showstep1 = false;\r\n                        $scope.addressees.count = 0;\r\n                        $scope.prueba = undefined;\r\n                        $scope.prueba2 = undefined;\r\n                        $scope.addressees.selectdContactlis = [];\r\n                        $scope.addressees.selectdSegment = [];\r\n                        $scope.addressees.showSegment = false;\r\n                        $scope.addressees.showContactlist = true;\r\n                        $scope.getAllSegment();\r\n                        $scope.getAllContactlist();\r\n                    };\r\n                    $scope.getAllSegment = function () {\r\n                        RestServices.getSegment().then(function (data) {\r\n                            $scope.segments = data;\r\n                        });\r\n                    };\r\n                    $scope.selectAction = function () {\r\n                        $scope.countContacts(\"contactlist\");\r\n                    };\r\n                    $scope.selectActionSegment = function () {\r\n                        $scope.countContacts(\"segment\");\r\n                    };\r\n                    $scope.allSegment = function () {\r\n                        $scope.disabledSegment = true;\r\n                        $scope.addressees.selectdSegment = $scope.segments;\r\n                        $scope.countContacts(\"segment\");\r\n                    };\r\n                    $scope.allContactlist = function () {\r\n                        $scope.disabledContactlist = true;\r\n                        $scope.addressees.selectdContactlis = $scope.contactlists;\r\n                        $scope.countContacts(\"contactlist\");\r\n                    };\r\n                    $scope.countContacts = function (type) {\r\n                        $scope.addressees.results = 0;\r\n                        var data = {\r\n                            type: type,\r\n                            segment: $scope.addressees.selectdSegment,\r\n                            contactlist: $scope.addressees.selectdContactlis,\r\n//            filters: $scope.filters,\r\n//            condition: $scope.addressees.condition,\r\n//            idMail: $scope.idMail\r\n                        };\r\n                        RestServices.countContactFromSms(data).then(function (data) {\r\n                            $scope.addressees.results = data;\r\n                        });\r\n                    };\r\n                    $scope.validateInLine = function (type) {\r\n                        $scope.misc.invalidCharacters = false;\r\n                        $scope.misc.existTags = false;\r\n                        $scope.misc.taggedMessage = $scope.data.message;\r\n                        $scope.misc.newMessage = $scope.data.message;\r\n                        var tags = /%%+[a-zA-Z0-9_]+%%/;\r\n                        var count = 0;\r\n                        if (tags.test($scope.data.message)) {\r\n                            $scope.misc.existTags = true;\r\n                            $scope.misc.taggedMessage = \"\";\r\n                            $scope.misc.newMessage = \"\";\r\n\r\n                            var words = $scope.data.message.split(\" \");\r\n                            for (var cont = 0; cont < words.length; cont++) {\r\n                                var word = words[cont];\r\n                                var word2 = words[cont];\r\n                                if (word.substr(0, 2) == \"%%\" && (word.substr(-2) == \"%%\" || word.substr(-3) == \"%%,\" || word.substr(-3) == \"%%.\" || word.substr(-3) == \"%%;\")) {\r\n                                    word = word.substr(2);\r\n                                    word2 = \"\";\r\n                                    word = \"<b><i>\" + word;\r\n                                    if (word.substr(-2) == \"%%\") {\r\n                                        word = word.substr(0, word.length - 2);\r\n                                    } else if (word.substr(-3) == \"%%,\" || word.substr(-3) == \"%%.\" || word.substr(-3) == \"%%;\") {\r\n                                        word = word.substr(0, word.length - 3);\r\n                                    }\r\n                                    word = word + \"</i></b>\";\r\n                                    count = count + word.length;\r\n                                }\r\n                                $scope.misc.taggedMessage += word + \" \";\r\n                                $scope.misc.newMessage += word2 + \" \";\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                    $scope.addTag = function (tag) {\r\n                        if (typeof $scope.data.message == \"undefined\") {\r\n                            $scope.data.message = \"\";\r\n                            $scope.data.message += tag;\r\n                        } else {\r\n                            $scope.data.message += \" \" + tag;\r\n                        }\r\n                    };\r\n                    $scope.setTargetAuto = function (prm) {\r\n                        if (prm.type == \"contactlist\") {\r\n                            $scope.addressees.selectdContactlis = prm.contactlists;\r\n                        } else if (prm.type == \"segment\") {\r\n                            $scope.addressees.selectdSegment = prm.selectdSegment;\r\n                        }\r\n                        $scope.countContacts(prm.type);\r\n                    };\r\n                    $scope.setScheduleDate = function (prm) {\r\n                        $scope.data.scheduledate = prm\r\n                    };\r\n                    $scope.setMessage = function (prm) {\r\n                        $scope.data.message = prm\r\n                    };\r\n                    $scope.setIdSmsCategory = function (prm) {\r\n                        $scope.data.idSmsCategory = prm;\r\n                    };\r\n                    $scope.setDays = function (prm) {\r\n                        $scope.data.days = prm;\r\n                    }\r\n                    $scope.containsWord = function (haystack, needle) {\r\n                        return (\" \" + haystack + \" \").indexOf(\" \" + needle + \" \") !== -1;\r\n                    }\r\n                    $scope.setSwitchBirthday = function (prm) {\r\n                        $scope.data.birthdate = true;\r\n                        if (prm) {\r\n                            $('.onoffswitch-inner').click();\r\n                        }\r\n                    }\r\n                    $scope.getDataAll = function () {\r\n                        if ($stateParams.id) {\r\n                            RestServices.getDataAll($stateParams.id).then(function (data) {\r\n                                //$scope.setIdSmsCategory();\r\n                                $scope.setTargetAuto(data.target);\r\n                                $scope.setScheduleDate(data.scheduledate);\r\n                                $scope.setSwitchBirthday(data.birthdate);\r\n                                $scope.setDays(data.days);\r\n                                $scope.setMessage(data.message);\r\n                                if (data.morecaracter === true) {\r\n                                    $(\"#morecaracter\").prop('checked', true);\r\n                                } else {\r\n                                    $(\"#morecaracter\").prop('checked', false);\r\n                                }\r\n                            }).catch(function (data) {\r\n                            })\r\n                        }\r\n                    };\r\n\r\n                    $scope.getAllSmsCategories = function () {\r\n                        RestServices.getAllSmsCategories().then(function (res) {\r\n                            $scope.misc.category = res;\r\n                        });\r\n                    };\r\n                    $scope.getAllSmsCategories();\r\n\r\n                    var arrInitialPeticion = [$scope.getDataAll()];\r\n                    $q.all(arrInitialPeticion).then(function (data) {\r\n                    }).catch(function (error) {})\r\n\r\n                }])\r\n            .controller('contentEditorAutoresController', ['$scope', 'RestServices', 'notificationService', '$window', '$stateParams', function ($scope, RestServices, notificationService, $window, $stateParams) {\r\n                    $scope.saveContentEditor = function () {\r\n                        var data = {\r\n                            editor: document.getElementById('iframeEditor').contentWindow.catchEditorData()\r\n                        };\r\n                        RestServices.createContentEditorAutoresponder(data, idAutoresponder).then(function (res) {\r\n                            if (res.operation == \"create\") {\r\n                                notificationService.success(res.message);\r\n                            } else if (res.operation == \"edit\") {\r\n                                notificationService.primary(res.message);\r\n                            }\r\n                            $window.location.href = fullUrlBase + templateBase + '#/birthday/' + res.autoresponderContent.idAutoresponder;\r\n                        });\r\n                    }\r\n                }])\r\n            .controller('toolsController', ['$scope', 'RestServices', 'notificationService', '$window', '$stateParams', function ($scope, RestServices, notificationService, $window, $stateParams) {}])\r\n})();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL2F1dG9yZXNwb25kZXIvY29udHJvbGxlcnMuanM/MGQxMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsaUJBQWlCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DO0FBQ0E7QUFDQSx5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMkNBQTJDO0FBQzNDLHlDQUF5QztBQUN6QyxzQ0FBc0M7QUFDdEMseUNBQXlDO0FBQ3pDLHFDQUFxQztBQUNyQyw4Q0FBOEM7QUFDOUMseUNBQXlDO0FBQ3pDLDJDQUEyQztBQUMzQywwQ0FBMEM7QUFDMUM7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBLHlDQUF5Qzs7QUFFekMscUNBQXFDO0FBQ3JDLGdFQUFnRSxrQkFBa0I7QUFDbEYseUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSw0REFBNEQsa0JBQWtCO0FBQzlFO0FBQ0E7QUFDQTs7O0FBR0EsNkJBQTZCO0FBQzdCO0FBQ0Esd0U7QUFDQSxzREFBc0QsbUJBQW1CLEU7QUFDekUsNkI7QUFDQSx5QkFBeUIsSztBQUN6QjtBQUNBO0FBQ0EsMkU7QUFDQSw2QjtBQUNBLHlCOztBQUVBLHFFQUFxRTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEUsK0NBQStDLGlCQUFpQjtBQUNoRSwrQ0FBK0MsaUJBQWlCO0FBQ2hFLCtDQUErQyxvQkFBb0I7QUFDbkUsK0NBQStDLG9CQUFvQjtBQUNuRSwrQ0FBK0Msb0JBQW9CO0FBQ25FLG1EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQSx1RTtBQUNBLCtDQUErQyxxQkFBcUIsRTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msa0JBQWtCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBLHVCQUF1QjtBQUN2Qjs7QUFFQTtBQUNBLHdEQUF3RDtBQUN4RDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsZ0RBQWdELHNCQUFzQjtBQUN0RTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EscUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsMEJBQTBCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxvQkFBb0I7QUFDcEYseUNBQXlDO0FBQ3pDO0FBQ0EsZ0VBQWdFLG9CQUFvQjtBQUNwRix5Q0FBeUM7QUFDekM7QUFDQSxnRUFBZ0Usb0JBQW9CO0FBQ3BGLHlDQUF5QztBQUN6QztBQUNBO0FBQ0EsZ0VBQWdFLG9EQUFvRDtBQUNwSDs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxpR0FBaUc7QUFDM0o7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtFO0FBQ0EscUU7QUFDQTs7QUFFQTtBQUNBLGtFOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLHlCOztBQUVBOztBQUVBO0FBQ0E7QUFDQSx5RTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUZBQW1GLGdEQUFnRDs7QUFFbkk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQSx5Q0FBeUM7O0FBRXpDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsaUNBQWlDOztBQUVqQzs7QUFFQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlCQUF5QjtBQUN6Qjs7O0FBR0EseUNBQXlDO0FBQ3pDLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHFCQUFxQjs7QUFFckIsNERBQTREOztBQUU1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTs7QUFFQTs7QUFFQSw4REFBOEQ7QUFDOUQ7QUFDQSxpQ0FBaUMsS0FBSztBQUN0QztBQUNBOztBQUVBO0FBQ0EsNENBQTRDLHdCQUF3Qjs7QUFFcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQ0FBcUM7QUFDckM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0EsaUM7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBOztBQUVBLHlCQUF5QjtBQUN6QjtBQUNBOzs7QUFHQSxtRTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9DQUFvQzs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0Esb0NBQW9DOztBQUVwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsOERBQThEO0FBQzlEO0FBQ0EsaUNBQWlDLEtBQUs7QUFDdEM7QUFDQTs7QUFFQTtBQUNBLDRDQUE0Qyx3QkFBd0I7O0FBRXBFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0EsaUM7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBOztBQUVBLHlCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSw4REFBOEQ7QUFDOUQ7QUFDQSxpQ0FBaUMsS0FBSztBQUN0QztBQUNBOztBQUVBO0FBQ0EsNENBQTRDLHdCQUF3Qjs7QUFFcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSxpQztBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7O0FBRUEseUJBQXlCO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLDhEQUE4RDtBQUM5RDtBQUNBLGlDQUFpQyxLQUFLO0FBQ3RDO0FBQ0E7O0FBRUE7QUFDQSw0Q0FBNEMsd0JBQXdCOztBQUVwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBLGlDO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTs7QUFFQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsOERBQThEO0FBQzlEO0FBQ0EsaUNBQWlDLEtBQUs7QUFDdEM7QUFDQTs7QUFFQTtBQUNBLDRDQUE0Qyx3QkFBd0I7O0FBRXBFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0EsaUM7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBOztBQUVBLHlCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0EseUJBQXlCLCtEQUErRDtBQUN4Rix5QkFBeUIsOERBQThEO0FBQ3ZGLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUEseUNBQXlDO0FBQ3pDLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4Q0FBOEMscUJBQXFCO0FBQ25FO0FBQ0E7QUFDQSw0S0FBNEs7QUFDNUs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx5RkFBeUY7QUFDOUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLDZCQUE2QjtBQUM3QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUIsMkJBQTJCOztBQUVoRCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxpQkFBaUI7QUFDakIsc01BQXNNO0FBQ3RNLENBQUMiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXV0b3Jlc3BvbmRlci5jb250cm9sbGVycycsIFtdKVxyXG4gICAgICAgICAgICAuZmlsdGVyKCdwcm9wc0ZpbHRlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaXRlbXMsIHByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzQXJyYXkoaXRlbXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbU1hdGNoZXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0ga2V5c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IHByb3BzW3Byb3BdLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bcHJvcF0udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodGV4dCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1NYXRjaGVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtTWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQgPSBpdGVtcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdsaXN0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ1Jlc3RTZXJ2aWNlcycsICdub3RpZmljYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgUmVzdFNlcnZpY2VzLCBub3RpZmljYXRpb25TZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlID0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZvcndhcmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbml0aWFsICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0QXV0b3Jlc3BvbnNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZmFzdGZvcndhcmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbml0aWFsID0gKCRzY29wZS5saXN0LnRvdGFsX3BhZ2VzIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlID0gJHNjb3BlLmxpc3QudG90YWxfcGFnZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0QXV0b3Jlc3BvbnNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmFja3dhcmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbml0aWFsIC09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlIC09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0QXV0b3Jlc3BvbnNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZmFzdGJhY2t3YXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3RBdXRvcmVzcG9uc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdEF1dG9yZXNwb25zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVzdFNlcnZpY2VzLmdldEFsbEF1dG9yZXNwb25kZXIoJHNjb3BlLmluaXRpYWwsICRzY29wZS5maWx0ZXIpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSByZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0QXV0b3Jlc3BvbnNlKCk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vRmlsdHJvc1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJuYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZXN0U2VydmljZXMuZ2V0QWxsQXV0b3Jlc3BvbmRlcigkc2NvcGUuaW5pdGlhbCwgJHNjb3BlLmZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IHJlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy9FbGltaW5hclxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jb25maXJtRGVsZXRlID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pZEF1dG9yZXNwb25kZXIgPSBpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3Blbk1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZUF1dG9yZXNwb25kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlc3RTZXJ2aWNlcy5kZWxldGUoJHNjb3BlLmlkQXV0b3Jlc3BvbmRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLndhcm5pbmcocmVzLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3RBdXRvcmVzcG9uc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlTW9kYWwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudHJhbnNsYXRpb25EYXlzID0gZnVuY3Rpb24gKGRheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTW9uZGF5JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXkgPSAnTHVuZXMnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnVHVlc2RheSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5ID0gJ01hcnRlcyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdXZWRuZXNkYXknOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheSA9ICdNaWVyY29sZXMnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnVGh1cnNkYXknOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheSA9ICdKdWV2ZXMnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnRnJpZGF5JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXkgPSAnVmllcm5lcyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdTYXR1cmRheSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5ID0gJ1NhYmFkbyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdTdW5kYXknOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheSA9ICdEb21pbmdvJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF5O1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50cmFuc2xhdGVDbGFzcyA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc21zJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ01lbnNhamUgZGUgVGV4dG8nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWFpbCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICdDb3JyZW8gRWxlY3Ryb25pY28nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByZXZpZXdBdXRvcmVzcG9uZGVyID0gZnVuY3Rpb24gKGlkQXV0b3Jlc3BvbmRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjbW9kYWwtYm9keS1wcmV2aWV3JykuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbFByZXZpZXdBdXRvcmVzKGlkQXV0b3Jlc3BvbmRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1dKVxyXG4gICAgICAgICAgICAuY29udHJvbGxlcignYmlydGhkYXlDb250cm9sbGVyJywgWyckc2NvcGUnLCAnUmVzdFNlcnZpY2VzJywgJ25vdGlmaWNhdGlvblNlcnZpY2UnLCAnJHdpbmRvdycsICckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbiAoJHNjb3BlLCBSZXN0U2VydmljZXMsIG5vdGlmaWNhdGlvblNlcnZpY2UsICR3aW5kb3csICRzdGF0ZVBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuc3RhdHVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYm9vbEVkaXRvcnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnNlcnRvcHRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY291bnRDb250YWN0TGlzdD1cIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMuc2VsZWN0ZENvbnRhY3RsaXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1c3RvbWZpZWxkID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlkY29udGFjdGxpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsaWduY2VudGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5lZ3JpdGEgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxpZ25sZWZ0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsaWducmlnaHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxpZ249XCJcIjsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxldHJhPVwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlcnZpY2VzID0gW107ICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubm9tYnJlbGV0cmE7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkMiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzYWJsZWQzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3B0aW9uYWR2YW5jZT0wO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5taXhlZEZpZWxkID0gXCJcIjsvL2FsbWFjZW5hIGVsIG5vbWJyZSBkZWwgY2FtcG8gcGVyc29uYWxpemFkbyBkaW5hbWljYW1lbnRlXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlkQ1BtaXhlZCA9IDA7Ly9vYnRpZW5lIGVsIGlkIGRlbCBjYW1wbyBwZXJzb25hbGl6YWRvIGFsIGNyZWFybG8gZGluYW1pY2FtZW50ZVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXNDUCA9IFwiXCI7Ly9ndWFyZGEgbGEgcmVzcHVlc3RhIGRlIGxhIGNyZWFjaW9uIGRlbCBjYW1wbyAoY2FtcG9zIGRlIGxhIHRhYmxhKVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RDRiA9IFtdOy8vVkFMT1JFUyBERSBNVUxUSVNFTEVDVCBFVklUQU5ETyBBVVRPU09SVFxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzID0gW107Ly9BUlJFR0xPIERFIFRCUyBESU5BTUlDT1NcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dEFsaWduID0gXCJsZWZ0XCI7Ly9BTElORUFDSU9OIERFIFRFWFRPXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluZm9MZWZ0ID0gXCJcIjsvL0NTUyBCT1RPTiBMRUZUXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluZm9DZW50ZXIgPSBcIlwiOy8vQ1NTIEJPVE9OIENFTlRFUlxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbmZvUmlnaHQgPSBcIlwiOy8vQ1NTIEJPVE9OIFJJR0hUXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE9MRHNlbGVjdENGID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkY3VzdG9tZmllbGQgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldEFsaWduID0gZnVuY3Rpb24gKHBybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYocHJtID09IDIgJiYgJHNjb3BlLmluc2VydG9wdGlvbiA9PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCcjaW5zZXJ0b3B0aW9uJykucHJvcCgnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluc2VydG9wdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9wdGlvbmFkdmFuY2U9MTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NpIGVsIHN3aXRjaCBlc3RhIGVuIG9uICwgc2UgcG9uZSBlbCBjYW1wbyBlbiByZXF1ZXJpZG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3NlcnZpY2VzXCIpLmF0dHIoXCJyZXF1aXJlZFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUuYWRkcmVzc2Vlcy5zZWxlY3RkQ29udGFjdGxpcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY291bnRDb250YWN0TGlzdCA9ICRzY29wZS5hZGRyZXNzZWVzLnNlbGVjdGRDb250YWN0bGlzLmxlbmd0aCA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY291bnRDb250YWN0TGlzdCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2hpZGRlY29udGVudCcpLmNzcygnZGlzcGxheScsJ25vbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pZGNvbnRhY3RsaXN0ID0gJHNjb3BlLmFkZHJlc3NlZXMuc2VsZWN0ZENvbnRhY3RsaXNbMF0uaWRDb250YWN0bGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlc3RTZXJ2aWNlcy5maW5kY3VzdG9tZmllbGRzKCRzY29wZS5pZGNvbnRhY3RsaXN0KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1c3RvbWZpZWxkID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluc2VydG9wdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2hpZGRlY29udGVudCcpLmNzcyh7XCJkaXNwbGF5XCI6IFwibm9uZVwifSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKFwiRXN0aW1hZG8gdXN1YXJpbyBzw7NsbyBwdWVkZXMgZWxlZ2lyIHVuYSBsaXN0YSBkZSBjb250YWN0byBwYXJhIGVzdGEgb3BjacOzbiBhdmFuemFkYVwiKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5zZXJ0b3B0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3B0aW9uYWR2YW5jZT0wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihcIkVzdGltYWRvIHVzdWFyaW8gZGViZXMgZWxlZ2lyIHVuYSBsaXN0YSBkZSBjb250YWN0b1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2hpZGRlY29udGVudCcpLmNzcyh7XCJkaXNwbGF5XCI6IFwibm9uZVwifSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnNlcnRvcHRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9wdGlvbmFkdmFuY2U9MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5zZXJ0b3B0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNpbnNlcnRvcHRpb24nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2hpZGRlY29udGVudCcpLmNzcyh7XCJkaXNwbGF5XCI6IFwiYmxvY2tcIn0pOyAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkKCcjYWR2YW5jZWRvcHRpb25zJykucHJvcCgnY2hlY2tlZCcpID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluc2VydG9wdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjaW5zZXJ0b3B0aW9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihwcm0gPT0gMiAmJiAkc2NvcGUuaW5zZXJ0b3B0aW9uID09IGZhbHNlKXsvL09DVUxUQSBERSBOVUVWTyBFTCBQQU5FTCBERSBPUENJT05FUyBBVkFOWkFEQVMgWSBTRVRFQSBUT0RPIEVOIFZBQ0lPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubnVtPVwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubnVtMj1cIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm51bTM9XCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzYWJsZWQzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNhYmxlZDIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlbGVjdGNvbG9yJykudmFsKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Jlc3VsdDEnKS5jc3Moe1wiY29sb3JcIjogXCJibGFja1wifSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjcmVzdWx0MicpLmNzcyh7XCJjb2xvclwiOiBcImJsYWNrXCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNyZXN1bHQzJykuY3NzKHtcImNvbG9yXCI6IFwiYmxhY2tcIn0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Jlc3VsdDEnKS5jc3Moe1wiZm9udC1zaXplXCI6IFwiMTRweFwifSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjcmVzdWx0MicpLmNzcyh7XCJmb250LXNpemVcIjogXCIxNHB4XCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNyZXN1bHQzJykuY3NzKHtcImZvbnQtc2l6ZVwiOiBcIjE0cHhcIn0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9wdGlvbmFkdmFuY2U9MDsgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Jlc3VsdDMnKS52YWwoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjcmVzdWx0MicpLnZhbChcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNyZXN1bHQxJykudmFsKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlcnZpY2VzJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2VydmljZXMnKS52YWwoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjb3B0aW9uc3BhbicpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2hpZGRlY29udGVudCcpLmNzcyh7XCJkaXNwbGF5XCI6IFwibm9uZVwifSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0Q0Y9W107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0Q0YubGVuZ3RoID0wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5lZ3JpdGE9ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjbmVncml0YScpLnJlbW92ZUNsYXNzKCdpbmZvLWludmVydGVkJyk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFsaW5lYXInKS5jc3Moe1widGV4dC1hbGlnblwiOiBcImxlZnRcIn0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjaGVjazQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2NoZWNrMycpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjYWxpZ25yaWdodCcpLnJlbW92ZUNsYXNzKCdpbmZvLWludmVydGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjYWxpZ25yaWdodCcpLmFkZENsYXNzKCdkZWZhdWx0LWludmVydGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjYWxpZ25jZW50ZXInKS5yZW1vdmVDbGFzcygnaW5mby1pbnZlcnRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2FsaWduY2VudGVyJykuYWRkQ2xhc3MoJ2RlZmF1bHQtaW52ZXJ0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hbGlnbmNlbnRlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsaWducmlnaHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNhbGlnbmxlZnQnKS5hZGRDbGFzcygnaW5mby1pbnZlcnRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsaWduY2VudGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxpZ25yaWdodCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFsbF9MSSA9ICQoXCJzcGFuLnNwYW5MQ1wiKS5maW5kKFwidWxcIikuZmluZChcImxpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFsbF9MSS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPTERzZWxlY3RDRiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRjdXN0b21maWVsZCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdENGID0gW107ICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgLy9GVU5DSU9OIFBBUkEgRVhUUkFFUiBQT1NJQ0lPTiBERSBBUlJFTE8gUVVFIENPTlRJRU5FIFVOIE9CSkVUT1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZpbmRXaXRoQXR0cihhcnJheSwgYXR0ciwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhcnJheVtpXVthdHRyXSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vRlVOQ0lPTiBQQVJBIEdVQVJEQVIgRUwgQ0FNUE8gUEVSU09OQUxJWkFETyBDT01CSU5BRE8gQVVUT01BVElDQU1FTlRFXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVDUCA9IGZ1bmN0aW9uKG5hbWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkIDogJHNjb3BlLmlkQ1BtaXhlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRDb250YWN0TGlzdCA6ICRzY29wZS5pZGNvbnRhY3RsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlc3RTZXJ2aWNlcy5hZGRjdXN0b21maWVsZChkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pZENQbWl4ZWQgPSByZXMuY3VzdG9tZmllbGQuaWRDdXN0b21maWVsZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXNDUCA9IHJlcy5jdXN0b21maWVsZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbm90aWZpY2F0aW9uU2VydmljZS5zdWNjZXNzKHJlcy5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJ0bmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IocmVzLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vRnVuY2lvbiBlc2NvZ2VyIENhbXBvcyBwZXJzb25hbGl6YWRvcyAobWF4aW1vIDMpXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpbWl0ZmllbGRzID0gZnVuY3Rpb24gKG51bSl7Ly9OVU0gRVMgMSBQQVJBIENSRUFDSU9OIFkgMiBQQVJBIEVESUNJT04sIEVTVE8gQ09OIEVMIEZJTiBERSBDT05UUk9MQVIgTEEgQ1JFQUNJT04gREUgQ0ZNSVhFRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWl4ZWRGaWVsZCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSBcIlwiLCB4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5zZXJ2aWNlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUuc2VydmljZXMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVkFMSURBUiBFTCBOVU1FUk8gREUgc2VsZWN0Q0YgWSBFTCBOVU1FUk8gREUgVEFCUyBTSSBzZWxlY3RDRiBFUyBNRU5PUiBBIFRBQlMgRUxJTUlOQVIgRUwgVEFCIElORElDQURPIFNJIE5PIEFHUkVHQVJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUuc2VydmljZXMubGVuZ3RoIDwgJHNjb3BlLnRhYnMubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQlVTQ0FNT1MgTEEgRElGRVJFTkNJQSBFTlRSRSBMT1MgQ0YgU0VMRUNDSU5BRE9TIFkgTE9TIFFVRSBFU1RBQkFOIEFOVEVTXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaWZmZXJlbmNlID0gT0xEc2VsZWN0Q0YuZmlsdGVyKHogPT4gISRzY29wZS5zZXJ2aWNlcy5pbmNsdWRlcyh6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRU4gQ1VTVE9NRklFTEQgKERBVEEgREUgU1FMKSBCVVNDQU1PUyBFTCBOT01CUkUgU0VHVU4gRUwgSUQgREVMIENGIFkgTE8gRUxJTUlOQU1PUyBERSBMT1MgVEFCU1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VhcmNoQ3VzdG9tZmllbGQgPSBmaW5kV2l0aEF0dHIoaWRjdXN0b21maWVsZCwnaWRjdXN0b21maWVsZCcsZGlmZmVyZW5jZVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzLnNwbGljZShzZWFyY2hDdXN0b21maWVsZCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVEFNQklFTiBFTElNSU5BTU9TIExBIFBPU0lDSU9OIERFTCBBUlJFR0xPIENPTiBMT1MgQ0ZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdENGLnNwbGljZShzZWFyY2hDdXN0b21maWVsZCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0FDVFVBTElaQU1PUyBMQSBWQVJJQUJMRSBWSUVKQSBDT04gTEEgTlVFVkEgSU5GTyBTRUxFQ0NJT05BREFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT0xEc2VsZWN0Q0YgPSAkc2NvcGUuc2VydmljZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1JFQ09SUkVNT1MgTE9TIFRBQlMgUEFSQSBBQ1RVQUxJWkFSIENGTUlYRURcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8JHNjb3BlLnRhYnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICRzY29wZS50YWJzW2ldLm5hbWVTZXJ2aWNlK1wiLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0VOVklBTU9TIExBUyBWQVJJQUJMRVMgREUgQ0ZNSVhFRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uY2F0ID0gc3RyLnN1YnN0cmluZygwLCBzdHIubGVuZ3RoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWl4ZWRGaWVsZCA9IFwiJSVcIitjb25jYXQudG9VcHBlckNhc2UoKStcIiUlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0FHUkVHQVIgRUwgVUxUSU1PIFNFTEVDQ0lPTkFETyBQQVJBIFFVRSBFTCBTT1JUIEFVVE9NQVRJQ08gREVMIE1VTFRJU0VMRUNUIE5PIEFGRUNURSBFTCBPUkRFTlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlmZiA9ICRzY29wZS5zZXJ2aWNlcy5maWx0ZXIoaSA9PiAhJHNjb3BlLnNlbGVjdENGLmluY2x1ZGVzKGkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGlmZlswXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RDRi5wdXNoKGRpZmZbMF0pOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGN1c3RvbWZpZWxkID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQlVTQ0FNT1MgRU4gRUwgQVJSRUxPIENVU1RPTUZJRUxEIEVMIEFMVEVSTkFUSVZFIE5BTUUgU0VHVU4gRUwgU0VMRUNDSU9OQURPLCBBR1JFR0FNT1MgRUwgTk9NQlJFIEVOIENGTUlYRURcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8JHNjb3BlLnNlbGVjdENGLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVkFMSURBTU9TIExPUyBDQU1QT1MgUE9SIERFRkVDVE9TIFFVRSBDT05USUVORU4gTE9TIENPTlRBQ1RPU1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLnNlbGVjdENGW2ldID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSBcIk5PTUJSRVwiK1wiLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkY3VzdG9tZmllbGQucHVzaCh7aWRjdXN0b21maWVsZCA6IFwiMFwifSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZigkc2NvcGUuc2VsZWN0Q0ZbaV0gPT0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9IFwiQVBFTExJRE9cIitcIi5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGN1c3RvbWZpZWxkLnB1c2goe2lkY3VzdG9tZmllbGQgOiBcIjFcIn0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoJHNjb3BlLnNlbGVjdENGW2ldID09IDIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSBcIkZFQ0hBX05BQ0lNSUVOVE9cIitcIi5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGN1c3RvbWZpZWxkLnB1c2goe2lkY3VzdG9tZmllbGQgOiBcIjJcIn0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IGZpbmRXaXRoQXR0cigkc2NvcGUuY3VzdG9tZmllbGQsJ2lkQ3VzdG9tZmllbGQnLCRzY29wZS5zZWxlY3RDRltpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICRzY29wZS5jdXN0b21maWVsZFt4XS5hbHRlcm5hdGl2ZW5hbWUrXCIuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRjdXN0b21maWVsZC5wdXNoKHtpZGN1c3RvbWZpZWxkIDogJHNjb3BlLmN1c3RvbWZpZWxkW3hdLmlkQ3VzdG9tZmllbGR9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0JVU0NBTU9TIExBIERJRkVSRU5DSUEgRU5UUkUgTEEgU0VMRUNDSU9OIFZJRUpBIFkgTEEgTlVFVkEgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaWZmZXJlbmNlID0gJHNjb3BlLnNlbGVjdENGLmZpbHRlcih6ID0+ICFPTERzZWxlY3RDRi5pbmNsdWRlcyh6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkaWZmZXJlbmNlWzBdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9FTiBDVVNUT01GSUVMRCAoREFUQSBERSBTUUwpIEJVU0NBTU9TIEVMIE5PTUJSRSBTRUdVTiBFTCBJRCBERUwgQ0YgWSBMTyBFTlZJQU1PUyBBIExPUyBUQUJTXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VhcmNoQ3VzdG9tZmllbGQgPSBmaW5kV2l0aEF0dHIoJHNjb3BlLmN1c3RvbWZpZWxkLCdpZEN1c3RvbWZpZWxkJyxkaWZmZXJlbmNlWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzLnB1c2goe2lkY3VzdG9tZmllbGQgOiBkaWZmWzBdLCBuYW1lU2VydmljZTokc2NvcGUuY3VzdG9tZmllbGRbc2VhcmNoQ3VzdG9tZmllbGRdLm5hbWUsIGRpc2FibGVkOiBmYWxzZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQUNUVUFMSVpBTU9TIExBIFZBUklBQkxFIFZJRUpBIENPTiBMQSBOVUVWQSBJTkZPIFNFTEVDQ0lPTkFEQVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPTERzZWxlY3RDRi5wdXNoKGRpZmZbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9FTlZJQU1PUyBMQVMgVkFSSUFCTEVTIERFIENGTUlYRURcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmNhdCA9IHN0ci5zdWJzdHJpbmcoMCwgc3RyLmxlbmd0aC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1peGVkRmllbGQgPSBcIiUlXCIrY29uY2F0LnRvVXBwZXJDYXNlKCkrXCIlJVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihudW0gPT0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zYXZlQ1AoJHNjb3BlLm1peGVkRmllbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU0kgRU5UUkEgQVFVSSBFUyBQT1JRVUUgTk8gSEFZIE5JTkdVTiBDRiBTRUxFQ0NJT05BRE8gRU4gRUwgRUxFTUVOVE8gU0VMRUNUIEVOVE9OQ0VTIFZBQ0lBTU9TIExBUyBWQVJJQUJMRVMgRElOQU1JQ0FTXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPTERzZWxlY3RDRiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkY3VzdG9tZmllbGQgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0Q0YgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIEVOVFJBIEFRVUkgRVMgUE9SUVVFIE5PIEhBWSBOSU5HVU4gQ0YgU0VMRUNDSU9OQURPIEVOIEVMIEVMRU1FTlRPIFNFTEVDVCBFTlRPTkNFUyBWQUNJQU1PUyBMQVMgVkFSSUFCTEVTIERJTkFNSUNBU1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9MRHNlbGVjdENGID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGN1c3RvbWZpZWxkID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0Q0YgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvL0NBTUJJQVIgVEFNQcORTyBERSBMQSBMRVRSQSBSRUNJQklFTkRPIEVMIElORElDRSBZIEFUUklCVVRPUyBERSBJTlBVVCBFTiBBUlJFR0xPIERFIFRBQlNcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlU2l6ZSA9IGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaW5kZXhdLmZvbnRTaXplID0gdmFsdWUuc2VsZWN0ZWRPcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9DQU1CSUFSIENPTE9SIERFIExBIExFVFJBIFJFQ0lCSUVORE8gRUwgSU5ESUNFIFkgQVRSSUJVVE9TIERFIElOUFVUIEVOIEFSUkVHTE8gREUgVEFCU1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGFuZ2VDb2xvciA9IGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHsgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpbmRleF0uY29sb3IgPSB2YWx1ZS5zZWxlY3RDb2xvcjsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vQ0FNQklBUiBFU1RJTE8gREUgTEEgTEVUUkEgUkVDSUJJRU5ETyBFTCBJTkRJQ0UgWSBBVFJJQlVUT1MgREUgSU5QVVQgRU4gQVJSRUdMTyBERSBUQUJTXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZVN0eWxlID0gZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkgeyAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZS5ib2xkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2luZGV4XS5mb250V2VpZ2h0ID0gXCJib2xkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpbmRleF0uYm9sZENsYXNzID0gXCJpbmZvLWludmVydGVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaW5kZXhdLmZvbnRXZWlnaHQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaW5kZXhdLmJvbGRDbGFzcyA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlLml0YWxpY3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaW5kZXhdLmZvbnRTdHlsZSA9IFwiaXRhbGljXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpbmRleF0uaXRhbGljc0NsYXNzID0gXCJpbmZvLWludmVydGVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaW5kZXhdLmZvbnRTdHlsZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpbmRleF0uaXRhbGljc0NsYXNzID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUudW5kZXJsaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpbmRleF0udGV4dERlY29yYXRpb24gPSBcInVuZGVybGluZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaW5kZXhdLnVuZGVybGluZWRDbGFzcyA9IFwiaW5mby1pbnZlcnRlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2luZGV4XS50ZXh0RGVjb3JhdGlvbiA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpbmRleF0udW5kZXJsaW5lZENsYXNzID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvL0NBTUJJQVIgRlVFTlRFIERFIExBIExFVFJBIFJFQ0lCSUVORE8gRUwgSU5ESUNFIFkgQVRSSUJVVE9TIERFIElOUFVUIEVOIEFSUkVHTE8gREUgVEFCU1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGFuZ2VGb250ID0gZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2luZGV4XS5mb250RmFtaWx5ID0gdmFsdWUuZm9udEZhbWlseTsgXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvL0NBTUJJQVIgQUxJTkVBQ0lPTiBERSBMQSBMRVRSQSBSRUNJQklFTkRPIEVMIElORElDRSBZIEFUUklCVVRPUyBERSBJTlBVVCBFTiBBUlJFR0xPIERFIFRBQlNcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxpZ25UZXh0ID0gIGZ1bmN0aW9uICh2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZS5sZWZ0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50ZXh0QWxpZ24gPSBcImxlZnRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbmZvTGVmdCA9IFwiaW5mby1pbnZlcnRlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZih2YWx1ZS5jZW50ZXIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5mb0NlbnRlciA9IFwiaW5mby1pbnZlcnRlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZih2YWx1ZS5yaWdodCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dEFsaWduID0gXCJyaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluZm9SaWdodCA9IFwiaW5mby1pbnZlcnRlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50ZXh0QWxpZ24gPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluZm9MZWZ0ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbmZvQ2VudGVyID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbmZvUmlnaHQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlcnZpY2VTZWxlY3RlZCA9IFtdOyAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHN0YXRlUGFyYW1zLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlc3RTZXJ2aWNlcy5nZXRBdXRvcmVzcG9uZGVyKCRzdGF0ZVBhcmFtcy5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YSA9IHJlcy5hdXRvcmVzcG9uZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiN2YWx1ZURhdGVwaWNrZXJcIikudmFsKHJlcy5hdXRvcmVzcG9uZGVyLnRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuc2VuZGVyTmFtZVNlbGVjdCA9IHJlcy5hdXRvcmVzcG9uZGVyLmlkTmFtZVNlbmRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLnNlbmRlck1haWxTZWxlY3QgPSByZXMuYXV0b3Jlc3BvbmRlci5pZEVtYWlsc2VuZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuc3RhdHVzID0gKHJlcy5hdXRvcmVzcG9uZGVyLnN0YXR1cyA9PSAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuYXV0b3Jlc3BvbmRlci50YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zaG93c3RlcDEgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IGpRdWVyeS5wYXJzZUpTT04ocmVzLmF1dG9yZXNwb25kZXIudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5jb3VudCA9IHJlcy5hdXRvcmVzcG9uZGVyLnF1YW50aXR5dGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLmNvbmRpdGlvbiA9IGpzb24uY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJzID0ganNvbi5maWx0ZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uLnR5cGUgPT0gXCJjb250YWN0bGlzdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNob3dDb250YWN0bGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zZWxlY3RkQ29udGFjdGxpcyA9IGpzb24uY29udGFjdGxpc3RzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsQ29udGFjdGxpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChqc29uLnR5cGUgPT0gXCJzZWdtZW50XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMuc2hvd1NlZ21lbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMuc2VsZWN0ZFNlZ21lbnQgPSBqc29uLnNlZ21lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGxTZWdtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUkVDVVBFUkFNT1MgTEEgSU5GT1JNQUNJT04gREUgT1BUSU9OQURWQU5DRVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzLmF1dG9yZXNwb25kZXIub3B0aW9uQWR2YW5jZSA9PSAxKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3B0aW9uYWR2YW5jZSA9IHJlcy5hdXRvcmVzcG9uZGVyLm9wdGlvbkFkdmFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkdmFuY2Vkb3B0aW9ucyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluc2VydG9wdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2FkdmFuY2Vkb3B0aW9ucycpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjaW5zZXJ0b3B0aW9uJykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRBbGlnbigyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9SRUNVUEVSQU1PUyBMQSBJTkZPUk1BQ0lPTiBERSBDVVNUT01GSUVMRFMgWSBMQSBSRUNPUlJFTU9TXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXMuYXV0b3Jlc3BvbmRlci5jdXN0b21GaWVsZHMpeyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqPSBKU09OLnBhcnNlKHJlcy5hdXRvcmVzcG9uZGVyLmN1c3RvbUZpZWxkcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kaWNlQ0YgPTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihrZXkgPT0gXCJjdXN0b21GaWVsZHNcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVBcnJDRiA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVzdFNlcnZpY2VzLmZpbmRjdXN0b21maWVsZHMoJHNjb3BlLmlkY29udGFjdGxpc3QpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY3VzdG9tZmllbGQgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHg9T2JqZWN0LmtleXModmFsdWVBcnJDRiksaT0wO2k8eC5sZW5ndGgsa2V5Q0Y9eFtpXSx2YWx1ZUNGPXZhbHVlQXJyQ0Zba2V5Q0ZdO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VydmljZXMucHVzaChrZXlDRik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saW1pdGZpZWxkcygyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9JTlNFUlRBTU9TIExPUyBWQUxPUkVTIERFIFRBQlMgREVTUFVFUyBERSBDUkVBUiBMQSBQT1NJQ0lPTiBFTiBMQSBGVU5DSU9OIGxpbWl0ZmllbGRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmlkY3VzdG9tZmllbGQgPSBrZXlDRjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0uZm9udFNpemUgPSB2YWx1ZUNGLmZvbnRTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpXS5jb2xvciA9IHZhbHVlQ0YuY29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmZvbnRXZWlnaHQgPSB2YWx1ZUNGLmZvbnRXZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmZvbnRTdHlsZSA9IHZhbHVlQ0YuZm9udFN0eWxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpXS50ZXh0RGVjb3JhdGlvbiA9IHZhbHVlQ0YudGV4dERlY29yYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmZvbnRGYW1pbHkgPSB2YWx1ZUNGLmZvbnRGYW1pbHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3NlcnZpY2VzXCIpLnZhbCgkc2NvcGUuc2VydmljZXMpLnRyaWdnZXIoXCJjaGFuZ2Uuc2VsZWN0MlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5zZXJ0b3B0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihrZXkgPT0gXCJpZENGbWl4ZWRcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaWRDUG1peGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGtleSA9PSBcInRleHRBbGlnblwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRleHRBbGlnbiA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlID09IFwibGVmdFwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dEFsaWduID0gXCJsZWZ0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluZm9MZWZ0ID0gXCJpbmZvLWludmVydGVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZih2YWx1ZSA9PSBcImNlbnRlclwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5mb0NlbnRlciA9IFwiaW5mby1pbnZlcnRlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYodmFsdWUgPT0gXCJyaWdodFwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dEFsaWduID0gXCJyaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbmZvUmlnaHQgPSBcImluZm8taW52ZXJ0ZWRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzLmF1dG9yZXNwb25kZXIuYXV0b3Jlc3BvbmRlcmNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYm9vbEVkaXRvcnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYm9vbEVkaXRvcnMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sUHJldmlldygkc3RhdGVQYXJhbXMuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRVcmwgPSByZXMuYXV0b3Jlc3BvbmRlci5hdXRvcmVzcG9uZGVyY29udGVudC51cmw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMgPSB7c2VsZWN0ZENvbnRhY3RsaXM6IFtdfTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2VlcyA9IHtzZWxlY3RkU2VnbWVudDogW119O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNob3dTZWdtZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zaG93c3RlcDEgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNob3dDb250YWN0bGlzdCA9IHRydWU7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKCcjZGF0ZUluaXRpYWwnKS5kYXRldGltZXBpY2tlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogJ2hoOm1tJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U6ICdlcydcclxuICAgICAgICAgICAgICAgICAgICB9KS5vbignY2hhbmdlRGF0ZScsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVBdXRvcmVzcG9uZGVyID0gZnVuY3Rpb24gKCkgey8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9WQUxJREFNT1MgUVVFIFNFIEhBWUEgRUxFR0lETyBVTkEgUExBTlRJTExBIEFOVEVTIERFIEdVQVJEQVIgTEEgQVVUT1JFU1BVRVNUQVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUuYm9vbEVkaXRvcnMgPT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKFwiUG9yIGZhdm9yIHNlbGVjY2lvbmUgdW5hIHBsYW50aWxsYS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9ICQoJyNmcmFtZScpLmNvbnRlbnRzKCkuZmluZCgnYm9keScpLmh0bWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhdHQgPSBuZXcgUmVnRXhwKCRzY29wZS5taXhlZEZpZWxkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlYXJjaFNUUiA9IHBhdHQudGVzdCh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzZWFyY2hTVFIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihcIlBvciBmYXZvciBpbmdyZXNhIGVsIG5vbWJyZSBkZWwgY2FtcG8gcGVyc29uYWxpemFkbyBlbiBsYSBwbGFudGlsbGEuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5vcHRpb25hZHZhbmNlICE9IDAgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLnNlcnZpY2VzLmxlbmd0aCA+PSAyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5vcHRpb25BZHZhbmNlID0gJHNjb3BlLm9wdGlvbmFkdmFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS5kYXRhLmN1c3RvbUZpZWxkcyl7Ly9FTlRSQSBDVUFORE8gRVNUQSBDUkVBTkRPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmN1c3RvbUZpZWxkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNley8vRU5UUkEgQ1VBTkRPIEVTVEEgRURJVEFORE9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuY3VzdG9tRmllbGRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUkVDT1JSRU1PUyBFTCBBUlJFR0xPIERFIFRBQlMgUEFSQSBFWFRSQUVSIExBIElORk8gTkVDRVNBUklBIFBBUkEgRUwgSlNPTlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgJHNjb3BlLnRhYnMubGVuZ3RoOyBpKyspe1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU0kgRUwgVEFNQcORTyBERSBGVUVOVEUgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIDEyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUudGFic1tpXS5mb250U2l6ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpXS5mb250U2l6ZSA9IFwiMTJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIEVMIENPTE9SIE5PIEZVRSBTRUxFQ0NJT05BRE8gUE9ORU1PUyBQT1IgREVGRUNUTyBORUdST1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0uY29sb3Ipe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0uY29sb3IgPSBcIiMwMDAwMDBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIE5FR1JJVEEgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIFVOU0VUXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUudGFic1tpXS5mb250V2VpZ2h0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmZvbnRXZWlnaHQgPSBcInVuc2V0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9TSSBDVVJTSVZBIE5PIEZVRSBTRUxFQ0NJT05BRE8gUE9ORU1PUyBQT1IgREVGRUNUTyBVTlNFVFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0uZm9udFN0eWxlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmZvbnRTdHlsZSA9IFwidW5zZXRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIFNVQlJBWUFETyBOTyBGVUUgU0VMRUNDSU9OQURPIFBPTkVNT1MgUE9SIERFRkVDVE8gTk9ORVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0udGV4dERlY29yYXRpb24pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0udGV4dERlY29yYXRpb24gPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIFRJUE8gREUgTEVUUkEgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIElOSEVSSVRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS50YWJzW2ldLmZvbnRGYW1pbHkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0uZm9udEZhbWlseSA9IFwiaW5oZXJpdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJHNjb3BlLnRhYnNbaV0uaWRjdXN0b21maWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jdXN0b21GaWVsZHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRDRiA6ICRzY29wZS50YWJzW2ldLmlkY3VzdG9tZmllbGQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6ICRzY29wZS50YWJzW2ldLmZvbnRTaXplLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJHNjb3BlLnRhYnNbaV0uY29sb3IsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICRzY29wZS50YWJzW2ldLmZvbnRXZWlnaHQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogJHNjb3BlLnRhYnNbaV0uZm9udFN0eWxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHREZWNvcmF0aW9uOiAkc2NvcGUudGFic1tpXS50ZXh0RGVjb3JhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAkc2NvcGUudGFic1tpXS5mb250RmFtaWx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS50ZXh0QWxpZ24gPSAkc2NvcGUudGV4dEFsaWduO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS5yZXNDUCAmJiAkc2NvcGUuaWRDUG1peGVkID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5pZENGbWl4ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS5yZXNDUCAmJiAkc2NvcGUuaWRDUG1peGVkICE9IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5pZENGbWl4ID0gJHNjb3BlLmlkQ1BtaXhlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuaWRDRm1peCA9ICRzY29wZS5yZXNDUC5pZEN1c3RvbWZpZWxkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoXCJQYXJhIGNyZWFyIGF1dHJlc3B1ZXN0YSBjb24gb3BjaW9uZXMgYXZhbnphZGFzIGRlYmUgc2VsZWNjaW9uYXIgYWwgbWVub3MgMiBjYW1wb3MgcGVyc29uYWxpemFkb3MuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmN1c3RvbUZpZWxkcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuYWRkcmVzc2VlcyA9ICRzY29wZS5hZGRyZXNzZWVzOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEudGltZSA9ICQoXCIjdmFsdWVEYXRlcGlja2VyXCIpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5maWx0ZXJzID0gJHNjb3BlLmZpbHRlcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmNvbmRpdGlvbiA9ICRzY29wZS5hZGRyZXNzZWVzLmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkQXV0b3Jlc3BvbmRlciA9ICRzdGF0ZVBhcmFtcy5pZCA/ICRzdGF0ZVBhcmFtcy5pZCA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZXN0U2VydmljZXMuY3JlYXRlQXV0b3Jlc3BvbmRlcigkc2NvcGUuZGF0YSwgaWRBdXRvcmVzcG9uZGVyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc3VjY2VzcyhyZXNbJ21lc3NhZ2UnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSBmdWxsVXJsQmFzZSArIHRlbXBsYXRlQmFzZSArIFwiIy9cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xlYXJTZWxlY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLmNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkQ29udGFjdGxpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkU2VnbWVudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zZWxlY3RkQ29udGFjdGxpcyA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNlbGVjdGRTZWdtZW50ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluc2VydG9wdGlvbj1mYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRDb250YWN0bGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMgPSB7c2VsZWN0ZFNlZ21lbnQ6IFtdfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlZ21lbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb250YWN0bGlzdHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMuc2hvd3N0ZXAxID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLmNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMuc2hvd1NlZ21lbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zaG93Q29udGFjdGxpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBydWViYSA9IHVuZGVmaW5lZDsgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsQ29udGFjdGxpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldEFsbFNlZ21lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGxDb250YWN0bGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVzdFNlcnZpY2VzLmdldENvbnRhY3RsaXN0KCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRhY3RsaXN0cyA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldFNlZ21lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzID0ge3NlbGVjdGRDb250YWN0bGlzOiBbXX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWdtZW50cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29udGFjdGxpc3RzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNob3dzdGVwMSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcnVlYmEgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcnVlYmEyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zZWxlY3RkQ29udGFjdGxpcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zZWxlY3RkU2VnbWVudCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zaG93U2VnbWVudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zaG93Q29udGFjdGxpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsU2VnbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsQ29udGFjdGxpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsU2VnbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVzdFNlcnZpY2VzLmdldFNlZ21lbnQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VnbWVudHMgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0QWN0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY291bnRDb250YWN0cyhcImNvbnRhY3RsaXN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RBY3Rpb25TZWdtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY291bnRDb250YWN0cyhcInNlZ21lbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsbFNlZ21lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNhYmxlZFNlZ21lbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zZWxlY3RkU2VnbWVudCA9ICRzY29wZS5zZWdtZW50cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvdW50Q29udGFjdHMoXCJzZWdtZW50XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hbGxDb250YWN0bGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkQ29udGFjdGxpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zZWxlY3RkQ29udGFjdGxpcyA9ICRzY29wZS5jb250YWN0bGlzdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb3VudENvbnRhY3RzKFwiY29udGFjdGxpc3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvdW50Q29udGFjdHMgPSBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnQ6ICRzY29wZS5hZGRyZXNzZWVzLnNlbGVjdGRTZWdtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFjdGxpc3Q6ICRzY29wZS5hZGRyZXNzZWVzLnNlbGVjdGRDb250YWN0bGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyczogJHNjb3BlLmZpbHRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb246ICRzY29wZS5hZGRyZXNzZWVzLmNvbmRpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkTWFpbDogJHNjb3BlLmlkTWFpbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZXN0U2VydmljZXMuY291bnRDb250YWN0KGRhdGEpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLmNvdW50ID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0ZW1haWxuYW1lKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZXN0U2VydmljZXMuZ2V0ZW1haWxuYW1lKCkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxuYW1lID0gcmVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldGVtYWlsc2VuZCgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVzdFNlcnZpY2VzLmdldGVtYWlsc2VuZCgpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsc2VuZCA9IHJlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBnZXRlbWFpbG5hbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBnZXRlbWFpbHNlbmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dJbnB1dE5hbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1NlbGVjdE5hbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93SWNvbnNOYW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0ljb25zU2F2ZU5hbWUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZVN0YXR1c0lucHV0TmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuc2hvd0lucHV0TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dJbnB1dE5hbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dTZWxlY3ROYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0ljb25zTmFtZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dJY29uc1NhdmVOYW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93SW5wdXROYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1NlbGVjdE5hbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dJY29uc05hbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dJY29uc1NhdmVOYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0lucHV0RW1haWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1NlbGVjdEVtYWlsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0ljb25zRW1haWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93SWNvbnNTYXZlRW1haWwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZVN0YXR1c0lucHV0RW1haWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLnNob3dJbnB1dEVtYWlsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0lucHV0RW1haWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dTZWxlY3RFbWFpbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dJY29uc0VtYWlsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0ljb25zU2F2ZUVtYWlsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93SW5wdXRFbWFpbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dTZWxlY3RFbWFpbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0ljb25zRW1haWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dJY29uc1NhdmVFbWFpbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtuYW1lOiAkc2NvcGUuc2VuZGVyTmFtZX07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZXN0U2VydmljZXMuYWRkRW1haWxOYW1lKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5zdWNjZXNzKHJlc1snbXNnJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbmRlck5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0ZW1haWxuYW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlU3RhdHVzSW5wdXROYW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5zZW5kZXJOYW1lU2VsZWN0ID0gcmVzWydpZE5hbWVTZW5kZXInXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVFbWFpbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7ZW1haWw6ICRzY29wZS5zZW5kZXJNYWlsfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlc3RTZXJ2aWNlcy5hZGRFbWFpbFNlbmRlcihkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc3VjY2VzcyhyZXNbJ21zZyddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZW5kZXJNYWlsID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldGVtYWlsc2VuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZVN0YXR1c0lucHV0RW1haWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLnNlbmRlck1haWxTZWxlY3QgPSByZXNbJ2lkRW1haWxzZW5kZXInXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9wZW5NYWlsVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUub3B0aW9uYWR2YW5jZSAhPSAwICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5zZXJ2aWNlcy5sZW5ndGggPj0gMil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEub3B0aW9uQWR2YW5jZSA9ICRzY29wZS5vcHRpb25hZHZhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUuZGF0YS5jdXN0b21GaWVsZHMpey8vRU5UUkEgQ1VBTkRPIEVTVEEgQ1JFQU5ET1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jdXN0b21GaWVsZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsvL0VOVFJBIENVQU5ETyBFU1RBIEVESVRBTkRPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmN1c3RvbUZpZWxkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1JFQ09SUkVNT1MgRUwgQVJSRUdMTyBERSBUQUJTIFBBUkEgRVhUUkFFUiBMQSBJTkZPIE5FQ0VTQVJJQSBQQVJBIEVMIEpTT05cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8ICRzY29wZS50YWJzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU0kgRUwgVEFNQcORTyBERSBGVUVOVEUgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIDEyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUudGFic1tpXS5mb250U2l6ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpXS5mb250U2l6ZSA9IFwiMTJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIEVMIENPTE9SIE5PIEZVRSBTRUxFQ0NJT05BRE8gUE9ORU1PUyBQT1IgREVGRUNUTyBORUdST1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0uY29sb3Ipe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0uY29sb3IgPSBcIiMwMDAwMDBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIE5FR1JJVEEgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIFVOU0VUXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUudGFic1tpXS5mb250V2VpZ2h0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmZvbnRXZWlnaHQgPSBcInVuc2V0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9TSSBDVVJTSVZBIE5PIEZVRSBTRUxFQ0NJT05BRE8gUE9ORU1PUyBQT1IgREVGRUNUTyBVTlNFVFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0uZm9udFN0eWxlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmZvbnRTdHlsZSA9IFwidW5zZXRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIFNVQlJBWUFETyBOTyBGVUUgU0VMRUNDSU9OQURPIFBPTkVNT1MgUE9SIERFRkVDVE8gTk9ORVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0udGV4dERlY29yYXRpb24pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0udGV4dERlY29yYXRpb24gPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIFRJUE8gREUgTEVUUkEgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIElOSEVSSVRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS50YWJzW2ldLmZvbnRGYW1pbHkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0uZm9udEZhbWlseSA9IFwiaW5oZXJpdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJHNjb3BlLnRhYnNbaV0uaWRjdXN0b21maWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jdXN0b21GaWVsZHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRDRiA6ICRzY29wZS50YWJzW2ldLmlkY3VzdG9tZmllbGQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6ICRzY29wZS50YWJzW2ldLmZvbnRTaXplLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJHNjb3BlLnRhYnNbaV0uY29sb3IsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICRzY29wZS50YWJzW2ldLmZvbnRXZWlnaHQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogJHNjb3BlLnRhYnNbaV0uZm9udFN0eWxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHREZWNvcmF0aW9uOiAkc2NvcGUudGFic1tpXS50ZXh0RGVjb3JhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAkc2NvcGUudGFic1tpXS5mb250RmFtaWx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS50ZXh0QWxpZ24gPSAkc2NvcGUudGV4dEFsaWduO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUucmVzQ1AgJiYgJHNjb3BlLmlkQ1BtaXhlZCA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuaWRDRm1peCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUucmVzQ1AgJiYgJHNjb3BlLmlkQ1BtaXhlZCAhPSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuaWRDRm1peCA9ICRzY29wZS5pZENQbWl4ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmlkQ0ZtaXggPSAkc2NvcGUucmVzQ1AuaWRDdXN0b21maWVsZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoXCJQYXJhIGNyZWFyIGF1dHJlc3B1ZXN0YSBjb24gb3BjaW9uZXMgYXZhbnphZGFzIGRlYmUgc2VsZWNjaW9uYXIgYWwgbWVub3MgMiBjYW1wb3MgcGVyc29uYWxpemFkb3MuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmN1c3RvbUZpZWxkcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmFkZHJlc3NlZXMgPSAkc2NvcGUuYWRkcmVzc2VlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuZmlsdGVycyA9ICRzY29wZS5maWx0ZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jb25kaXRpb24gPSAkc2NvcGUuYWRkcmVzc2Vlcy5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLnRpbWUgPSAkKFwiI3ZhbHVlRGF0ZXBpY2tlclwiKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkQXV0b3Jlc3BvbmRlciA9ICRzdGF0ZVBhcmFtcy5pZCA/ICRzdGF0ZVBhcmFtcy5pZCA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZXN0U2VydmljZXMuY3JlYXRlQXV0b3Jlc3BvbmRlcigkc2NvcGUuZGF0YSwgaWRBdXRvcmVzcG9uZGVyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IGZ1bGxVcmxCYXNlICsgJ21haWx0ZW1wbGF0ZSMvc2VsZWN0YXV0b3Jlc3BvbmRlci8nICsgcmVzLmF1dG9yZXNwb25kZXIuaWRBdXRvcmVzcG9uZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3BlbkNvbnRlbnRFZGl0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUub3B0aW9uYWR2YW5jZSAhPSAwICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5zZXJ2aWNlcy5sZW5ndGggPj0gMil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEub3B0aW9uQWR2YW5jZSA9ICRzY29wZS5vcHRpb25hZHZhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUuZGF0YS5jdXN0b21GaWVsZHMpey8vRU5UUkEgQ1VBTkRPIEVTVEEgQ1JFQU5ET1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jdXN0b21GaWVsZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsvL0VOVFJBIENVQU5ETyBFU1RBIEVESVRBTkRPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmN1c3RvbUZpZWxkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1JFQ09SUkVNT1MgRUwgQVJSRUdMTyBERSBUQUJTIFBBUkEgRVhUUkFFUiBMQSBJTkZPIE5FQ0VTQVJJQSBQQVJBIEVMIEpTT05cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8ICRzY29wZS50YWJzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU0kgRUwgVEFNQcORTyBERSBGVUVOVEUgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIDEyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUudGFic1tpXS5mb250U2l6ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpXS5mb250U2l6ZSA9IFwiMTJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIEVMIENPTE9SIE5PIEZVRSBTRUxFQ0NJT05BRE8gUE9ORU1PUyBQT1IgREVGRUNUTyBORUdST1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0uY29sb3Ipe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0uY29sb3IgPSBcIiMwMDAwMDBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIE5FR1JJVEEgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIFVOU0VUXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUudGFic1tpXS5mb250V2VpZ2h0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmZvbnRXZWlnaHQgPSBcInVuc2V0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9TSSBDVVJTSVZBIE5PIEZVRSBTRUxFQ0NJT05BRE8gUE9ORU1PUyBQT1IgREVGRUNUTyBVTlNFVFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0uZm9udFN0eWxlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmZvbnRTdHlsZSA9IFwidW5zZXRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIFNVQlJBWUFETyBOTyBGVUUgU0VMRUNDSU9OQURPIFBPTkVNT1MgUE9SIERFRkVDVE8gTk9ORVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0udGV4dERlY29yYXRpb24pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0udGV4dERlY29yYXRpb24gPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIFRJUE8gREUgTEVUUkEgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIElOSEVSSVRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS50YWJzW2ldLmZvbnRGYW1pbHkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0uZm9udEZhbWlseSA9IFwiaW5oZXJpdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJHNjb3BlLnRhYnNbaV0uaWRjdXN0b21maWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jdXN0b21GaWVsZHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRDRiA6ICRzY29wZS50YWJzW2ldLmlkY3VzdG9tZmllbGQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6ICRzY29wZS50YWJzW2ldLmZvbnRTaXplLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJHNjb3BlLnRhYnNbaV0uY29sb3IsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICRzY29wZS50YWJzW2ldLmZvbnRXZWlnaHQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogJHNjb3BlLnRhYnNbaV0uZm9udFN0eWxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHREZWNvcmF0aW9uOiAkc2NvcGUudGFic1tpXS50ZXh0RGVjb3JhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAkc2NvcGUudGFic1tpXS5mb250RmFtaWx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS50ZXh0QWxpZ24gPSAkc2NvcGUudGV4dEFsaWduO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUucmVzQ1AgJiYgJHNjb3BlLmlkQ1BtaXhlZCA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuaWRDRm1peCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUucmVzQ1AgJiYgJHNjb3BlLmlkQ1BtaXhlZCAhPSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuaWRDRm1peCA9ICRzY29wZS5pZENQbWl4ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmlkQ0ZtaXggPSAkc2NvcGUucmVzQ1AuaWRDdXN0b21maWVsZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKFwiUGFyYSBjcmVhciBhdXRyZXNwdWVzdGEgY29uIG9wY2lvbmVzIGF2YW56YWRhcyBkZWJlIHNlbGVjY2lvbmFyIGFsIG1lbm9zIDIgY2FtcG9zIHBlcnNvbmFsaXphZG9zLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jdXN0b21GaWVsZHMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5hZGRyZXNzZWVzID0gJHNjb3BlLmFkZHJlc3NlZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmZpbHRlcnMgPSAkc2NvcGUuZmlsdGVycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuY29uZGl0aW9uID0gJHNjb3BlLmFkZHJlc3NlZXMuY29uZGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS50aW1lID0gJChcIiN2YWx1ZURhdGVwaWNrZXJcIikudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZEF1dG9yZXNwb25kZXIgPSAkc3RhdGVQYXJhbXMuaWQgPyAkc3RhdGVQYXJhbXMuaWQgOiAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVzdFNlcnZpY2VzLmNyZWF0ZUF1dG9yZXNwb25kZXIoJHNjb3BlLmRhdGEsIGlkQXV0b3Jlc3BvbmRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSBmdWxsVXJsQmFzZSArIHRlbXBsYXRlQmFzZSArICcvY29udGVudGVkaXRvci8nICsgcmVzLmF1dG9yZXNwb25kZXIuaWRBdXRvcmVzcG9uZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3BlbkVkaXRvckh0bWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUub3B0aW9uYWR2YW5jZSAhPSAwICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5zZXJ2aWNlcy5sZW5ndGggPj0gMil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEub3B0aW9uQWR2YW5jZSA9ICRzY29wZS5vcHRpb25hZHZhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUuZGF0YS5jdXN0b21GaWVsZHMpey8vRU5UUkEgQ1VBTkRPIEVTVEEgQ1JFQU5ET1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jdXN0b21GaWVsZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsvL0VOVFJBIENVQU5ETyBFU1RBIEVESVRBTkRPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmN1c3RvbUZpZWxkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1JFQ09SUkVNT1MgRUwgQVJSRUdMTyBERSBUQUJTIFBBUkEgRVhUUkFFUiBMQSBJTkZPIE5FQ0VTQVJJQSBQQVJBIEVMIEpTT05cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8ICRzY29wZS50YWJzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU0kgRUwgVEFNQcORTyBERSBGVUVOVEUgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIDEyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUudGFic1tpXS5mb250U2l6ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpXS5mb250U2l6ZSA9IFwiMTJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIEVMIENPTE9SIE5PIEZVRSBTRUxFQ0NJT05BRE8gUE9ORU1PUyBQT1IgREVGRUNUTyBORUdST1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0uY29sb3Ipe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0uY29sb3IgPSBcIiMwMDAwMDBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIE5FR1JJVEEgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIFVOU0VUXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUudGFic1tpXS5mb250V2VpZ2h0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmZvbnRXZWlnaHQgPSBcInVuc2V0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9TSSBDVVJTSVZBIE5PIEZVRSBTRUxFQ0NJT05BRE8gUE9ORU1PUyBQT1IgREVGRUNUTyBVTlNFVFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0uZm9udFN0eWxlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmZvbnRTdHlsZSA9IFwidW5zZXRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIFNVQlJBWUFETyBOTyBGVUUgU0VMRUNDSU9OQURPIFBPTkVNT1MgUE9SIERFRkVDVE8gTk9ORVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0udGV4dERlY29yYXRpb24pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0udGV4dERlY29yYXRpb24gPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIFRJUE8gREUgTEVUUkEgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIElOSEVSSVRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS50YWJzW2ldLmZvbnRGYW1pbHkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0uZm9udEZhbWlseSA9IFwiaW5oZXJpdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJHNjb3BlLnRhYnNbaV0uaWRjdXN0b21maWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jdXN0b21GaWVsZHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRDRiA6ICRzY29wZS50YWJzW2ldLmlkY3VzdG9tZmllbGQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6ICRzY29wZS50YWJzW2ldLmZvbnRTaXplLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJHNjb3BlLnRhYnNbaV0uY29sb3IsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICRzY29wZS50YWJzW2ldLmZvbnRXZWlnaHQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogJHNjb3BlLnRhYnNbaV0uZm9udFN0eWxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHREZWNvcmF0aW9uOiAkc2NvcGUudGFic1tpXS50ZXh0RGVjb3JhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAkc2NvcGUudGFic1tpXS5mb250RmFtaWx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS50ZXh0QWxpZ24gPSAkc2NvcGUudGV4dEFsaWduO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUucmVzQ1AgJiYgJHNjb3BlLmlkQ1BtaXhlZCA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuaWRDRm1peCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUucmVzQ1AgJiYgJHNjb3BlLmlkQ1BtaXhlZCAhPSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuaWRDRm1peCA9ICRzY29wZS5pZENQbWl4ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmlkQ0ZtaXggPSAkc2NvcGUucmVzQ1AuaWRDdXN0b21maWVsZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihcIlBhcmEgY3JlYXIgYXV0cmVzcHVlc3RhIGNvbiBvcGNpb25lcyBhdmFuemFkYXMgZGViZSBzZWxlY2Npb25hciBhbCBtZW5vcyAyIGNhbXBvcyBwZXJzb25hbGl6YWRvcy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuY3VzdG9tRmllbGRzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuYWRkcmVzc2VlcyA9ICRzY29wZS5hZGRyZXNzZWVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5maWx0ZXJzID0gJHNjb3BlLmZpbHRlcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmNvbmRpdGlvbiA9ICRzY29wZS5hZGRyZXNzZWVzLmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEudGltZSA9ICQoXCIjdmFsdWVEYXRlcGlja2VyXCIpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWRBdXRvcmVzcG9uZGVyID0gJHN0YXRlUGFyYW1zLmlkID8gJHN0YXRlUGFyYW1zLmlkIDogMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlc3RTZXJ2aWNlcy5jcmVhdGVBdXRvcmVzcG9uZGVyKCRzY29wZS5kYXRhLCBpZEF1dG9yZXNwb25kZXIpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZnVsbFVybEJhc2UgKyB0ZW1wbGF0ZUJhc2UgKyAnL2NvbnRlbnRodG1sLycgKyByZXMuYXV0b3Jlc3BvbmRlci5pZEF1dG9yZXNwb25kZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0Q29udGVudEVkaXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5vcHRpb25hZHZhbmNlICE9IDAgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLnNlcnZpY2VzLmxlbmd0aCA+PSAyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5vcHRpb25BZHZhbmNlID0gJHNjb3BlLm9wdGlvbmFkdmFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS5kYXRhLmN1c3RvbUZpZWxkcyl7Ly9FTlRSQSBDVUFORE8gRVNUQSBDUkVBTkRPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmN1c3RvbUZpZWxkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNley8vRU5UUkEgQ1VBTkRPIEVTVEEgRURJVEFORE9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuY3VzdG9tRmllbGRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUkVDT1JSRU1PUyBFTCBBUlJFR0xPIERFIFRBQlMgUEFSQSBFWFRSQUVSIExBIElORk8gTkVDRVNBUklBIFBBUkEgRUwgSlNPTlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgJHNjb3BlLnRhYnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9TSSBFTCBUQU1Bw5FPIERFIEZVRU5URSBOTyBGVUUgU0VMRUNDSU9OQURPIFBPTkVNT1MgUE9SIERFRkVDVE8gMTJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS50YWJzW2ldLmZvbnRTaXplKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50YWJzW2ldLmZvbnRTaXplID0gXCIxMlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU0kgRUwgQ09MT1IgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIE5FR1JPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUudGFic1tpXS5jb2xvcil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpXS5jb2xvciA9IFwiIzAwMDAwMFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU0kgTkVHUklUQSBOTyBGVUUgU0VMRUNDSU9OQURPIFBPTkVNT1MgUE9SIERFRkVDVE8gVU5TRVRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS50YWJzW2ldLmZvbnRXZWlnaHQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0uZm9udFdlaWdodCA9IFwidW5zZXRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NJIENVUlNJVkEgTk8gRlVFIFNFTEVDQ0lPTkFETyBQT05FTU9TIFBPUiBERUZFQ1RPIFVOU0VUXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUudGFic1tpXS5mb250U3R5bGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRhYnNbaV0uZm9udFN0eWxlID0gXCJ1bnNldFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU0kgU1VCUkFZQURPIE5PIEZVRSBTRUxFQ0NJT05BRE8gUE9ORU1PUyBQT1IgREVGRUNUTyBOT05FXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUudGFic1tpXS50ZXh0RGVjb3JhdGlvbil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpXS50ZXh0RGVjb3JhdGlvbiA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU0kgVElQTyBERSBMRVRSQSBOTyBGVUUgU0VMRUNDSU9OQURPIFBPTkVNT1MgUE9SIERFRkVDVE8gSU5IRVJJVFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJHNjb3BlLnRhYnNbaV0uZm9udEZhbWlseSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFic1tpXS5mb250RmFtaWx5ID0gXCJpbmhlcml0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUudGFic1tpXS5pZGN1c3RvbWZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmN1c3RvbUZpZWxkcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZENGIDogJHNjb3BlLnRhYnNbaV0uaWRjdXN0b21maWVsZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogJHNjb3BlLnRhYnNbaV0uZm9udFNpemUsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAkc2NvcGUudGFic1tpXS5jb2xvciwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodDogJHNjb3BlLnRhYnNbaV0uZm9udFdlaWdodCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFN0eWxlOiAkc2NvcGUudGFic1tpXS5mb250U3R5bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dERlY29yYXRpb246ICRzY29wZS50YWJzW2ldLnRleHREZWNvcmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICRzY29wZS50YWJzW2ldLmZvbnRGYW1pbHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLnRleHRBbGlnbiA9ICRzY29wZS50ZXh0QWxpZ247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS5yZXNDUCAmJiAkc2NvcGUuaWRDUG1peGVkID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5pZENGbWl4ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS5yZXNDUCAmJiAkc2NvcGUuaWRDUG1peGVkICE9IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5pZENGbWl4ID0gJHNjb3BlLmlkQ1BtaXhlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuaWRDRm1peCA9ICRzY29wZS5yZXNDUC5pZEN1c3RvbWZpZWxkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKFwiUGFyYSBjcmVhciBhdXRyZXNwdWVzdGEgY29uIG9wY2lvbmVzIGF2YW56YWRhcyBkZWJlIHNlbGVjY2lvbmFyIGFsIG1lbm9zIDIgY2FtcG9zIHBlcnNvbmFsaXphZG9zLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jdXN0b21GaWVsZHMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5hZGRyZXNzZWVzID0gJHNjb3BlLmFkZHJlc3NlZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLnRpbWUgPSAkKFwiI3ZhbHVlRGF0ZXBpY2tlclwiKS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlc3RTZXJ2aWNlcy5jcmVhdGVBdXRvcmVzcG9uZGVyKCRzY29wZS5kYXRhLCAkc3RhdGVQYXJhbXMuaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZnVsbFVybEJhc2UgKyAkc2NvcGUuZGF0YS5hdXRvcmVzcG9uZGVyY29udGVudC51cmwgKyByZXMuYXV0b3Jlc3BvbmRlci5pZEF1dG9yZXNwb25kZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRpcGVGaWx0ZXJzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7aWQ6IDEsIG5hbWU6IFwiRW52aWFyIGEgY29udGFjdG9zIHF1ZSBoYXlhbiByZWNpYmlkbyB1biBjb3JyZW9cIn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtpZDogMiwgbmFtZTogXCJFbnZpYXIgYSBjb250YWN0b3MgcXVlIGhheWFuIGFiaWVydG8gdW4gY29ycmVvXCJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7aWQ6IDMsIG5hbWU6IFwiRW52aWFyIGEgY29udGFjdG9zIHF1ZSBoYXlhbiBoZWNobyBjbGljIHVuIGVubGFjZVwifVxyXG4gICAgICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdE1haWxGaWx0ZXIgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkudHlwZUZpbHRlcnMgPT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVzdFNlcnZpY2VzLmdldExpbmtzQnlNYWlsKGtleS5tYWlsU2VsZWN0ZWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkubGlua3MgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5hZGRyZXNzZWVzLnNob3dDb250YWN0bGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb3VudENvbnRhY3RzKFwiY29udGFjdGxpc3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb3VudENvbnRhY3RzKFwic2VnbWVudFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0TGlua0ZpbHRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuYWRkcmVzc2Vlcy5zaG93Q29udGFjdGxpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb3VudENvbnRhY3RzKFwiY29udGFjdGxpc3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY291bnRDb250YWN0cyhcInNlZ21lbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0VHlwZUZpbHRlciA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5Lm1haWxTZWxlY3RlZCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkubGlua1NlbGVjdGVkID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleS5tYWlsID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleS5saW5rcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZXN0U2VydmljZXMuZ2V0TWFpbEZpbHRlcnMoa2V5LnR5cGVGaWx0ZXJzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkubWFpbCA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGtleS50eXBlRmlsdGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZEZpbHRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMuY29uZGl0aW9uID0gXCJhbGxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlcnMucHVzaCh7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbW92ZUZpbHRlcnMgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuYWRkcmVzc2Vlcy5zaG93Q29udGFjdGxpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb3VudENvbnRhY3RzKFwiY29udGFjdGxpc3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY291bnRDb250YWN0cyhcInNlZ21lbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIH1dKVxyXG4gICAgICAgICAgICAuY29udHJvbGxlcignYmlydGhkYXlTbXNDb250cm9sbGVyJywgWyckcScsICckc2NvcGUnLCAnUmVzdFNlcnZpY2VzJywgJ25vdGlmaWNhdGlvblNlcnZpY2UnLCAnJHdpbmRvdycsICckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbiAoJHEsICRzY29wZSwgUmVzdFNlcnZpY2VzLCBub3RpZmljYXRpb25TZXJ2aWNlLCAkd2luZG93LCAkc3RhdGVQYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuYmlydGhkYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuc3RhdHVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jbGFzcyA9IFwic21zXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEubWVzc2FnZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUuZGF0YS5jYXRlZ29yeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmlkU21zQ2F0ZWdvcnkgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLnNjaGVkdWxlZGF0ZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50YWdzID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYm9vbEVkaXRvcnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLm1vcmVjYXJhY3RlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmRheXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vbmRheTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFR1ZXNkYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBXZWRuZXNkYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBUaHVyc2RheTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZyaWRheTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNhdHVyZGF5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgU3VuZGF5OiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2MuY2F0ZWdvcnkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2VlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnJlc3VsdHMgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHN0YXRlUGFyYW1zLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlc3RTZXJ2aWNlcy5nZXRBdXRvcmVzcG9uZGVyKCRzdGF0ZVBhcmFtcy5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YSA9IHJlcy5hdXRvcmVzcG9uZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiN2YWx1ZURhdGVwaWNrZXJcIikudmFsKHJlcy5hdXRvcmVzcG9uZGVyLnRpbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLnN0YXR1cyA9IChyZXMuYXV0b3Jlc3BvbmRlci5zdGF0dXMgPT0gMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5hdXRvcmVzcG9uZGVyLnRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNob3dzdGVwMSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0galF1ZXJ5LnBhcnNlSlNPTihyZXMuYXV0b3Jlc3BvbmRlci50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnJlc3VsdHMgPSByZXMuYXV0b3Jlc3BvbmRlci5xdWFudGl0eXRhcmdldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5jb25kaXRpb24gPSBqc29uLmNvbmRpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVycyA9IGpzb24uZmlsdGVycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi50eXBlID09IFwiY29udGFjdGxpc3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zaG93Q29udGFjdGxpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMuc2VsZWN0ZENvbnRhY3RsaXMgPSBqc29uLmNvbnRhY3RsaXN0cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldEFsbENvbnRhY3RsaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoanNvbi50eXBlID09IFwic2VnbWVudFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNob3dTZWdtZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNlbGVjdGRTZWdtZW50ID0ganNvbi5zZWdtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsU2VnbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcy5hdXRvcmVzcG9uZGVyLmF1dG9yZXNwb25kZXJjb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJvb2xFZGl0b3JzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJvb2xFZGl0b3JzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbFByZXZpZXcoJHN0YXRlUGFyYW1zLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0VXJsID0gcmVzLmF1dG9yZXNwb25kZXIuYXV0b3Jlc3BvbmRlcmNvbnRlbnQudXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzID0ge3NlbGVjdGRDb250YWN0bGlzOiBbXX07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMgPSB7c2VsZWN0ZFNlZ21lbnQ6IFtdfTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zaG93U2VnbWVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMuc2hvd3N0ZXAxID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zaG93Q29udGFjdGxpc3QgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3BlTW9kYWxNb3JlQ2EgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCcjbW9yZWNhcmFjdGVyJykucHJvcCgnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjYWxlcnRNb3JlQ2FyYWN0ZXInKS5yZW1vdmVDbGFzcygnbW9kYWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNhbGVydE1vcmVDYXJhY3RlcicpLmFkZENsYXNzKCdkaWFsb2cgZGlhbG9nLS1vcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoJyNkYXRlSW5pdGlhbCcpLmRhdGV0aW1lcGlja2VyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAnaGg6bW0nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZTogJ2VzJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLm9uKCdjaGFuZ2VEYXRlJywgZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmlydGhkYXRlZnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGF0YS5iaXJ0aGRhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmJpcnRoZGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuZGF5cyA9IHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5iaXJ0aGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuZGF5cyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25kYXk6IHRydWUsIFR1ZXNkYXk6IHRydWUsIFdlZG5lc2RheTogdHJ1ZSwgVGh1cnNkYXk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnJpZGF5OiB0cnVlLCBTYXR1cmRheTogdHJ1ZSwgU3VuZGF5OiB0cnVlfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVBdXRvcmVzcGRlc21zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5hZGRyZXNzZWVzID0gJHNjb3BlLmFkZHJlc3NlZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLnRpbWUgPSAkKFwiI3ZhbHVlRGF0ZXBpY2tlclwiKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuZmlsdGVycyA9ICRzY29wZS5maWx0ZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5jb25kaXRpb24gPSAkc2NvcGUuYWRkcmVzc2Vlcy5jb25kaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZEF1dG9yZXNwb25kZXIgPSAkc3RhdGVQYXJhbXMuaWQgPyAkc3RhdGVQYXJhbXMuaWQgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZXN0U2VydmljZXMuY3JlYXRlQXV0b3Jlc3BkZXNtcygkc2NvcGUuZGF0YSwgaWRBdXRvcmVzcG9uZGVyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLnN1Y2Nlc3MocmVzWydtZXNzYWdlJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZnVsbFVybEJhc2UgKyB0ZW1wbGF0ZUJhc2UgKyBcIiMvXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsZWFyU2VsZWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5yZXN1bHRzID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkQ29udGFjdGxpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkU2VnbWVudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zZWxlY3RkQ29udGFjdGxpcyA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNlbGVjdGRTZWdtZW50ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRDb250YWN0bGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMgPSB7c2VsZWN0ZFNlZ21lbnQ6IFtdfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlZ21lbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb250YWN0bGlzdHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMuc2hvd3N0ZXAxID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnJlc3VsdHMgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zaG93U2VnbWVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNob3dDb250YWN0bGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJ1ZWJhID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsQ29udGFjdGxpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldEFsbFNlZ21lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRBbGxDb250YWN0TGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGxDb250YWN0bGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVzdFNlcnZpY2VzLmdldENvbnRhY3RsaXN0KCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRhY3RsaXN0cyA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldFNlZ21lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzID0ge3NlbGVjdGRDb250YWN0bGlzOiBbXX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWdtZW50cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29udGFjdGxpc3RzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNob3dzdGVwMSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5jb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcnVlYmEgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcnVlYmEyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zZWxlY3RkQ29udGFjdGxpcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zZWxlY3RkU2VnbWVudCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zaG93U2VnbWVudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zaG93Q29udGFjdGxpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsU2VnbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsQ29udGFjdGxpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGxTZWdtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZXN0U2VydmljZXMuZ2V0U2VnbWVudCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWdtZW50cyA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdEFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvdW50Q29udGFjdHMoXCJjb250YWN0bGlzdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RBY3Rpb25TZWdtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY291bnRDb250YWN0cyhcInNlZ21lbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxsU2VnbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkU2VnbWVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNlbGVjdGRTZWdtZW50ID0gJHNjb3BlLnNlZ21lbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY291bnRDb250YWN0cyhcInNlZ21lbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxsQ29udGFjdGxpc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNhYmxlZENvbnRhY3RsaXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NlZXMuc2VsZWN0ZENvbnRhY3RsaXMgPSAkc2NvcGUuY29udGFjdGxpc3RzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY291bnRDb250YWN0cyhcImNvbnRhY3RsaXN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvdW50Q29udGFjdHMgPSBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5yZXN1bHRzID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudDogJHNjb3BlLmFkZHJlc3NlZXMuc2VsZWN0ZFNlZ21lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWN0bGlzdDogJHNjb3BlLmFkZHJlc3NlZXMuc2VsZWN0ZENvbnRhY3RsaXMsXHJcbi8vICAgICAgICAgICAgZmlsdGVyczogJHNjb3BlLmZpbHRlcnMsXHJcbi8vICAgICAgICAgICAgY29uZGl0aW9uOiAkc2NvcGUuYWRkcmVzc2Vlcy5jb25kaXRpb24sXHJcbi8vICAgICAgICAgICAgaWRNYWlsOiAkc2NvcGUuaWRNYWlsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlc3RTZXJ2aWNlcy5jb3VudENvbnRhY3RGcm9tU21zKGRhdGEpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnJlc3VsdHMgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS52YWxpZGF0ZUluTGluZSA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLmludmFsaWRDaGFyYWN0ZXJzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLmV4aXN0VGFncyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy50YWdnZWRNZXNzYWdlID0gJHNjb3BlLmRhdGEubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2MubmV3TWVzc2FnZSA9ICRzY29wZS5kYXRhLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWdzID0gLyUlK1thLXpBLVowLTlfXSslJS87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWdzLnRlc3QoJHNjb3BlLmRhdGEubWVzc2FnZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLmV4aXN0VGFncyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy50YWdnZWRNZXNzYWdlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLm5ld01lc3NhZ2UgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3b3JkcyA9ICRzY29wZS5kYXRhLm1lc3NhZ2Uuc3BsaXQoXCIgXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgY29udCA9IDA7IGNvbnQgPCB3b3Jkcy5sZW5ndGg7IGNvbnQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3b3JkID0gd29yZHNbY29udF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdvcmQyID0gd29yZHNbY29udF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQuc3Vic3RyKDAsIDIpID09IFwiJSVcIiAmJiAod29yZC5zdWJzdHIoLTIpID09IFwiJSVcIiB8fCB3b3JkLnN1YnN0cigtMykgPT0gXCIlJSxcIiB8fCB3b3JkLnN1YnN0cigtMykgPT0gXCIlJS5cIiB8fCB3b3JkLnN1YnN0cigtMykgPT0gXCIlJTtcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZCA9IHdvcmQuc3Vic3RyKDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkMiA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQgPSBcIjxiPjxpPlwiICsgd29yZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQuc3Vic3RyKC0yKSA9PSBcIiUlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQgPSB3b3JkLnN1YnN0cigwLCB3b3JkLmxlbmd0aCAtIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHdvcmQuc3Vic3RyKC0zKSA9PSBcIiUlLFwiIHx8IHdvcmQuc3Vic3RyKC0zKSA9PSBcIiUlLlwiIHx8IHdvcmQuc3Vic3RyKC0zKSA9PSBcIiUlO1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkID0gd29yZC5zdWJzdHIoMCwgd29yZC5sZW5ndGggLSAzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkID0gd29yZCArIFwiPC9pPjwvYj5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArIHdvcmQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy50YWdnZWRNZXNzYWdlICs9IHdvcmQgKyBcIiBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy5uZXdNZXNzYWdlICs9IHdvcmQyICsgXCIgXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkVGFnID0gZnVuY3Rpb24gKHRhZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5kYXRhLm1lc3NhZ2UgPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEubWVzc2FnZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5tZXNzYWdlICs9IHRhZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLm1lc3NhZ2UgKz0gXCIgXCIgKyB0YWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRUYXJnZXRBdXRvID0gZnVuY3Rpb24gKHBybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJtLnR5cGUgPT0gXCJjb250YWN0bGlzdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc2Vlcy5zZWxlY3RkQ29udGFjdGxpcyA9IHBybS5jb250YWN0bGlzdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJtLnR5cGUgPT0gXCJzZWdtZW50XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzZWVzLnNlbGVjdGRTZWdtZW50ID0gcHJtLnNlbGVjdGRTZWdtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb3VudENvbnRhY3RzKHBybS50eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRTY2hlZHVsZURhdGUgPSBmdW5jdGlvbiAocHJtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLnNjaGVkdWxlZGF0ZSA9IHBybVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldE1lc3NhZ2UgPSBmdW5jdGlvbiAocHJtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLm1lc3NhZ2UgPSBwcm1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRJZFNtc0NhdGVnb3J5ID0gZnVuY3Rpb24gKHBybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5pZFNtc0NhdGVnb3J5ID0gcHJtO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldERheXMgPSBmdW5jdGlvbiAocHJtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmRheXMgPSBwcm07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jb250YWluc1dvcmQgPSBmdW5jdGlvbiAoaGF5c3RhY2ssIG5lZWRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFwiIFwiICsgaGF5c3RhY2sgKyBcIiBcIikuaW5kZXhPZihcIiBcIiArIG5lZWRsZSArIFwiIFwiKSAhPT0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRTd2l0Y2hCaXJ0aGRheSA9IGZ1bmN0aW9uIChwcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuYmlydGhkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm9ub2Zmc3dpdGNoLWlubmVyJykuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0RGF0YUFsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzdGF0ZVBhcmFtcy5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVzdFNlcnZpY2VzLmdldERhdGFBbGwoJHN0YXRlUGFyYW1zLmlkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUuc2V0SWRTbXNDYXRlZ29yeSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRUYXJnZXRBdXRvKGRhdGEudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0U2NoZWR1bGVEYXRlKGRhdGEuc2NoZWR1bGVkYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0U3dpdGNoQmlydGhkYXkoZGF0YS5iaXJ0aGRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXREYXlzKGRhdGEuZGF5cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldE1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5tb3JlY2FyYWN0ZXIgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNtb3JlY2FyYWN0ZXJcIikucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjbW9yZWNhcmFjdGVyXCIpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsU21zQ2F0ZWdvcmllcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVzdFNlcnZpY2VzLmdldEFsbFNtc0NhdGVnb3JpZXMoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLmNhdGVnb3J5ID0gcmVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGxTbXNDYXRlZ29yaWVzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnJJbml0aWFsUGV0aWNpb24gPSBbJHNjb3BlLmdldERhdGFBbGwoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgJHEuYWxsKGFyckluaXRpYWxQZXRpY2lvbikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge30pXHJcblxyXG4gICAgICAgICAgICAgICAgfV0pXHJcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdjb250ZW50RWRpdG9yQXV0b3Jlc0NvbnRyb2xsZXInLCBbJyRzY29wZScsICdSZXN0U2VydmljZXMnLCAnbm90aWZpY2F0aW9uU2VydmljZScsICckd2luZG93JywgJyRzdGF0ZVBhcmFtcycsIGZ1bmN0aW9uICgkc2NvcGUsIFJlc3RTZXJ2aWNlcywgbm90aWZpY2F0aW9uU2VydmljZSwgJHdpbmRvdywgJHN0YXRlUGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVDb250ZW50RWRpdG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lmcmFtZUVkaXRvcicpLmNvbnRlbnRXaW5kb3cuY2F0Y2hFZGl0b3JEYXRhKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVzdFNlcnZpY2VzLmNyZWF0ZUNvbnRlbnRFZGl0b3JBdXRvcmVzcG9uZGVyKGRhdGEsIGlkQXV0b3Jlc3BvbmRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLm9wZXJhdGlvbiA9PSBcImNyZWF0ZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5zdWNjZXNzKHJlcy5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLm9wZXJhdGlvbiA9PSBcImVkaXRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UucHJpbWFyeShyZXMubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSBmdWxsVXJsQmFzZSArIHRlbXBsYXRlQmFzZSArICcjL2JpcnRoZGF5LycgKyByZXMuYXV0b3Jlc3BvbmRlckNvbnRlbnQuaWRBdXRvcmVzcG9uZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XSlcclxuICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ3Rvb2xzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ1Jlc3RTZXJ2aWNlcycsICdub3RpZmljYXRpb25TZXJ2aWNlJywgJyR3aW5kb3cnLCAnJHN0YXRlUGFyYW1zJywgZnVuY3Rpb24gKCRzY29wZSwgUmVzdFNlcnZpY2VzLCBub3RpZmljYXRpb25TZXJ2aWNlLCAkd2luZG93LCAkc3RhdGVQYXJhbXMpIHt9XSlcclxufSkoKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9qcy9hbmd1bGFyL2F1dG9yZXNwb25kZXIvY29udHJvbGxlcnMuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, exports) {

eval("(function () {\r\n  angular.module('autoresponder.services', [])\r\n    .service('RestServices', function ($http, $q, notificationService) {\r\n\r\n      this.getContactlist = function () {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/sendmail/getcontactlist';\r\n        $http.get(url)\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data.message);\r\n          });\r\n\r\n        return deferred.promise;\r\n      };\r\n\r\n      this.getSegment = function () {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/sendmail/getsegment';\r\n        $http.get(url)\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data.message);\r\n          });\r\n\r\n        return deferred.promise;\r\n      };\r\n\r\n      this.countContact = function (data) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/sendmail/countcontact';\r\n        $http.post(url, data)\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data.message);\r\n          });\r\n\r\n        return deferred.promise;\r\n      };\r\n      \r\n      this.countContactFromSms = function (data) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/sms/countcontact';\r\n        \r\n        $http.post(url, data)\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data.message);\r\n          });\r\n\r\n        return deferred.promise;\r\n      };\r\n           \r\n      this.getemailname = function () {\r\n        var deferred = $q.defer();\r\n        $http.get(fullUrlBase + 'mail/emailname/')\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data);\r\n          });\r\n\r\n        return deferred.promise;\r\n      };\r\n\r\n      this.getemailsend = function () {\r\n        var deferred = $q.defer();\r\n        $http.get(fullUrlBase + 'mail/emailsender/')\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data);\r\n          });\r\n\r\n        return deferred.promise;\r\n      };\r\n\r\n      this.addEmailName = function (data) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'mail/addemailname/';\r\n        $http.post(url, data)\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data.message);\r\n          });\r\n        return deferred.promise;\r\n      };\r\n\r\n      this.addEmailSender = function (data) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'mail/addemailsender/';\r\n        $http.post(url, data)\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data.message);\r\n          });\r\n        return deferred.promise;\r\n      };\r\n\r\n      this.createAutoresponder = function (data, idAutoresponder) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/autoresponder/save/' + idAutoresponder;\r\n        $http.post(url, data)\r\n          .success(function (res) {\r\n            deferred.resolve(res);\r\n          })\r\n          .error(function (res){\r\n            deferred.reject(res);\r\n            notificationService.error(res.message);\r\n          });\r\n        return deferred.promise;\r\n      };\r\n      \r\n      //SERVICIO PARA CREAR CAMPO PERSONALIZADO COMBINADO\r\n      this.addcustomfield = function (data) {\r\n          var deferred = $q.defer();\r\n          var url = fullUrlBase + 'api/autoresponder/addcustomfield';\r\n          $http.post(url, data)\r\n            .success(function (res) {\r\n              deferred.resolve(res);\r\n            })\r\n            .error(function (res) {\r\n              deferred.reject(res);\r\n              notificationService.error(res.message);\r\n            });\r\n\r\n          return deferred.promise;\r\n      };\r\n      \r\n      this.createAutorespdesms = function (data, idAutoresponder) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/autoresponder/saveautosms/' + idAutoresponder;\r\n        $http.post(url, data)\r\n          .success(function (res) {\r\n            deferred.resolve(res);\r\n          })\r\n          .error(function (res) {\r\n            deferred.reject(res);\r\n            notificationService.error(res.message);\r\n          });\r\n        return deferred.promise;\r\n      };\r\n      \r\n      this.getAllSmsCategories = function(){\r\n        var deferred = $q.defer();\r\n        //var url = constantForms.UrlPeticion.Urls.getAllFormCategory;\r\n        var url = fullUrlBase + 'api/smscategory/getall';\r\n        $http.get(url)\r\n                .success(function (data) {\r\n                  deferred.resolve(data);\r\n                })\r\n                .error(function (data) {\r\n                  deferred.reject(data);\r\n                  notificationService.error(data.message);\r\n                });\r\n        return deferred.promise;\r\n      };\r\n      \r\n      this.createContentEditorAutoresponder = function (data, idAutoresponder) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/autoresponder/savecontenteditor/' + idAutoresponder;\r\n        $http.post(url, data)\r\n          .success(function (res) {\r\n            deferred.resolve(res);\r\n          })\r\n          .error(function (res) {\r\n            deferred.reject(res);\r\n            notificationService.error(res.message);\r\n          });\r\n        return deferred.promise;\r\n      };\r\n\r\n      this.getAutoresponder = function (idAutoresponder) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/autoresponder/getautoresponse/' + idAutoresponder;\r\n        $http.get(url)\r\n          .success(function (res) {\r\n            deferred.resolve(res);\r\n          })\r\n          .error(function (res) {\r\n            deferred.reject(res);\r\n            notificationService.error(res.message);\r\n          });\r\n        return deferred.promise;\r\n      };\r\n\r\n      this.getAllAutoresponder = function (page, data) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/autoresponder/getallautoresponder/' + page;\r\n        $http.post(url, data)\r\n          .success(function (res) {\r\n            deferred.resolve(res);\r\n          })\r\n          .error(function (res) {\r\n            deferred.reject(res);\r\n            notificationService.error(res.message);\r\n          });\r\n        return deferred.promise;\r\n      };\r\n\r\n      this.delete = function (idAutoresponder) {\r\n        var url = fullUrlBase + \"api/autoresponder/delete/\" + idAutoresponder;\r\n        var defered = $q.defer();\r\n        $http.delete(url)\r\n          .success(function (data) {\r\n            defered.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            defered.reject(data);\r\n          });\r\n\r\n        return defered.promise;\r\n      };\r\n\r\n      this.getMailFilters = function (filter) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/sendmail/getmailfilters/' + filter;\r\n        $http.get(url)\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data.message);\r\n          });\r\n\r\n        return deferred.promise;\r\n      };\r\n\r\n      this.getLinksByMail = function (idMail) {\r\n        var url = fullUrlBase + 'api/sendmail/getlinksbymail/' + idMail;\r\n        var deferred = $q.defer();\r\n        $http.get(url)\r\n          .success(function (data) {\r\n            deferred.resolve(data);\r\n          })\r\n          .error(function (data) {\r\n            deferred.reject(data);\r\n            notificationService.error(data.message);\r\n          });\r\n\r\n        return deferred.promise;\r\n      };\r\n      \r\n      //Funcion que trae los datos al editar en el envio rapido\r\n      this.getDataAll = function (id) {\r\n        var defer = $q.defer();\r\n          //$http.post(contantSmstwoway.urlPeticion.changeDataEditAll, id)\r\n          var url = fullUrlBase + 'api/autoresponder/getalledit/';\r\n          $http.post(url, id)\r\n            .success(function (data) {\r\n              defer.resolve(data);\r\n            })\r\n            .error(function (data) {\r\n              defer.reject(data);\r\n            });\r\n          return defer.promise;\r\n      };\r\n      \r\n      this.findcustomfields = function (idContactlist) {\r\n        var deferred = $q.defer();\r\n        var url = fullUrlBase + 'api/autoresponder/getallcustomfield/' + idContactlist;\r\n        $http.get(url)\r\n          .success(function (res) {\r\n            deferred.resolve(res);\r\n          })\r\n          .error(function (res) {\r\n            deferred.reject(res);\r\n            notificationService.error(res.message);\r\n          });\r\n        return deferred.promise;\r\n      };\r\n    })\r\n    .factory('notificationService', function () {\r\n      function error(message) {\r\n        slideOnTop(message, 4000, 'glyphicon glyphicon-remove-circle', 'danger');\r\n      }\r\n\r\n      function success(message) {\r\n        slideOnTop(message, 4000, 'glyphicon glyphicon-ok-circle', 'success');\r\n      }\r\n\r\n      function warning(message) {\r\n        slideOnTop(message, 4000, 'glyphicon glyphicon-exclamation-sign', 'warning');\r\n      }\r\n\r\n      function notice(message) {\r\n        slideOnTop(message, 4000, 'glyphicon glyphicon-exclamation-sign', 'notice');\r\n      }\r\n\r\n      function primary(message) {\r\n        slideOnTop(message, 4000, 'glyphicon glyphicon-exclamation-sign', 'primary');\r\n      }\r\n\r\n      return {\r\n        error: error,\r\n        success: success,\r\n        warning: warning,\r\n        notice: notice,\r\n        primary: primary\r\n      };\r\n    })\r\n})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL2F1dG9yZXNwb25kZXIvc2VydmljZXMuanM/YmFmZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDIiwiZmlsZSI6IjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xyXG4gIGFuZ3VsYXIubW9kdWxlKCdhdXRvcmVzcG9uZGVyLnNlcnZpY2VzJywgW10pXHJcbiAgICAuc2VydmljZSgnUmVzdFNlcnZpY2VzJywgZnVuY3Rpb24gKCRodHRwLCAkcSwgbm90aWZpY2F0aW9uU2VydmljZSkge1xyXG5cclxuICAgICAgdGhpcy5nZXRDb250YWN0bGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIHZhciB1cmwgPSBmdWxsVXJsQmFzZSArICdhcGkvc2VuZG1haWwvZ2V0Y29udGFjdGxpc3QnO1xyXG4gICAgICAgICRodHRwLmdldCh1cmwpXHJcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMuZ2V0U2VnbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIHZhciB1cmwgPSBmdWxsVXJsQmFzZSArICdhcGkvc2VuZG1haWwvZ2V0c2VnbWVudCc7XHJcbiAgICAgICAgJGh0dHAuZ2V0KHVybClcclxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhKTtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5jb3VudENvbnRhY3QgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgdmFyIHVybCA9IGZ1bGxVcmxCYXNlICsgJ2FwaS9zZW5kbWFpbC9jb3VudGNvbnRhY3QnO1xyXG4gICAgICAgICRodHRwLnBvc3QodXJsLCBkYXRhKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICB0aGlzLmNvdW50Q29udGFjdEZyb21TbXMgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgdmFyIHVybCA9IGZ1bGxVcmxCYXNlICsgJ2FwaS9zbXMvY291bnRjb250YWN0JztcclxuICAgICAgICBcclxuICAgICAgICAkaHR0cC5wb3N0KHVybCwgZGF0YSlcclxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhKTtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICB9O1xyXG4gICAgICAgICAgIFxyXG4gICAgICB0aGlzLmdldGVtYWlsbmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICRodHRwLmdldChmdWxsVXJsQmFzZSArICdtYWlsL2VtYWlsbmFtZS8nKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5nZXRlbWFpbHNlbmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAkaHR0cC5nZXQoZnVsbFVybEJhc2UgKyAnbWFpbC9lbWFpbHNlbmRlci8nKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5hZGRFbWFpbE5hbWUgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgdmFyIHVybCA9IGZ1bGxVcmxCYXNlICsgJ21haWwvYWRkZW1haWxuYW1lLyc7XHJcbiAgICAgICAgJGh0dHAucG9zdCh1cmwsIGRhdGEpXHJcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5hZGRFbWFpbFNlbmRlciA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICB2YXIgdXJsID0gZnVsbFVybEJhc2UgKyAnbWFpbC9hZGRlbWFpbHNlbmRlci8nO1xyXG4gICAgICAgICRodHRwLnBvc3QodXJsLCBkYXRhKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMuY3JlYXRlQXV0b3Jlc3BvbmRlciA9IGZ1bmN0aW9uIChkYXRhLCBpZEF1dG9yZXNwb25kZXIpIHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIHZhciB1cmwgPSBmdWxsVXJsQmFzZSArICdhcGkvYXV0b3Jlc3BvbmRlci9zYXZlLycgKyBpZEF1dG9yZXNwb25kZXI7XHJcbiAgICAgICAgJGh0dHAucG9zdCh1cmwsIGRhdGEpXHJcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKHJlcyl7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXMpO1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKHJlcy5tZXNzYWdlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgLy9TRVJWSUNJTyBQQVJBIENSRUFSIENBTVBPIFBFUlNPTkFMSVpBRE8gQ09NQklOQURPXHJcbiAgICAgIHRoaXMuYWRkY3VzdG9tZmllbGQgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgIHZhciB1cmwgPSBmdWxsVXJsQmFzZSArICdhcGkvYXV0b3Jlc3BvbmRlci9hZGRjdXN0b21maWVsZCc7XHJcbiAgICAgICAgICAkaHR0cC5wb3N0KHVybCwgZGF0YSlcclxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QocmVzKTtcclxuICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKHJlcy5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICB0aGlzLmNyZWF0ZUF1dG9yZXNwZGVzbXMgPSBmdW5jdGlvbiAoZGF0YSwgaWRBdXRvcmVzcG9uZGVyKSB7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICB2YXIgdXJsID0gZnVsbFVybEJhc2UgKyAnYXBpL2F1dG9yZXNwb25kZXIvc2F2ZWF1dG9zbXMvJyArIGlkQXV0b3Jlc3BvbmRlcjtcclxuICAgICAgICAkaHR0cC5wb3N0KHVybCwgZGF0YSlcclxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXMpO1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKHJlcy5tZXNzYWdlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgdGhpcy5nZXRBbGxTbXNDYXRlZ29yaWVzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIC8vdmFyIHVybCA9IGNvbnN0YW50Rm9ybXMuVXJsUGV0aWNpb24uVXJscy5nZXRBbGxGb3JtQ2F0ZWdvcnk7XHJcbiAgICAgICAgdmFyIHVybCA9IGZ1bGxVcmxCYXNlICsgJ2FwaS9zbXNjYXRlZ29yeS9nZXRhbGwnO1xyXG4gICAgICAgICRodHRwLmdldCh1cmwpXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgdGhpcy5jcmVhdGVDb250ZW50RWRpdG9yQXV0b3Jlc3BvbmRlciA9IGZ1bmN0aW9uIChkYXRhLCBpZEF1dG9yZXNwb25kZXIpIHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIHZhciB1cmwgPSBmdWxsVXJsQmFzZSArICdhcGkvYXV0b3Jlc3BvbmRlci9zYXZlY29udGVudGVkaXRvci8nICsgaWRBdXRvcmVzcG9uZGVyO1xyXG4gICAgICAgICRodHRwLnBvc3QodXJsLCBkYXRhKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlcyk7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IocmVzLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmdldEF1dG9yZXNwb25kZXIgPSBmdW5jdGlvbiAoaWRBdXRvcmVzcG9uZGVyKSB7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICB2YXIgdXJsID0gZnVsbFVybEJhc2UgKyAnYXBpL2F1dG9yZXNwb25kZXIvZ2V0YXV0b3Jlc3BvbnNlLycgKyBpZEF1dG9yZXNwb25kZXI7XHJcbiAgICAgICAgJGh0dHAuZ2V0KHVybClcclxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChyZXMpO1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKHJlcy5tZXNzYWdlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5nZXRBbGxBdXRvcmVzcG9uZGVyID0gZnVuY3Rpb24gKHBhZ2UsIGRhdGEpIHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIHZhciB1cmwgPSBmdWxsVXJsQmFzZSArICdhcGkvYXV0b3Jlc3BvbmRlci9nZXRhbGxhdXRvcmVzcG9uZGVyLycgKyBwYWdlO1xyXG4gICAgICAgICRodHRwLnBvc3QodXJsLCBkYXRhKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlcyk7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IocmVzLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmRlbGV0ZSA9IGZ1bmN0aW9uIChpZEF1dG9yZXNwb25kZXIpIHtcclxuICAgICAgICB2YXIgdXJsID0gZnVsbFVybEJhc2UgKyBcImFwaS9hdXRvcmVzcG9uZGVyL2RlbGV0ZS9cIiArIGlkQXV0b3Jlc3BvbmRlcjtcclxuICAgICAgICB2YXIgZGVmZXJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgJGh0dHAuZGVsZXRlKHVybClcclxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRlZmVyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRlZmVyZWQucHJvbWlzZTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMuZ2V0TWFpbEZpbHRlcnMgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICB2YXIgdXJsID0gZnVsbFVybEJhc2UgKyAnYXBpL3NlbmRtYWlsL2dldG1haWxmaWx0ZXJzLycgKyBmaWx0ZXI7XHJcbiAgICAgICAgJGh0dHAuZ2V0KHVybClcclxuICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhKTtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5nZXRMaW5rc0J5TWFpbCA9IGZ1bmN0aW9uIChpZE1haWwpIHtcclxuICAgICAgICB2YXIgdXJsID0gZnVsbFVybEJhc2UgKyAnYXBpL3NlbmRtYWlsL2dldGxpbmtzYnltYWlsLycgKyBpZE1haWw7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAkaHR0cC5nZXQodXJsKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICAvL0Z1bmNpb24gcXVlIHRyYWUgbG9zIGRhdG9zIGFsIGVkaXRhciBlbiBlbCBlbnZpbyByYXBpZG9cclxuICAgICAgdGhpcy5nZXREYXRhQWxsID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgIC8vJGh0dHAucG9zdChjb250YW50U21zdHdvd2F5LnVybFBldGljaW9uLmNoYW5nZURhdGFFZGl0QWxsLCBpZClcclxuICAgICAgICAgIHZhciB1cmwgPSBmdWxsVXJsQmFzZSArICdhcGkvYXV0b3Jlc3BvbmRlci9nZXRhbGxlZGl0Lyc7XHJcbiAgICAgICAgICAkaHR0cC5wb3N0KHVybCwgaWQpXHJcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgdGhpcy5maW5kY3VzdG9tZmllbGRzID0gZnVuY3Rpb24gKGlkQ29udGFjdGxpc3QpIHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgIHZhciB1cmwgPSBmdWxsVXJsQmFzZSArICdhcGkvYXV0b3Jlc3BvbmRlci9nZXRhbGxjdXN0b21maWVsZC8nICsgaWRDb250YWN0bGlzdDtcclxuICAgICAgICAkaHR0cC5nZXQodXJsKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlcyk7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IocmVzLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgIH07XHJcbiAgICB9KVxyXG4gICAgLmZhY3RvcnkoJ25vdGlmaWNhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UpIHtcclxuICAgICAgICBzbGlkZU9uVG9wKG1lc3NhZ2UsIDQwMDAsICdnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZS1jaXJjbGUnLCAnZGFuZ2VyJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MobWVzc2FnZSkge1xyXG4gICAgICAgIHNsaWRlT25Ub3AobWVzc2FnZSwgNDAwMCwgJ2dseXBoaWNvbiBnbHlwaGljb24tb2stY2lyY2xlJywgJ3N1Y2Nlc3MnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gd2FybmluZyhtZXNzYWdlKSB7XHJcbiAgICAgICAgc2xpZGVPblRvcChtZXNzYWdlLCA0MDAwLCAnZ2x5cGhpY29uIGdseXBoaWNvbi1leGNsYW1hdGlvbi1zaWduJywgJ3dhcm5pbmcnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gbm90aWNlKG1lc3NhZ2UpIHtcclxuICAgICAgICBzbGlkZU9uVG9wKG1lc3NhZ2UsIDQwMDAsICdnbHlwaGljb24gZ2x5cGhpY29uLWV4Y2xhbWF0aW9uLXNpZ24nLCAnbm90aWNlJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHByaW1hcnkobWVzc2FnZSkge1xyXG4gICAgICAgIHNsaWRlT25Ub3AobWVzc2FnZSwgNDAwMCwgJ2dseXBoaWNvbiBnbHlwaGljb24tZXhjbGFtYXRpb24tc2lnbicsICdwcmltYXJ5Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgZXJyb3I6IGVycm9yLFxyXG4gICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXHJcbiAgICAgICAgd2FybmluZzogd2FybmluZyxcclxuICAgICAgICBub3RpY2U6IG5vdGljZSxcclxuICAgICAgICBwcmltYXJ5OiBwcmltYXJ5XHJcbiAgICAgIH07XHJcbiAgICB9KVxyXG59KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vanMvYW5ndWxhci9hdXRvcmVzcG9uZGVyL3NlcnZpY2VzLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n");

/***/ })
/******/ ]);