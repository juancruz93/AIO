/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

eval("__webpack_require__(1);\r\n__webpack_require__(2);\r\n__webpack_require__(3);\r\n__webpack_require__(4);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL2Zvcm1zL21haW4uanM/MDcyMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxtQkFBTyxDQUFDLENBQWM7QUFDdEIsbUJBQU8sQ0FBQyxDQUFVO0FBQ2xCLG1CQUFPLENBQUMsQ0FBa0I7QUFDMUIsbUJBQU8sQ0FBQyxDQUFlIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCcuL2FwcGZvcm0uanMnKTtcclxucmVxdWlyZSgnLi9hcHAuanMnKTtcclxucmVxdWlyZSgnLi9jb250cm9sbGVycy5qcycpO1xyXG5yZXF1aXJlKCcuL3NlcnZpY2VzLmpzJyk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9qcy9hbmd1bGFyL2Zvcm1zL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n(function () {\r\n  var app = angular.module('appFormSigma', ['ngSanitize', 'builder', 'builder.components', 'validator.rules', 'ui.bootstrap', 'angularSpectrumColorpicker']);\r\n  app.constant(\"contantForm\", {\r\n    message: {\r\n      Age: \"Tu edad no es apta para acceder a este servicio.\",\r\n      Term: \"Por favor aceptar los terminos y condiciones para poder continuar con el registro.\",\r\n      Acept: \"El registro se guardo de forma exitosa.\",\r\n      Valid: \"Se estan validando el registro, esto podria demorar un segundo.\",\r\n      InvalidDate: \"No puedes digitar fechas futuras al diligenciar el formulario.\",\r\n      InvalidNumber: \"Recuerda digitar solamente 10 digitos para el Telefono\"\r\n    },\r\n    title:{\r\n      Term: \"Terminos y condiciones\",\r\n      Acept: \"Correcto\",\r\n      Valid: \"Se esta realizando validaciones\",\r\n    }\r\n  });\r\n  app.config(['$validatorProvider', function ($validatorProvider) {\r\n      $validatorProvider.register('required', {\r\n        invoke: 'watch',\r\n        validator: /.+/,\r\n        error: 'El campo es requerido.'\r\n      });\r\n      $validatorProvider.register('number', {\r\n        invoke: 'watch',\r\n        validator: /^[-+]?[0-9]*[\\.]?[0-9]*$/,\r\n        error: 'El campo solo pude ingresar numeros.'\r\n      });\r\n      $validatorProvider.register('email', {\r\n        invoke: 'blur',\r\n        validator: /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\r\n        error: 'El formato del correo no es valido.'\r\n      });\r\n      $validatorProvider.register('numberEnteros', {\r\n        invoke: 'blur',\r\n        validator: /^[0-9]+$/,\r\n        error: 'Solo se es permitido numeros enteros'\r\n      });\r\n      $validatorProvider.register('fecha', {\r\n        invoke: 'blur',\r\n        validator: /^[0-9]{4}-(0[0-9]|1[0-2])-(0[0-9]|[0-2][0-9]|3[0-1])$/,\r\n//        validator: /.+/,\r\n        error: 'El formato de la fecha no es valido.'\r\n      });\r\n      return $validatorProvider.register('url', {\r\n        invoke: 'blur',\r\n        validator: /((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\\+\\$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[\\+~%\\/.\\w-_]*)?\\??(?:[-\\+=&;%@.\\w_]*)#?(?:[\\w]*))?)/,\r\n        error: 'El formato de la url no es valido.'\r\n      });\r\n    }]);\r\n  app.service('serviceFormSigma', ['$http', '$q', function ($http, $q) {\r\n      this.getForm = function (idForm) {\r\n        var defer = $q.defer();\r\n        var url = fullUrlBaseSigmaDomain + 'api/forms/getcontentform/' + idForm;\r\n        $http.get(url)\r\n                .success(function (data) {\r\n                  defer.resolve(data);\r\n                }) \r\n                .error(function (data) {\r\n                  defer.reject(data);\r\n                });\r\n        return defer.promise;\r\n      }\r\n      this.sendForm = function (idForm, data) {\r\n        var defer = $q.defer();\r\n        var url = fullUrlBaseSigmaDomain + \"api/contact/addcontactform/\" + idForm;\r\n        $http.post(url, data)\r\n                .success(function (data) {\r\n                  defer.resolve(data);\r\n                })\r\n                .error(function (data) {\r\n                  defer.resolve(data);\r\n                });\r\n        return defer.promise;\r\n      }\r\n      this.converArrayToObj = function (data) {\r\n        var defer = $q.defer();\r\n        var objReturn = {};\r\n        for (var i in data) {\r\n          var value = data[i].value;\r\n          var name = data[i].id;\r\n          var component = data[i].component;\r\n          if (component == \"encabezado\" || component == \"button\") {\r\n            continue;\r\n          }\r\n          if (component == \"dateInput\") {\r\n            var date = new Date(value);\r\n            var month, day;\r\n            if (date.getMonth() + 1 < 10) {\r\n              month = date.getMonth() + 1;\r\n              month = \"0\" + month.toString();\r\n            } else {\r\n              month = date.getMonth() + 1;\r\n            }\r\n            if (date.getDate() < 10) {\r\n              day = \"0\" + date.getDate().toString();\r\n            } else {\r\n              day = date.getDate();\r\n            }\r\n            value = date.getFullYear() + \"-\" + month + \"-\" + day;\r\n          }\r\n          if (component == \"checkbox\") {\r\n            value = value.split(\",\");\r\n//            var array = value.split(\",\");\r\n//            value = [];\r\n//            for(var i in array){\r\n//              value.push(array[i].trim());\r\n//            }\r\n          }\r\n          if (name == \"indicative\") {\r\n            var startOfSection = value.indexOf(\"+\");\r\n            var startOfValue = value.indexOf('+', startOfSection) + 1;\r\n            var endOffValue = value.indexOf(')', startOfValue); //one char longer, as needed for substring\r\n\r\n            value = value.substring(startOfValue, endOffValue);\r\n          }\r\n          objReturn[name] = value;\r\n        }\r\n        defer.resolve(objReturn);\r\n        return defer.promise;\r\n      }\r\n\r\n    }]);\r\n  app.controller('controllerFormSigma', ['$scope', 'serviceFormSigma', '$builder', '$validator', '$q', '$window', 'contantForm', function ($scope, serviceFormSigma, $builder, $validator, $q, $window, contantForm) {\r\n      $scope.complet = false;\r\n      $scope.input = [];\r\n      $scope.deleted_cl = false;\r\n      $scope.deleted_form = false;\r\n      $scope.getForm = function (idForm) {\r\n        serviceFormSigma.getForm(idForm).then(function (data) {\r\n          $scope.deleted_cl = data.deleted_cl;\r\n          $scope.deleted_form = data.deleted_form;          \r\n          var newElementConfirmation = {};\r\n          newElementConfirmation.component = \"confirmation\";\r\n          newElementConfirmation.label = HB;\r\n          newElementConfirmation.description = \"\";\r\n          newElementConfirmation.editable = true;\r\n          newElementConfirmation.id = \"confirmation\";\r\n          newElementConfirmation.index = 9999;\r\n          newElementConfirmation.options = ['Si, Acepto.'];\r\n\r\n          $scope.dataContent = JSON.parse(data.content);\r\n          newElementConfirmation.objExt = $scope.dataContent.form[1].objExt;\r\n          \r\n          var itemsNumber = $scope.dataContent.form.length;\r\n          for (var i = 0; i < itemsNumber ; i++) {\r\n            var idJson = $scope.dataContent.form[i].id;\r\n            //var itemRequired = $scope.dataContent.form[i].required;\r\n            //if ( idJson == \"name\")      { $scope.dataContent.form[i].validation = \"\"; }\r\n            //if ( idJson == \"lastname\")  { $scope.dataContent.form[i].validation = \"\"; } \r\n            if ( idJson == \"birthdate\") { $scope.dataContent.form[i].validation = \"\"; }\r\n            //if ( idJson == \"indicative\"){ $scope.dataContent.form[i].validation = \"\"; }\r\n            //if ( idJson == \"phone\")     { $scope.dataContent.form[i].validation = \"\"; }\r\n          }\r\n          $scope.dataContent.form.splice($scope.dataContent.form.length - 1, 0, newElementConfirmation);\r\n          $builder.setForm('sigmaForm', $scope.dataContent.form);\r\n          $scope.complet = true;\r\n          if($scope.deleted_form == true){            \r\n             swal(\"Ha ocurrido un error\", \"FORMULARIO ELIMINADO\", \"error\");\r\n             $(\"body\").prepend(\"<div class=\\\"overlay\\\"></div>\");\r\n\r\n            $(\".overlay\").css({\r\n                \"position\": \"absolute\", \r\n                \"width\": $(document).width(), \r\n                \"height\": $(document).height(),\r\n                \"z-index\": 99999, \r\n            }).fadeTo(0, 0.8);\r\n          }else if($scope.deleted_cl == true){\r\n                         swal(\"Ha ocurrido un error\", \"FORMULARIO ELIMINADO\", \"error\");\r\n             $(\"body\").prepend(\"<div class=\\\"overlay\\\"></div>\");\r\n\r\n            $(\".overlay\").css({\r\n                \"position\": \"absolute\", \r\n                \"width\": $(document).width(), \r\n                \"height\": $(document).height(),\r\n                \"z-index\": 99999, \r\n            }).fadeTo(0, 0.8);\r\n          }\r\n          \r\n        });\r\n      }      \r\n      $scope.sendData = function (idForm) {\r\n        $(\"#submitButton\").prop('disabled', false);\r\n        $scope.coverDateToString().then(function (data) {\r\n          $validator.validate($scope, 'sigmaForm')\r\n                  .success(function () {\r\n                    serviceFormSigma.converArrayToObj($scope.input).then(function (data) {\r\n                    \r\n                    /* validando que el campo birthdate existan en el JSON si no es asi\r\n                     * entonces no valide esta informacion y salte al checkbox */\r\n                    if(angular.isDefined(data.birthdate)){\r\n                        /*validando que al digitar cualquier cosa valide fechas... \r\n                         *en caso de que no haya nada no valide nada*/\r\n                        if(data.birthdate != \"NaN-NaN-NaN\"){\r\n                            //validando la edad del usuario y que ingrese fechas permitidas...\r\n                            if ($scope.validateDate(data)){\r\n                              if($scope.validateUnderAge(data)){\r\n                                  swal(\"\", contantForm.message.Age, \"\");\r\n                                  $(\"#submitButton\").prop('disabled', false);\r\n                                  return false;\r\n                              }\r\n                              $(\"#submitButton\").prop('disabled', false);\r\n                            }else{                    \r\n                              swal(\"\", contantForm.message.InvalidDate, \"\");\r\n                              $(\"#submitButton\").prop('disabled', false);\r\n                              return false;\r\n                            }\r\n                        }\r\n                    }\r\n                    \r\n                    /* validando que el campo phone existan en el JSON si no es asi\r\n                     * entonces no valide esta informacion y salte al checkbox*/ \r\n                    if(angular.isDefined(data.phone)){\r\n                        /* validando que al digitar cualquier cosa valide fechas... \r\n                         * en caso de que no haya nada no valide nada */\r\n                        if(data.phone != \"NaN-NaN-NaN\"){\r\n                            //validando la edad del usuario y que ingrese fechas permitidas... */\r\n                            if ($scope.validateTelephoneNumber(data)){\r\n                              swal(\"\", contantForm.message.InvalidNumber, \"\");\r\n                              $(\"#submitButton\").prop('disabled', false);\r\n                              return false;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    //validando la confirmacion antes de aceptar el form\r\n                    if (data.confirmation == \"\" ) {\r\n                      swal(contantForm.title.Term, contantForm.message.Term, \"error\");\r\n                      $(\"#submitButton\").prop('disabled', false);\r\n                      return false;\r\n                    }else \r\n                    // se utilizo una variante del componente sweetalert para \r\n                    // que al aceptar el usuario viera un componente de carga.\r\n                    swal.queue([{\r\n                        title: contantForm.title.Valid, confirmButtonText: 'Ok',\r\n                        text: contantForm.message.Valid, showLoaderOnConfirm: true,\r\n                        preConfirm: function (email) {\r\n                          return new Promise(function (resolve, reject) {\r\n                            setTimeout(function() {resolve()}, 6000)\r\n                          })\r\n                        }\r\n                    }])\r\n                    serviceFormSigma.sendForm(idForm, data).then(function (data) {\r\n                      $(\"#sigmaForm\")[0].reset();\r\n                      swal(contantForm.title.Acept, contantForm.message.Acept, \"success\");\r\n                      $(\"#submitButton\").prop('disabled', false);\r\n                      \r\n                      if (data.url != \"\" && data.url != null) {\r\n                        setTimeout(function() {$window.location.href = data.url;}, 3000);\r\n                      } else {\r\n                        $route.reload();\r\n                        $window.location.reload();\r\n                      }\r\n                      //swal(contantForm.title.Acept, contantForm.message.Acept, \"success\");\r\n                    });\r\n                    });\r\n                  })\r\n                  .error(function () {\r\n                    $(\"#submitButton\").prop('disabled', false);\r\n                  });\r\n        });\r\n      }\r\n      $scope.validateTelephoneNumber = function(data){\r\n        var telefonoDigitado = 0;\r\n        telefonoDigitado = data.phone\r\n          \r\n        if(telefonoDigitado.toString().length != 10){\r\n           return true;  //si es diferente de 10.\r\n        } \r\n        return false; //ya que no es igual a 10.\r\n      },\r\n      $scope.coverDateToString = function () {\r\n        var defer = $q.defer();\r\n        var objReturn = {};\r\n        for (var i in $scope.input) {\r\n          var value = $scope.input[i].value;\r\n          var name = $scope.input[i].id;\r\n          var component = $scope.input[i].component;\r\n          if (component == \"encabezado\" && component == \"button\") {\r\n            continue;\r\n          }\r\n          if (component == \"dateInput\") {\r\n            var date = new Date(value);\r\n            var month, day;\r\n            if (date.getMonth() + 1 < 10) {\r\n              month = date.getMonth() + 1;\r\n              month = \"0\" + month.toString();\r\n            } else {\r\n              month = date.getMonth() + 1;\r\n            }\r\n            if (date.getDate() < 10) {\r\n              day = \"0\" + date.getDate().toString();\r\n            } else {\r\n              day = date.getDate() + 1; //con esta adicion la fecha ya no retrocede...\r\n            }\r\n            $scope.input[i].value = date.getFullYear() + \"-\" + month + \"-\" + day;\r\n          }\r\n        }\r\n        defer.resolve($scope.input);\r\n        return defer.promise;\r\n      },\r\n      $scope.validateUnderAge = function(data){        \r\n        \r\n        //esto es para la fecha actual\r\n        var date = new Date();\r\n        var year1 = date.getFullYear();\r\n        \r\n        //esto es para la fecha digitada\r\n        var date = new Date(data.birthdate);\r\n        var year2 = date.getFullYear();\r\n        \r\n        //fecha actual menos 18 para saber aÃ±o de comparacion...\r\n        var comparativeYear = (year1 - 18);\r\n        \r\n        if (year2 > comparativeYear){\r\n          return true;\r\n        }else{\r\n          return false;\r\n        }\r\n        \r\n      }\r\n      $scope.validateDate = function (data){\r\n        \r\n        //esto es para la fecha actual\r\n        var date = new Date();\r\n        var month, day;\r\n        if (date.getMonth() + 1 < 10) {\r\n          month = date.getMonth() + 1;\r\n          month = \"0\" + month.toString();\r\n        } else {\r\n          month = date.getMonth() + 1;\r\n        }\r\n        if (date.getDate() < 10) {\r\n          day = \"0\" + date.getDate().toString();\r\n        } else {\r\n          day = date.getDate(); //con esta adicion la fecha ya no retrocede...\r\n        }\r\n        var value1 = date.getFullYear() + \"-\" + month + \"-\" + day;\r\n        var dateFormated1 = new Date(value1);\r\n        \r\n        //este date es para la fecha digitada\r\n        var dateSelected = data.birthdate;\r\n        var date = new Date(dateSelected);\r\n        var month, day;\r\n        if (date.getMonth() + 1 < 10) {\r\n          month = date.getMonth() + 1;\r\n          month = \"0\" + month.toString();\r\n        } else {\r\n          month = date.getMonth() + 1;\r\n        }\r\n        day = (date.getDate()+1)\r\n        if (day < 10) {\r\n          day = \"0\" + day.toString();\r\n        } else {  \r\n          day = date.getDate()+1; //con esta adicion la fecha ya no retrocede...\r\n        }\r\n        var value2 = date.getFullYear() + \"-\" + month + \"-\" + day;\r\n        var dateFormated2 = new Date(value2);\r\n        \r\n        if (dateFormated1 >= dateFormated2){\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n      \r\n    }])\r\n}).call(this);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL2Zvcm1zL2FwcGZvcm0uanM/NjFkZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EscUNBQXFDLHlCQUF5QixnQ0FBZ0MsSUFBSSxRQUFRLElBQUksUUFBUSxJQUFJLFFBQVEsSUFBSSxpQ0FBaUMsR0FBRztBQUMxSztBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsMkJBQTJCLEVBQUU7QUFDN0I7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsZ0NBQWdDLElBQUksaUJBQWlCLHlDQUF5QyxnRUFBZ0U7QUFDOUo7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0Q7O0FBRS9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQSwyQ0FBMkMsNENBQTRDO0FBQ3ZGLDJDQUEyQyw0Q0FBNEMsRTtBQUN2Rix5Q0FBeUMsNENBQTRDO0FBQ3JGLDJDQUEyQyw0Q0FBNEM7QUFDdkYsMkNBQTJDLDRDQUE0QztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUEsU0FBUztBQUNULE87QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixLO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsVUFBVTtBQUM3RCwyQkFBMkI7QUFDM0I7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQ0FBK0Msa0NBQWtDO0FBQ2pGLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixxQkFBcUI7QUFDckIsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCO0FBQ3ZCLFM7QUFDQSxxQkFBcUI7QUFDckIsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsK0M7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLE87QUFDVCxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTCxDQUFDIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHBGb3JtU2lnbWEnLCBbJ25nU2FuaXRpemUnLCAnYnVpbGRlcicsICdidWlsZGVyLmNvbXBvbmVudHMnLCAndmFsaWRhdG9yLnJ1bGVzJywgJ3VpLmJvb3RzdHJhcCcsICdhbmd1bGFyU3BlY3RydW1Db2xvcnBpY2tlciddKTtcclxuICBhcHAuY29uc3RhbnQoXCJjb250YW50Rm9ybVwiLCB7XHJcbiAgICBtZXNzYWdlOiB7XHJcbiAgICAgIEFnZTogXCJUdSBlZGFkIG5vIGVzIGFwdGEgcGFyYSBhY2NlZGVyIGEgZXN0ZSBzZXJ2aWNpby5cIixcclxuICAgICAgVGVybTogXCJQb3IgZmF2b3IgYWNlcHRhciBsb3MgdGVybWlub3MgeSBjb25kaWNpb25lcyBwYXJhIHBvZGVyIGNvbnRpbnVhciBjb24gZWwgcmVnaXN0cm8uXCIsXHJcbiAgICAgIEFjZXB0OiBcIkVsIHJlZ2lzdHJvIHNlIGd1YXJkbyBkZSBmb3JtYSBleGl0b3NhLlwiLFxyXG4gICAgICBWYWxpZDogXCJTZSBlc3RhbiB2YWxpZGFuZG8gZWwgcmVnaXN0cm8sIGVzdG8gcG9kcmlhIGRlbW9yYXIgdW4gc2VndW5kby5cIixcclxuICAgICAgSW52YWxpZERhdGU6IFwiTm8gcHVlZGVzIGRpZ2l0YXIgZmVjaGFzIGZ1dHVyYXMgYWwgZGlsaWdlbmNpYXIgZWwgZm9ybXVsYXJpby5cIixcclxuICAgICAgSW52YWxpZE51bWJlcjogXCJSZWN1ZXJkYSBkaWdpdGFyIHNvbGFtZW50ZSAxMCBkaWdpdG9zIHBhcmEgZWwgVGVsZWZvbm9cIlxyXG4gICAgfSxcclxuICAgIHRpdGxlOntcclxuICAgICAgVGVybTogXCJUZXJtaW5vcyB5IGNvbmRpY2lvbmVzXCIsXHJcbiAgICAgIEFjZXB0OiBcIkNvcnJlY3RvXCIsXHJcbiAgICAgIFZhbGlkOiBcIlNlIGVzdGEgcmVhbGl6YW5kbyB2YWxpZGFjaW9uZXNcIixcclxuICAgIH1cclxuICB9KTtcclxuICBhcHAuY29uZmlnKFsnJHZhbGlkYXRvclByb3ZpZGVyJywgZnVuY3Rpb24gKCR2YWxpZGF0b3JQcm92aWRlcikge1xyXG4gICAgICAkdmFsaWRhdG9yUHJvdmlkZXIucmVnaXN0ZXIoJ3JlcXVpcmVkJywge1xyXG4gICAgICAgIGludm9rZTogJ3dhdGNoJyxcclxuICAgICAgICB2YWxpZGF0b3I6IC8uKy8sXHJcbiAgICAgICAgZXJyb3I6ICdFbCBjYW1wbyBlcyByZXF1ZXJpZG8uJ1xyXG4gICAgICB9KTtcclxuICAgICAgJHZhbGlkYXRvclByb3ZpZGVyLnJlZ2lzdGVyKCdudW1iZXInLCB7XHJcbiAgICAgICAgaW52b2tlOiAnd2F0Y2gnLFxyXG4gICAgICAgIHZhbGlkYXRvcjogL15bLStdP1swLTldKltcXC5dP1swLTldKiQvLFxyXG4gICAgICAgIGVycm9yOiAnRWwgY2FtcG8gc29sbyBwdWRlIGluZ3Jlc2FyIG51bWVyb3MuJ1xyXG4gICAgICB9KTtcclxuICAgICAgJHZhbGlkYXRvclByb3ZpZGVyLnJlZ2lzdGVyKCdlbWFpbCcsIHtcclxuICAgICAgICBpbnZva2U6ICdibHVyJyxcclxuICAgICAgICB2YWxpZGF0b3I6IC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvLFxyXG4gICAgICAgIGVycm9yOiAnRWwgZm9ybWF0byBkZWwgY29ycmVvIG5vIGVzIHZhbGlkby4nXHJcbiAgICAgIH0pO1xyXG4gICAgICAkdmFsaWRhdG9yUHJvdmlkZXIucmVnaXN0ZXIoJ251bWJlckVudGVyb3MnLCB7XHJcbiAgICAgICAgaW52b2tlOiAnYmx1cicsXHJcbiAgICAgICAgdmFsaWRhdG9yOiAvXlswLTldKyQvLFxyXG4gICAgICAgIGVycm9yOiAnU29sbyBzZSBlcyBwZXJtaXRpZG8gbnVtZXJvcyBlbnRlcm9zJ1xyXG4gICAgICB9KTtcclxuICAgICAgJHZhbGlkYXRvclByb3ZpZGVyLnJlZ2lzdGVyKCdmZWNoYScsIHtcclxuICAgICAgICBpbnZva2U6ICdibHVyJyxcclxuICAgICAgICB2YWxpZGF0b3I6IC9eWzAtOV17NH0tKDBbMC05XXwxWzAtMl0pLSgwWzAtOV18WzAtMl1bMC05XXwzWzAtMV0pJC8sXHJcbi8vICAgICAgICB2YWxpZGF0b3I6IC8uKy8sXHJcbiAgICAgICAgZXJyb3I6ICdFbCBmb3JtYXRvIGRlIGxhIGZlY2hhIG5vIGVzIHZhbGlkby4nXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gJHZhbGlkYXRvclByb3ZpZGVyLnJlZ2lzdGVyKCd1cmwnLCB7XHJcbiAgICAgICAgaW52b2tlOiAnYmx1cicsXHJcbiAgICAgICAgdmFsaWRhdG9yOiAvKCgoW0EtWmEtel17Myw5fTooPzpcXC9cXC8pPykoPzpbLTs6Jj1cXCtcXCQsXFx3XStAKT9bQS1aYS16MC05Li1dK3woPzp3d3cufFstOzomPVxcK1xcJCxcXHddK0ApW0EtWmEtejAtOS4tXSspKCg/OlxcL1tcXCt+JVxcLy5cXHctX10qKT9cXD8/KD86Wy1cXCs9JjslQC5cXHdfXSopIz8oPzpbXFx3XSopKT8pLyxcclxuICAgICAgICBlcnJvcjogJ0VsIGZvcm1hdG8gZGUgbGEgdXJsIG5vIGVzIHZhbGlkby4nXHJcbiAgICAgIH0pO1xyXG4gICAgfV0pO1xyXG4gIGFwcC5zZXJ2aWNlKCdzZXJ2aWNlRm9ybVNpZ21hJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcclxuICAgICAgdGhpcy5nZXRGb3JtID0gZnVuY3Rpb24gKGlkRm9ybSkge1xyXG4gICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgdmFyIHVybCA9IGZ1bGxVcmxCYXNlU2lnbWFEb21haW4gKyAnYXBpL2Zvcm1zL2dldGNvbnRlbnRmb3JtLycgKyBpZEZvcm07XHJcbiAgICAgICAgJGh0dHAuZ2V0KHVybClcclxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KSBcclxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNlbmRGb3JtID0gZnVuY3Rpb24gKGlkRm9ybSwgZGF0YSkge1xyXG4gICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgdmFyIHVybCA9IGZ1bGxVcmxCYXNlU2lnbWFEb21haW4gKyBcImFwaS9jb250YWN0L2FkZGNvbnRhY3Rmb3JtL1wiICsgaWRGb3JtO1xyXG4gICAgICAgICRodHRwLnBvc3QodXJsLCBkYXRhKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY29udmVyQXJyYXlUb09iaiA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcclxuICAgICAgICB2YXIgb2JqUmV0dXJuID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgaSBpbiBkYXRhKSB7XHJcbiAgICAgICAgICB2YXIgdmFsdWUgPSBkYXRhW2ldLnZhbHVlO1xyXG4gICAgICAgICAgdmFyIG5hbWUgPSBkYXRhW2ldLmlkO1xyXG4gICAgICAgICAgdmFyIGNvbXBvbmVudCA9IGRhdGFbaV0uY29tcG9uZW50O1xyXG4gICAgICAgICAgaWYgKGNvbXBvbmVudCA9PSBcImVuY2FiZXphZG9cIiB8fCBjb21wb25lbnQgPT0gXCJidXR0b25cIikge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChjb21wb25lbnQgPT0gXCJkYXRlSW5wdXRcIikge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcclxuICAgICAgICAgICAgdmFyIG1vbnRoLCBkYXk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlLmdldE1vbnRoKCkgKyAxIDwgMTApIHtcclxuICAgICAgICAgICAgICBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgICAgbW9udGggPSBcIjBcIiArIG1vbnRoLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkYXRlLmdldERhdGUoKSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgZGF5ID0gXCIwXCIgKyBkYXRlLmdldERhdGUoKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhbHVlID0gZGF0ZS5nZXRGdWxsWWVhcigpICsgXCItXCIgKyBtb250aCArIFwiLVwiICsgZGF5O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGNvbXBvbmVudCA9PSBcImNoZWNrYm94XCIpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zcGxpdChcIixcIik7XHJcbi8vICAgICAgICAgICAgdmFyIGFycmF5ID0gdmFsdWUuc3BsaXQoXCIsXCIpO1xyXG4vLyAgICAgICAgICAgIHZhbHVlID0gW107XHJcbi8vICAgICAgICAgICAgZm9yKHZhciBpIGluIGFycmF5KXtcclxuLy8gICAgICAgICAgICAgIHZhbHVlLnB1c2goYXJyYXlbaV0udHJpbSgpKTtcclxuLy8gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAobmFtZSA9PSBcImluZGljYXRpdmVcIikge1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRPZlNlY3Rpb24gPSB2YWx1ZS5pbmRleE9mKFwiK1wiKTtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0T2ZWYWx1ZSA9IHZhbHVlLmluZGV4T2YoJysnLCBzdGFydE9mU2VjdGlvbikgKyAxO1xyXG4gICAgICAgICAgICB2YXIgZW5kT2ZmVmFsdWUgPSB2YWx1ZS5pbmRleE9mKCcpJywgc3RhcnRPZlZhbHVlKTsgLy9vbmUgY2hhciBsb25nZXIsIGFzIG5lZWRlZCBmb3Igc3Vic3RyaW5nXHJcblxyXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZyhzdGFydE9mVmFsdWUsIGVuZE9mZlZhbHVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG9ialJldHVybltuYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWZlci5yZXNvbHZlKG9ialJldHVybik7XHJcbiAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9XSk7XHJcbiAgYXBwLmNvbnRyb2xsZXIoJ2NvbnRyb2xsZXJGb3JtU2lnbWEnLCBbJyRzY29wZScsICdzZXJ2aWNlRm9ybVNpZ21hJywgJyRidWlsZGVyJywgJyR2YWxpZGF0b3InLCAnJHEnLCAnJHdpbmRvdycsICdjb250YW50Rm9ybScsIGZ1bmN0aW9uICgkc2NvcGUsIHNlcnZpY2VGb3JtU2lnbWEsICRidWlsZGVyLCAkdmFsaWRhdG9yLCAkcSwgJHdpbmRvdywgY29udGFudEZvcm0pIHtcclxuICAgICAgJHNjb3BlLmNvbXBsZXQgPSBmYWxzZTtcclxuICAgICAgJHNjb3BlLmlucHV0ID0gW107XHJcbiAgICAgICRzY29wZS5kZWxldGVkX2NsID0gZmFsc2U7XHJcbiAgICAgICRzY29wZS5kZWxldGVkX2Zvcm0gPSBmYWxzZTtcclxuICAgICAgJHNjb3BlLmdldEZvcm0gPSBmdW5jdGlvbiAoaWRGb3JtKSB7XHJcbiAgICAgICAgc2VydmljZUZvcm1TaWdtYS5nZXRGb3JtKGlkRm9ybSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgJHNjb3BlLmRlbGV0ZWRfY2wgPSBkYXRhLmRlbGV0ZWRfY2w7XHJcbiAgICAgICAgICAkc2NvcGUuZGVsZXRlZF9mb3JtID0gZGF0YS5kZWxldGVkX2Zvcm07ICAgICAgICAgIFxyXG4gICAgICAgICAgdmFyIG5ld0VsZW1lbnRDb25maXJtYXRpb24gPSB7fTtcclxuICAgICAgICAgIG5ld0VsZW1lbnRDb25maXJtYXRpb24uY29tcG9uZW50ID0gXCJjb25maXJtYXRpb25cIjtcclxuICAgICAgICAgIG5ld0VsZW1lbnRDb25maXJtYXRpb24ubGFiZWwgPSBIQjtcclxuICAgICAgICAgIG5ld0VsZW1lbnRDb25maXJtYXRpb24uZGVzY3JpcHRpb24gPSBcIlwiO1xyXG4gICAgICAgICAgbmV3RWxlbWVudENvbmZpcm1hdGlvbi5lZGl0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgICBuZXdFbGVtZW50Q29uZmlybWF0aW9uLmlkID0gXCJjb25maXJtYXRpb25cIjtcclxuICAgICAgICAgIG5ld0VsZW1lbnRDb25maXJtYXRpb24uaW5kZXggPSA5OTk5O1xyXG4gICAgICAgICAgbmV3RWxlbWVudENvbmZpcm1hdGlvbi5vcHRpb25zID0gWydTaSwgQWNlcHRvLiddO1xyXG5cclxuICAgICAgICAgICRzY29wZS5kYXRhQ29udGVudCA9IEpTT04ucGFyc2UoZGF0YS5jb250ZW50KTtcclxuICAgICAgICAgIG5ld0VsZW1lbnRDb25maXJtYXRpb24ub2JqRXh0ID0gJHNjb3BlLmRhdGFDb250ZW50LmZvcm1bMV0ub2JqRXh0O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB2YXIgaXRlbXNOdW1iZXIgPSAkc2NvcGUuZGF0YUNvbnRlbnQuZm9ybS5sZW5ndGg7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zTnVtYmVyIDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpZEpzb24gPSAkc2NvcGUuZGF0YUNvbnRlbnQuZm9ybVtpXS5pZDtcclxuICAgICAgICAgICAgLy92YXIgaXRlbVJlcXVpcmVkID0gJHNjb3BlLmRhdGFDb250ZW50LmZvcm1baV0ucmVxdWlyZWQ7XHJcbiAgICAgICAgICAgIC8vaWYgKCBpZEpzb24gPT0gXCJuYW1lXCIpICAgICAgeyAkc2NvcGUuZGF0YUNvbnRlbnQuZm9ybVtpXS52YWxpZGF0aW9uID0gXCJcIjsgfVxyXG4gICAgICAgICAgICAvL2lmICggaWRKc29uID09IFwibGFzdG5hbWVcIikgIHsgJHNjb3BlLmRhdGFDb250ZW50LmZvcm1baV0udmFsaWRhdGlvbiA9IFwiXCI7IH0gXHJcbiAgICAgICAgICAgIGlmICggaWRKc29uID09IFwiYmlydGhkYXRlXCIpIHsgJHNjb3BlLmRhdGFDb250ZW50LmZvcm1baV0udmFsaWRhdGlvbiA9IFwiXCI7IH1cclxuICAgICAgICAgICAgLy9pZiAoIGlkSnNvbiA9PSBcImluZGljYXRpdmVcIil7ICRzY29wZS5kYXRhQ29udGVudC5mb3JtW2ldLnZhbGlkYXRpb24gPSBcIlwiOyB9XHJcbiAgICAgICAgICAgIC8vaWYgKCBpZEpzb24gPT0gXCJwaG9uZVwiKSAgICAgeyAkc2NvcGUuZGF0YUNvbnRlbnQuZm9ybVtpXS52YWxpZGF0aW9uID0gXCJcIjsgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJHNjb3BlLmRhdGFDb250ZW50LmZvcm0uc3BsaWNlKCRzY29wZS5kYXRhQ29udGVudC5mb3JtLmxlbmd0aCAtIDEsIDAsIG5ld0VsZW1lbnRDb25maXJtYXRpb24pO1xyXG4gICAgICAgICAgJGJ1aWxkZXIuc2V0Rm9ybSgnc2lnbWFGb3JtJywgJHNjb3BlLmRhdGFDb250ZW50LmZvcm0pO1xyXG4gICAgICAgICAgJHNjb3BlLmNvbXBsZXQgPSB0cnVlO1xyXG4gICAgICAgICAgaWYoJHNjb3BlLmRlbGV0ZWRfZm9ybSA9PSB0cnVlKXsgICAgICAgICAgICBcclxuICAgICAgICAgICAgIHN3YWwoXCJIYSBvY3VycmlkbyB1biBlcnJvclwiLCBcIkZPUk1VTEFSSU8gRUxJTUlOQURPXCIsIFwiZXJyb3JcIik7XHJcbiAgICAgICAgICAgICAkKFwiYm9keVwiKS5wcmVwZW5kKFwiPGRpdiBjbGFzcz1cXFwib3ZlcmxheVxcXCI+PC9kaXY+XCIpO1xyXG5cclxuICAgICAgICAgICAgJChcIi5vdmVybGF5XCIpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICBcInBvc2l0aW9uXCI6IFwiYWJzb2x1dGVcIiwgXHJcbiAgICAgICAgICAgICAgICBcIndpZHRoXCI6ICQoZG9jdW1lbnQpLndpZHRoKCksIFxyXG4gICAgICAgICAgICAgICAgXCJoZWlnaHRcIjogJChkb2N1bWVudCkuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICBcInotaW5kZXhcIjogOTk5OTksIFxyXG4gICAgICAgICAgICB9KS5mYWRlVG8oMCwgMC44KTtcclxuICAgICAgICAgIH1lbHNlIGlmKCRzY29wZS5kZWxldGVkX2NsID09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgc3dhbChcIkhhIG9jdXJyaWRvIHVuIGVycm9yXCIsIFwiRk9STVVMQVJJTyBFTElNSU5BRE9cIiwgXCJlcnJvclwiKTtcclxuICAgICAgICAgICAgICQoXCJib2R5XCIpLnByZXBlbmQoXCI8ZGl2IGNsYXNzPVxcXCJvdmVybGF5XFxcIj48L2Rpdj5cIik7XHJcblxyXG4gICAgICAgICAgICAkKFwiLm92ZXJsYXlcIikuY3NzKHtcclxuICAgICAgICAgICAgICAgIFwicG9zaXRpb25cIjogXCJhYnNvbHV0ZVwiLCBcclxuICAgICAgICAgICAgICAgIFwid2lkdGhcIjogJChkb2N1bWVudCkud2lkdGgoKSwgXHJcbiAgICAgICAgICAgICAgICBcImhlaWdodFwiOiAkKGRvY3VtZW50KS5oZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgIFwiei1pbmRleFwiOiA5OTk5OSwgXHJcbiAgICAgICAgICAgIH0pLmZhZGVUbygwLCAwLjgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gICAgICBcclxuICAgICAgJHNjb3BlLnNlbmREYXRhID0gZnVuY3Rpb24gKGlkRm9ybSkge1xyXG4gICAgICAgICQoXCIjc3VibWl0QnV0dG9uXCIpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICRzY29wZS5jb3ZlckRhdGVUb1N0cmluZygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICR2YWxpZGF0b3IudmFsaWRhdGUoJHNjb3BlLCAnc2lnbWFGb3JtJylcclxuICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2VGb3JtU2lnbWEuY29udmVyQXJyYXlUb09iaigkc2NvcGUuaW5wdXQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvKiB2YWxpZGFuZG8gcXVlIGVsIGNhbXBvIGJpcnRoZGF0ZSBleGlzdGFuIGVuIGVsIEpTT04gc2kgbm8gZXMgYXNpXHJcbiAgICAgICAgICAgICAgICAgICAgICogZW50b25jZXMgbm8gdmFsaWRlIGVzdGEgaW5mb3JtYWNpb24geSBzYWx0ZSBhbCBjaGVja2JveCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGRhdGEuYmlydGhkYXRlKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qdmFsaWRhbmRvIHF1ZSBhbCBkaWdpdGFyIGN1YWxxdWllciBjb3NhIHZhbGlkZSBmZWNoYXMuLi4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqZW4gY2FzbyBkZSBxdWUgbm8gaGF5YSBuYWRhIG5vIHZhbGlkZSBuYWRhKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5iaXJ0aGRhdGUgIT0gXCJOYU4tTmFOLU5hTlwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFsaWRhbmRvIGxhIGVkYWQgZGVsIHVzdWFyaW8geSBxdWUgaW5ncmVzZSBmZWNoYXMgcGVybWl0aWRhcy4uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS52YWxpZGF0ZURhdGUoZGF0YSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUudmFsaWRhdGVVbmRlckFnZShkYXRhKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2FsKFwiXCIsIGNvbnRhbnRGb3JtLm1lc3NhZ2UuQWdlLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjc3VibWl0QnV0dG9uXCIpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjc3VibWl0QnV0dG9uXCIpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dhbChcIlwiLCBjb250YW50Rm9ybS5tZXNzYWdlLkludmFsaWREYXRlLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzdWJtaXRCdXR0b25cIikucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvKiB2YWxpZGFuZG8gcXVlIGVsIGNhbXBvIHBob25lIGV4aXN0YW4gZW4gZWwgSlNPTiBzaSBubyBlcyBhc2lcclxuICAgICAgICAgICAgICAgICAgICAgKiBlbnRvbmNlcyBubyB2YWxpZGUgZXN0YSBpbmZvcm1hY2lvbiB5IHNhbHRlIGFsIGNoZWNrYm94Ki8gXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoZGF0YS5waG9uZSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB2YWxpZGFuZG8gcXVlIGFsIGRpZ2l0YXIgY3VhbHF1aWVyIGNvc2EgdmFsaWRlIGZlY2hhcy4uLiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICogZW4gY2FzbyBkZSBxdWUgbm8gaGF5YSBuYWRhIG5vIHZhbGlkZSBuYWRhICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEucGhvbmUgIT0gXCJOYU4tTmFOLU5hTlwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFsaWRhbmRvIGxhIGVkYWQgZGVsIHVzdWFyaW8geSBxdWUgaW5ncmVzZSBmZWNoYXMgcGVybWl0aWRhcy4uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS52YWxpZGF0ZVRlbGVwaG9uZU51bWJlcihkYXRhKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3YWwoXCJcIiwgY29udGFudEZvcm0ubWVzc2FnZS5JbnZhbGlkTnVtYmVyLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzdWJtaXRCdXR0b25cIikucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy92YWxpZGFuZG8gbGEgY29uZmlybWFjaW9uIGFudGVzIGRlIGFjZXB0YXIgZWwgZm9ybVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvbmZpcm1hdGlvbiA9PSBcIlwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgc3dhbChjb250YW50Rm9ybS50aXRsZS5UZXJtLCBjb250YW50Rm9ybS5tZXNzYWdlLlRlcm0sIFwiZXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkKFwiI3N1Ym1pdEJ1dHRvblwiKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSBcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZSB1dGlsaXpvIHVuYSB2YXJpYW50ZSBkZWwgY29tcG9uZW50ZSBzd2VldGFsZXJ0IHBhcmEgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcXVlIGFsIGFjZXB0YXIgZWwgdXN1YXJpbyB2aWVyYSB1biBjb21wb25lbnRlIGRlIGNhcmdhLlxyXG4gICAgICAgICAgICAgICAgICAgIHN3YWwucXVldWUoW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGNvbnRhbnRGb3JtLnRpdGxlLlZhbGlkLCBjb25maXJtQnV0dG9uVGV4dDogJ09rJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogY29udGFudEZvcm0ubWVzc2FnZS5WYWxpZCwgc2hvd0xvYWRlck9uQ29uZmlybTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlQ29uZmlybTogZnVuY3Rpb24gKGVtYWlsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7cmVzb2x2ZSgpfSwgNjAwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfV0pXHJcbiAgICAgICAgICAgICAgICAgICAgc2VydmljZUZvcm1TaWdtYS5zZW5kRm9ybShpZEZvcm0sIGRhdGEpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICQoXCIjc2lnbWFGb3JtXCIpWzBdLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBzd2FsKGNvbnRhbnRGb3JtLnRpdGxlLkFjZXB0LCBjb250YW50Rm9ybS5tZXNzYWdlLkFjZXB0LCBcInN1Y2Nlc3NcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkKFwiI3N1Ym1pdEJ1dHRvblwiKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEudXJsICE9IFwiXCIgJiYgZGF0YS51cmwgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyR3aW5kb3cubG9jYXRpb24uaHJlZiA9IGRhdGEudXJsO30sIDMwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgLy9zd2FsKGNvbnRhbnRGb3JtLnRpdGxlLkFjZXB0LCBjb250YW50Rm9ybS5tZXNzYWdlLkFjZXB0LCBcInN1Y2Nlc3NcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNzdWJtaXRCdXR0b25cIikucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS52YWxpZGF0ZVRlbGVwaG9uZU51bWJlciA9IGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZhciB0ZWxlZm9ub0RpZ2l0YWRvID0gMDtcclxuICAgICAgICB0ZWxlZm9ub0RpZ2l0YWRvID0gZGF0YS5waG9uZVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgaWYodGVsZWZvbm9EaWdpdGFkby50b1N0cmluZygpLmxlbmd0aCAhPSAxMCl7XHJcbiAgICAgICAgICAgcmV0dXJuIHRydWU7ICAvL3NpIGVzIGRpZmVyZW50ZSBkZSAxMC5cclxuICAgICAgICB9IFxyXG4gICAgICAgIHJldHVybiBmYWxzZTsgLy95YSBxdWUgbm8gZXMgaWd1YWwgYSAxMC5cclxuICAgICAgfSxcclxuICAgICAgJHNjb3BlLmNvdmVyRGF0ZVRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgdmFyIG9ialJldHVybiA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIGkgaW4gJHNjb3BlLmlucHV0KSB7XHJcbiAgICAgICAgICB2YXIgdmFsdWUgPSAkc2NvcGUuaW5wdXRbaV0udmFsdWU7XHJcbiAgICAgICAgICB2YXIgbmFtZSA9ICRzY29wZS5pbnB1dFtpXS5pZDtcclxuICAgICAgICAgIHZhciBjb21wb25lbnQgPSAkc2NvcGUuaW5wdXRbaV0uY29tcG9uZW50O1xyXG4gICAgICAgICAgaWYgKGNvbXBvbmVudCA9PSBcImVuY2FiZXphZG9cIiAmJiBjb21wb25lbnQgPT0gXCJidXR0b25cIikge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChjb21wb25lbnQgPT0gXCJkYXRlSW5wdXRcIikge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcclxuICAgICAgICAgICAgdmFyIG1vbnRoLCBkYXk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlLmdldE1vbnRoKCkgKyAxIDwgMTApIHtcclxuICAgICAgICAgICAgICBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgICAgbW9udGggPSBcIjBcIiArIG1vbnRoLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkYXRlLmdldERhdGUoKSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgZGF5ID0gXCIwXCIgKyBkYXRlLmdldERhdGUoKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGRheSA9IGRhdGUuZ2V0RGF0ZSgpICsgMTsgLy9jb24gZXN0YSBhZGljaW9uIGxhIGZlY2hhIHlhIG5vIHJldHJvY2VkZS4uLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5pbnB1dFtpXS52YWx1ZSA9IGRhdGUuZ2V0RnVsbFllYXIoKSArIFwiLVwiICsgbW9udGggKyBcIi1cIiArIGRheTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZGVmZXIucmVzb2x2ZSgkc2NvcGUuaW5wdXQpO1xyXG4gICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xyXG4gICAgICB9LFxyXG4gICAgICAkc2NvcGUudmFsaWRhdGVVbmRlckFnZSA9IGZ1bmN0aW9uKGRhdGEpeyAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy9lc3RvIGVzIHBhcmEgbGEgZmVjaGEgYWN0dWFsXHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHZhciB5ZWFyMSA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBcclxuICAgICAgICAvL2VzdG8gZXMgcGFyYSBsYSBmZWNoYSBkaWdpdGFkYVxyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0YS5iaXJ0aGRhdGUpO1xyXG4gICAgICAgIHZhciB5ZWFyMiA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBcclxuICAgICAgICAvL2ZlY2hhIGFjdHVhbCBtZW5vcyAxOCBwYXJhIHNhYmVyIGHDsW8gZGUgY29tcGFyYWNpb24uLi5cclxuICAgICAgICB2YXIgY29tcGFyYXRpdmVZZWFyID0gKHllYXIxIC0gMTgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh5ZWFyMiA+IGNvbXBhcmF0aXZlWWVhcil7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLnZhbGlkYXRlRGF0ZSA9IGZ1bmN0aW9uIChkYXRhKXtcclxuICAgICAgICBcclxuICAgICAgICAvL2VzdG8gZXMgcGFyYSBsYSBmZWNoYSBhY3R1YWxcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdmFyIG1vbnRoLCBkYXk7XHJcbiAgICAgICAgaWYgKGRhdGUuZ2V0TW9udGgoKSArIDEgPCAxMCkge1xyXG4gICAgICAgICAgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgbW9udGggPSBcIjBcIiArIG1vbnRoLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGUuZ2V0RGF0ZSgpIDwgMTApIHtcclxuICAgICAgICAgIGRheSA9IFwiMFwiICsgZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZGF5ID0gZGF0ZS5nZXREYXRlKCk7IC8vY29uIGVzdGEgYWRpY2lvbiBsYSBmZWNoYSB5YSBubyByZXRyb2NlZGUuLi5cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZhbHVlMSA9IGRhdGUuZ2V0RnVsbFllYXIoKSArIFwiLVwiICsgbW9udGggKyBcIi1cIiArIGRheTtcclxuICAgICAgICB2YXIgZGF0ZUZvcm1hdGVkMSA9IG5ldyBEYXRlKHZhbHVlMSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy9lc3RlIGRhdGUgZXMgcGFyYSBsYSBmZWNoYSBkaWdpdGFkYVxyXG4gICAgICAgIHZhciBkYXRlU2VsZWN0ZWQgPSBkYXRhLmJpcnRoZGF0ZTtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTZWxlY3RlZCk7XHJcbiAgICAgICAgdmFyIG1vbnRoLCBkYXk7XHJcbiAgICAgICAgaWYgKGRhdGUuZ2V0TW9udGgoKSArIDEgPCAxMCkge1xyXG4gICAgICAgICAgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgbW9udGggPSBcIjBcIiArIG1vbnRoLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF5ID0gKGRhdGUuZ2V0RGF0ZSgpKzEpXHJcbiAgICAgICAgaWYgKGRheSA8IDEwKSB7XHJcbiAgICAgICAgICBkYXkgPSBcIjBcIiArIGRheS50b1N0cmluZygpO1xyXG4gICAgICAgIH0gZWxzZSB7ICBcclxuICAgICAgICAgIGRheSA9IGRhdGUuZ2V0RGF0ZSgpKzE7IC8vY29uIGVzdGEgYWRpY2lvbiBsYSBmZWNoYSB5YSBubyByZXRyb2NlZGUuLi5cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZhbHVlMiA9IGRhdGUuZ2V0RnVsbFllYXIoKSArIFwiLVwiICsgbW9udGggKyBcIi1cIiArIGRheTtcclxuICAgICAgICB2YXIgZGF0ZUZvcm1hdGVkMiA9IG5ldyBEYXRlKHZhbHVlMik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGRhdGVGb3JtYXRlZDEgPj0gZGF0ZUZvcm1hdGVkMil7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgIH1dKVxyXG59KS5jYWxsKHRoaXMpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vanMvYW5ndWxhci9mb3Jtcy9hcHBmb3JtLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n(function () {\r\n  angular.module('forms', ['ui.router', 'forms.controllers', 'forms.services', 'ngMaterial', 'ui.select', 'ngSanitize', 'builder', 'builder.components', 'validator.rules', 'ui.bootstrap', 'colorpicker.module', 'angularSpectrumColorpicker', 'xeditable'])\r\n          .run(function (editableOptions, editableThemes) {\r\n            editableThemes.bs3.inputClass = 'input-sm';\r\n            editableThemes.bs3.buttonsClass = 'btn-sm';\r\n            editableOptions.theme = 'bs3';\r\n          })\r\n          .config([\r\n            '$validatorProvider', function ($validatorProvider) {\r\n              $validatorProvider.register('required', {\r\n                invoke: 'watch',\r\n                validator: /.+/,\r\n                error: 'El campo es requerido.'\r\n              });\r\n              $validatorProvider.register('number', {\r\n                invoke: 'watch',\r\n                validator: /^[-+]?[0-9]*[\\.]?[0-9]*$/,\r\n                error: 'El campo solo pude ingresar numeros.'\r\n              });\r\n              $validatorProvider.register('email', {\r\n                invoke: 'blur',\r\n                validator: /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\r\n                error: 'El formato del correo no es valido.'\r\n              });\r\n              $validatorProvider.register('numberEnteros', {\r\n                invoke: 'blur',\r\n                validator: /^[0-9]+$/,\r\n                error: 'Solo se es permitido numeros enteros'\r\n              });\r\n              $validatorProvider.register('fecha', {\r\n                invoke: 'blur',\r\n                validator: /.+/,\r\n                error: 'El formato de la fecha no es valido.'\r\n              });\r\n              return $validatorProvider.register('url', {\r\n                invoke: 'blur',\r\n                validator: /((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\\+\\$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[\\+~%\\/.\\w-_]*)?\\??(?:[-\\+=&;%@.\\w_]*)#?(?:[\\w]*))?)/,\r\n                error: 'El formato de la url no es valido.'\r\n              });\r\n            }])\r\n          .config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {\r\n              $stateProvider\r\n                  .state('list', {\r\n                    url: \"/\",\r\n                    templateUrl: fullUrlBase + templateBase + '/list',\r\n                    controller: 'indexController'\r\n                  })\r\n                  .state('create', {\r\n                     url: \"/create\",\r\n                    templateUrl: fullUrlBase + templateBase + '/create',\r\n                    controller: 'main',\r\n                  })\r\n                  .state('create.describe', {\r\n                    url: \"/basicinformation/:id\",\r\n                    templateUrl: fullUrlBase + templateBase + '/basicinformation',\r\n                    controller: 'createBasicInformationController'\r\n                  })\r\n                  .state('create.forms', {\r\n                    url: \"/forms/:id\",\r\n                    templateUrl: fullUrlBase + templateBase + '/forms',\r\n                    controller: 'formsController'\r\n                  })\r\n                  .state('reportforms', {\r\n                    url: \"/report/:id\",\r\n                    templateUrl: fullUrlBase + templateBase + '/report',\r\n                    controller: 'reportController'\r\n                  })\r\n                  .state('create.edit', {\r\n                    url:\"/basicinformation/:id\",\r\n                    templeateUrl: fullUrlBase + templateBase + '/basicinformation',\r\n                    controller: 'indexController'\r\n                  })\r\n                  .state('contacts', {\r\n                    url: \"/contacts/:id\",\r\n                    templateUrl: fullUrlBase + templateBase + '/contacts',\r\n                    controller: 'ContactsController'\r\n                  })\r\n            }])\r\n            .constant('constantForms', {\r\n            Notifications: {\r\n              Errors: {\r\n                errorNoneContactsInscriptForms: \"No se tienen contactos registrados con este formulario\"\r\n              }\r\n            },\r\n            UrlPeticion: {\r\n              Urls: {\r\n                listlanding: 'api/landingpage/listlanding/',\r\n                getAllReportEmail: fullUrlBase+'api/report/getallreportemail/',\r\n                getContactlist: fullUrlBase+'api/sendmail/getcontactlist',\r\n                getMailTemplate: fullUrlBase+'api/mailtemplate/getallmailtemplate',\r\n                previewMailTemplateContent: fullUrlBase+'api/mailtemplate/preview/',\r\n                saveBasicInformation: fullUrlBase+'api/forms/savebasicinformation',\r\n                updatebasicinformation: fullUrlBase+'api/forms/updatebasicinformation/',\r\n                getCustomfield: fullUrlBase+'api/sendmail/getcustomfield/',\r\n                listForms: fullUrlBase+'api/forms/listforms/',\r\n                getAllFormCategory: fullUrlBase+'api/forms/getallformscategories',\r\n                getInformationForm: fullUrlBase+'api/forms/getinformationform/',\r\n                saveForm: fullUrlBase+'api/forms/saveforms/',\r\n                getAllIndicative: fullUrlBase+'api/contact/getallindicative',\r\n                getAll: fullUrlBase+'api/contact/getcontactsform/',\r\n                customfieldselect: fullUrlBase+'api/contact/customfieldselect/',\r\n                editContact: fullUrlBase+'api/contact/editcontact/',\r\n                changestatus: fullUrlBase+'api/contact/changestatus/',\r\n                deleteContact: fullUrlBase+'api/contact/deleconta/',\r\n                getOptin: fullUrlBase+'api/forms/getoptin/',\r\n                getWelcomeMail: fullUrlBase+'api/forms/getwelcomemail/',\r\n                getNotification: fullUrlBase+'api/forms/getnotificationform/',\r\n                getcontentform: fullUrlBase+'api/forms/getcontentform/',\r\n                addFormCategory: fullUrlBase+'api/forms/addformcategory',\r\n                getallmailtemplatebyfilter: fullUrlBase+'api/mailtemplate/getallmailtemplatebyfilter',\r\n                suscripsforms: fullUrlBase+'api/forms/getsuscriptsform/',\r\n                dowloadReportContactsForm: fullUrlBase+'api/forms/dowloadreportcontactsform/',\r\n                deleteForm: fullUrlBase + 'api/forms/deleteform',\r\n              }\r\n            }\r\n          });\r\n})();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL2Zvcm1zL2FwcC5qcz84MTBjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsNkNBQTZDLHlCQUF5QixnQ0FBZ0MsSUFBSSxRQUFRLElBQUksUUFBUSxJQUFJLFFBQVEsSUFBSSxpQ0FBaUMsR0FBRztBQUNsTDtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0Esd0NBQXdDLElBQUksaUJBQWlCLHlDQUF5QyxnRUFBZ0U7QUFDdEs7QUFDQSxlQUFlO0FBQ2YsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxDQUFDIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgYW5ndWxhci5tb2R1bGUoJ2Zvcm1zJywgWyd1aS5yb3V0ZXInLCAnZm9ybXMuY29udHJvbGxlcnMnLCAnZm9ybXMuc2VydmljZXMnLCAnbmdNYXRlcmlhbCcsICd1aS5zZWxlY3QnLCAnbmdTYW5pdGl6ZScsICdidWlsZGVyJywgJ2J1aWxkZXIuY29tcG9uZW50cycsICd2YWxpZGF0b3IucnVsZXMnLCAndWkuYm9vdHN0cmFwJywgJ2NvbG9ycGlja2VyLm1vZHVsZScsICdhbmd1bGFyU3BlY3RydW1Db2xvcnBpY2tlcicsICd4ZWRpdGFibGUnXSlcclxuICAgICAgICAgIC5ydW4oZnVuY3Rpb24gKGVkaXRhYmxlT3B0aW9ucywgZWRpdGFibGVUaGVtZXMpIHtcclxuICAgICAgICAgICAgZWRpdGFibGVUaGVtZXMuYnMzLmlucHV0Q2xhc3MgPSAnaW5wdXQtc20nO1xyXG4gICAgICAgICAgICBlZGl0YWJsZVRoZW1lcy5iczMuYnV0dG9uc0NsYXNzID0gJ2J0bi1zbSc7XHJcbiAgICAgICAgICAgIGVkaXRhYmxlT3B0aW9ucy50aGVtZSA9ICdiczMnO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jb25maWcoW1xyXG4gICAgICAgICAgICAnJHZhbGlkYXRvclByb3ZpZGVyJywgZnVuY3Rpb24gKCR2YWxpZGF0b3JQcm92aWRlcikge1xyXG4gICAgICAgICAgICAgICR2YWxpZGF0b3JQcm92aWRlci5yZWdpc3RlcigncmVxdWlyZWQnLCB7XHJcbiAgICAgICAgICAgICAgICBpbnZva2U6ICd3YXRjaCcsXHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IC8uKy8sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogJ0VsIGNhbXBvIGVzIHJlcXVlcmlkby4nXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgJHZhbGlkYXRvclByb3ZpZGVyLnJlZ2lzdGVyKCdudW1iZXInLCB7XHJcbiAgICAgICAgICAgICAgICBpbnZva2U6ICd3YXRjaCcsXHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IC9eWy0rXT9bMC05XSpbXFwuXT9bMC05XSokLyxcclxuICAgICAgICAgICAgICAgIGVycm9yOiAnRWwgY2FtcG8gc29sbyBwdWRlIGluZ3Jlc2FyIG51bWVyb3MuJ1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICR2YWxpZGF0b3JQcm92aWRlci5yZWdpc3RlcignZW1haWwnLCB7XHJcbiAgICAgICAgICAgICAgICBpbnZva2U6ICdibHVyJyxcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRvcjogL14oKFtePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSsoXFwuW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKykqKXwoXFxcIi4rXFxcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC8sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogJ0VsIGZvcm1hdG8gZGVsIGNvcnJlbyBubyBlcyB2YWxpZG8uJ1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICR2YWxpZGF0b3JQcm92aWRlci5yZWdpc3RlcignbnVtYmVyRW50ZXJvcycsIHtcclxuICAgICAgICAgICAgICAgIGludm9rZTogJ2JsdXInLFxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdG9yOiAvXlswLTldKyQvLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdTb2xvIHNlIGVzIHBlcm1pdGlkbyBudW1lcm9zIGVudGVyb3MnXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgJHZhbGlkYXRvclByb3ZpZGVyLnJlZ2lzdGVyKCdmZWNoYScsIHtcclxuICAgICAgICAgICAgICAgIGludm9rZTogJ2JsdXInLFxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdG9yOiAvLisvLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdFbCBmb3JtYXRvIGRlIGxhIGZlY2hhIG5vIGVzIHZhbGlkby4nXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuICR2YWxpZGF0b3JQcm92aWRlci5yZWdpc3RlcigndXJsJywge1xyXG4gICAgICAgICAgICAgICAgaW52b2tlOiAnYmx1cicsXHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IC8oKChbQS1aYS16XXszLDl9Oig/OlxcL1xcLyk/KSg/OlstOzomPVxcK1xcJCxcXHddK0ApP1tBLVphLXowLTkuLV0rfCg/Ond3dy58Wy07OiY9XFwrXFwkLFxcd10rQClbQS1aYS16MC05Li1dKykoKD86XFwvW1xcK34lXFwvLlxcdy1fXSopP1xcPz8oPzpbLVxcKz0mOyVALlxcd19dKikjPyg/OltcXHddKikpPykvLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdFbCBmb3JtYXRvIGRlIGxhIHVybCBubyBlcyB2YWxpZG8uJ1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XSlcclxuICAgICAgICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICAgICAgICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICAgIC5zdGF0ZSgnbGlzdCcsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBmdWxsVXJsQmFzZSArIHRlbXBsYXRlQmFzZSArICcvbGlzdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2luZGV4Q29udHJvbGxlcidcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgLnN0YXRlKCdjcmVhdGUnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgIHVybDogXCIvY3JlYXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGZ1bGxVcmxCYXNlICsgdGVtcGxhdGVCYXNlICsgJy9jcmVhdGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdtYWluJyxcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgLnN0YXRlKCdjcmVhdGUuZGVzY3JpYmUnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi9iYXNpY2luZm9ybWF0aW9uLzppZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBmdWxsVXJsQmFzZSArIHRlbXBsYXRlQmFzZSArICcvYmFzaWNpbmZvcm1hdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2NyZWF0ZUJhc2ljSW5mb3JtYXRpb25Db250cm9sbGVyJ1xyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAuc3RhdGUoJ2NyZWF0ZS5mb3JtcycsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL2Zvcm1zLzppZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBmdWxsVXJsQmFzZSArIHRlbXBsYXRlQmFzZSArICcvZm9ybXMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdmb3Jtc0NvbnRyb2xsZXInXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIC5zdGF0ZSgncmVwb3J0Zm9ybXMnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi9yZXBvcnQvOmlkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGZ1bGxVcmxCYXNlICsgdGVtcGxhdGVCYXNlICsgJy9yZXBvcnQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdyZXBvcnRDb250cm9sbGVyJ1xyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAuc3RhdGUoJ2NyZWF0ZS5lZGl0Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDpcIi9iYXNpY2luZm9ybWF0aW9uLzppZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsZWF0ZVVybDogZnVsbFVybEJhc2UgKyB0ZW1wbGF0ZUJhc2UgKyAnL2Jhc2ljaW5mb3JtYXRpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdpbmRleENvbnRyb2xsZXInXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIC5zdGF0ZSgnY29udGFjdHMnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi9jb250YWN0cy86aWRcIixcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogZnVsbFVybEJhc2UgKyB0ZW1wbGF0ZUJhc2UgKyAnL2NvbnRhY3RzJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQ29udGFjdHNDb250cm9sbGVyJ1xyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XSlcclxuICAgICAgICAgICAgLmNvbnN0YW50KCdjb25zdGFudEZvcm1zJywge1xyXG4gICAgICAgICAgICBOb3RpZmljYXRpb25zOiB7XHJcbiAgICAgICAgICAgICAgRXJyb3JzOiB7XHJcbiAgICAgICAgICAgICAgICBlcnJvck5vbmVDb250YWN0c0luc2NyaXB0Rm9ybXM6IFwiTm8gc2UgdGllbmVuIGNvbnRhY3RvcyByZWdpc3RyYWRvcyBjb24gZXN0ZSBmb3JtdWxhcmlvXCJcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFVybFBldGljaW9uOiB7XHJcbiAgICAgICAgICAgICAgVXJsczoge1xyXG4gICAgICAgICAgICAgICAgbGlzdGxhbmRpbmc6ICdhcGkvbGFuZGluZ3BhZ2UvbGlzdGxhbmRpbmcvJyxcclxuICAgICAgICAgICAgICAgIGdldEFsbFJlcG9ydEVtYWlsOiBmdWxsVXJsQmFzZSsnYXBpL3JlcG9ydC9nZXRhbGxyZXBvcnRlbWFpbC8nLFxyXG4gICAgICAgICAgICAgICAgZ2V0Q29udGFjdGxpc3Q6IGZ1bGxVcmxCYXNlKydhcGkvc2VuZG1haWwvZ2V0Y29udGFjdGxpc3QnLFxyXG4gICAgICAgICAgICAgICAgZ2V0TWFpbFRlbXBsYXRlOiBmdWxsVXJsQmFzZSsnYXBpL21haWx0ZW1wbGF0ZS9nZXRhbGxtYWlsdGVtcGxhdGUnLFxyXG4gICAgICAgICAgICAgICAgcHJldmlld01haWxUZW1wbGF0ZUNvbnRlbnQ6IGZ1bGxVcmxCYXNlKydhcGkvbWFpbHRlbXBsYXRlL3ByZXZpZXcvJyxcclxuICAgICAgICAgICAgICAgIHNhdmVCYXNpY0luZm9ybWF0aW9uOiBmdWxsVXJsQmFzZSsnYXBpL2Zvcm1zL3NhdmViYXNpY2luZm9ybWF0aW9uJyxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWJhc2ljaW5mb3JtYXRpb246IGZ1bGxVcmxCYXNlKydhcGkvZm9ybXMvdXBkYXRlYmFzaWNpbmZvcm1hdGlvbi8nLFxyXG4gICAgICAgICAgICAgICAgZ2V0Q3VzdG9tZmllbGQ6IGZ1bGxVcmxCYXNlKydhcGkvc2VuZG1haWwvZ2V0Y3VzdG9tZmllbGQvJyxcclxuICAgICAgICAgICAgICAgIGxpc3RGb3JtczogZnVsbFVybEJhc2UrJ2FwaS9mb3Jtcy9saXN0Zm9ybXMvJyxcclxuICAgICAgICAgICAgICAgIGdldEFsbEZvcm1DYXRlZ29yeTogZnVsbFVybEJhc2UrJ2FwaS9mb3Jtcy9nZXRhbGxmb3Jtc2NhdGVnb3JpZXMnLFxyXG4gICAgICAgICAgICAgICAgZ2V0SW5mb3JtYXRpb25Gb3JtOiBmdWxsVXJsQmFzZSsnYXBpL2Zvcm1zL2dldGluZm9ybWF0aW9uZm9ybS8nLFxyXG4gICAgICAgICAgICAgICAgc2F2ZUZvcm06IGZ1bGxVcmxCYXNlKydhcGkvZm9ybXMvc2F2ZWZvcm1zLycsXHJcbiAgICAgICAgICAgICAgICBnZXRBbGxJbmRpY2F0aXZlOiBmdWxsVXJsQmFzZSsnYXBpL2NvbnRhY3QvZ2V0YWxsaW5kaWNhdGl2ZScsXHJcbiAgICAgICAgICAgICAgICBnZXRBbGw6IGZ1bGxVcmxCYXNlKydhcGkvY29udGFjdC9nZXRjb250YWN0c2Zvcm0vJyxcclxuICAgICAgICAgICAgICAgIGN1c3RvbWZpZWxkc2VsZWN0OiBmdWxsVXJsQmFzZSsnYXBpL2NvbnRhY3QvY3VzdG9tZmllbGRzZWxlY3QvJyxcclxuICAgICAgICAgICAgICAgIGVkaXRDb250YWN0OiBmdWxsVXJsQmFzZSsnYXBpL2NvbnRhY3QvZWRpdGNvbnRhY3QvJyxcclxuICAgICAgICAgICAgICAgIGNoYW5nZXN0YXR1czogZnVsbFVybEJhc2UrJ2FwaS9jb250YWN0L2NoYW5nZXN0YXR1cy8nLFxyXG4gICAgICAgICAgICAgICAgZGVsZXRlQ29udGFjdDogZnVsbFVybEJhc2UrJ2FwaS9jb250YWN0L2RlbGVjb250YS8nLFxyXG4gICAgICAgICAgICAgICAgZ2V0T3B0aW46IGZ1bGxVcmxCYXNlKydhcGkvZm9ybXMvZ2V0b3B0aW4vJyxcclxuICAgICAgICAgICAgICAgIGdldFdlbGNvbWVNYWlsOiBmdWxsVXJsQmFzZSsnYXBpL2Zvcm1zL2dldHdlbGNvbWVtYWlsLycsXHJcbiAgICAgICAgICAgICAgICBnZXROb3RpZmljYXRpb246IGZ1bGxVcmxCYXNlKydhcGkvZm9ybXMvZ2V0bm90aWZpY2F0aW9uZm9ybS8nLFxyXG4gICAgICAgICAgICAgICAgZ2V0Y29udGVudGZvcm06IGZ1bGxVcmxCYXNlKydhcGkvZm9ybXMvZ2V0Y29udGVudGZvcm0vJyxcclxuICAgICAgICAgICAgICAgIGFkZEZvcm1DYXRlZ29yeTogZnVsbFVybEJhc2UrJ2FwaS9mb3Jtcy9hZGRmb3JtY2F0ZWdvcnknLFxyXG4gICAgICAgICAgICAgICAgZ2V0YWxsbWFpbHRlbXBsYXRlYnlmaWx0ZXI6IGZ1bGxVcmxCYXNlKydhcGkvbWFpbHRlbXBsYXRlL2dldGFsbG1haWx0ZW1wbGF0ZWJ5ZmlsdGVyJyxcclxuICAgICAgICAgICAgICAgIHN1c2NyaXBzZm9ybXM6IGZ1bGxVcmxCYXNlKydhcGkvZm9ybXMvZ2V0c3VzY3JpcHRzZm9ybS8nLFxyXG4gICAgICAgICAgICAgICAgZG93bG9hZFJlcG9ydENvbnRhY3RzRm9ybTogZnVsbFVybEJhc2UrJ2FwaS9mb3Jtcy9kb3dsb2FkcmVwb3J0Y29udGFjdHNmb3JtLycsXHJcbiAgICAgICAgICAgICAgICBkZWxldGVGb3JtOiBmdWxsVXJsQmFzZSArICdhcGkvZm9ybXMvZGVsZXRlZm9ybScsXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxufSkoKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9qcy9hbmd1bGFyL2Zvcm1zL2FwcC5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n(function () {\r\n  angular.module('forms.controllers', [])\r\n          .filter('propsFilter', function () {\r\n            return function (items, props) {\r\n              var out = [];\r\n              if (angular.isArray(items)) {\r\n                var keys = Object.keys(props);\r\n                items.forEach(function (item) {\r\n                  var itemMatches = false;\r\n                  for (var i = 0; i < keys.length; i++) {\r\n                    var prop = keys[i];\r\n                    var text = props[prop].toLowerCase();\r\n                    if (item[prop].toString().toLowerCase().indexOf(text) !== -1) {\r\n                      itemMatches = true;\r\n                      break;\r\n                    }\r\n                  }\r\n\r\n                  if (itemMatches) {\r\n                    out.push(item);\r\n                  }\r\n                });\r\n              } else {\r\n                out = items;\r\n              }\r\n\r\n              return out;\r\n            };\r\n          })\r\n          .controller('indexController', ['$scope', 'restService', 'notificationService', '$builder', '$validator', '$window', '$timeout', function ($scope, restService, notificationService, $builder, $validatorm, $window, $timeout) {\r\n              $scope.initial = 0;\r\n              $scope.page = 1;\r\n              $scope.previewShow = false;\r\n              $scope.input = [];\r\n              $scope.forward = function () {\r\n                $scope.initial += 1;\r\n                $scope.page += 1;\r\n                $scope.listForms();\r\n              };\r\n              $scope.fastforward = function () {\r\n                $scope.initial = ($scope.list.total_pages - 1);\r\n                $scope.page = $scope.list.total_pages;\r\n                $scope.listForms();\r\n              };\r\n              $scope.backward = function () {\r\n                $scope.initial -= 1;\r\n                $scope.page -= 1;\r\n                $scope.listForms();\r\n              };\r\n              $scope.fastbackward = function () {\r\n                $scope.initial = 0;\r\n                $scope.page = 1;\r\n                $scope.listForms();\r\n              };\r\n              $scope.listForms = function () {\r\n                restService.listForms($scope.initial, $scope.filter).then(function (res) {\r\n                  $scope.list = res;\r\n                });\r\n              };\r\n              $scope.listForms();\r\n              $scope.filter = {};\r\n\r\n              $scope.filtername = function () {\r\n                restService.listForms($scope.initial, $scope.filter).then(function (res) {\r\n                  $scope.list = res;\r\n                });\r\n              };\r\n\r\n              $scope.openModal = function (idForm) {\r\n                $scope.idForm = idForm;\r\n                $('#deleteDialog').addClass('dialog--open');\r\n              }; \r\n              \r\n              $scope.closeModal = function () {\r\n                $('#deleteDialog').removeClass('dialog--open');\r\n              };\r\n              \r\n              $scope.deleteForm = function () {\r\n                restService.deleteForm({idForm: $scope.idForm}).then(function (res) { \r\n                  notificationService.warning(res.message);\r\n                  $scope.listForms();\r\n                });\r\n                $scope.closeModal();\r\n              };\r\n              $scope.translateType = function (type) {\r\n                switch (type) {\r\n                  case 'suscription':\r\n                    return 'SuscripciÃ³n';\r\n                  case 'updating':\r\n                    return 'ActualizaciÃ³n';\r\n                }\r\n              };\r\n              getAllCategories();\r\n              $scope.previsualizar = function ($index) {\r\n                $scope.previewShow = false;\r\n                var json = JSON.parse($scope.list.items[$index].content.content);\r\n                $builder.setForm('sigmaForm', json.form);\r\n                $(\"#preview\").addClass('dialog--open');\r\n                $scope.backgroundForm = json.background;\r\n\r\n                $timeout(function () {\r\n                  $scope.previewShow = true;\r\n                }, 1000);\r\n              }\r\n\r\n              $scope.validateForm = function () {\r\n                $validator.validate($scope, 'sigmaForm')\r\n                        .success(function () {})\r\n                        .error(function () {});\r\n              }\r\n              $scope.codeHtml = function ($index) {\r\n                $(\"#codeHtml\").addClass('dialog--open');\r\n                $scope.codeHtmlString = angular.copy($scope.list.items[$index].html);\r\n              }\r\n              $scope.codeIframe = function ($index) {\r\n                $(\"#iframe\").addClass('dialog--open');\r\n                $scope.codeIframeString = angular.copy($scope.list.items[$index].iframe);\r\n              }\r\n\r\n              $scope.removeDialog = function (modal) {\r\n                $(\"#\" + modal).removeClass('dialog--open');\r\n              }\r\n\r\n              $scope.reloadEditForm = function (idForm) {\r\n                $window.location.href = fullUrlBase + templateBase + '/create#/basicinformation/' + idForm;\r\n              }\r\n\r\n              function getAllCategories() {\r\n                restService.getAllFormCategory().then(function (res) {\r\n                  $scope.category = res;\r\n                });\r\n              }\r\n            }])\r\n          .controller('createBasicInformationController', ['$scope', 'restService', 'notificationService', '$window', '$state', '$stateParams', '$rootScope', function ($scope, restService, notificationService, $window, $state, $stateParams, $rootScope) {\r\n              $scope.data = {};\r\n              $scope.data.doubleOptin = {};\r\n              $scope.data.mailWelcome = {};\r\n              $scope.data.notification = {};\r\n              $scope.showInputCate = false;\r\n              $scope.showSelectCate = true;\r\n              $scope.showIconsCate = true;\r\n              $scope.showIconsSaveCate = false;\r\n\r\n\r\n              $scope.changeStatusInputCate = function () {\r\n                if (!$scope.showInputCate) {\r\n                  $scope.showInputCate = true;\r\n                  $scope.showSelectCate = false;\r\n                  $scope.showIconsCate = false;\r\n                  $scope.showIconsSaveCate = true;\r\n                } else {\r\n                  $scope.showInputCate = false;\r\n                  $scope.showSelectCate = true;\r\n                  $scope.showIconsCate = true;\r\n                  $scope.showIconsSaveCate = false;\r\n                }\r\n              }\r\n\r\n              $scope.saveBasicInformation = function () {\r\n                if (typeof $stateParams.id != \"undefined\" && $stateParams.id != \"\") {\r\n                  restService.updatebasicinformation($stateParams.id, $scope.data).then(function (data) {\r\n                    notificationService.success(\"Se ha creado la informaciÃ³n basica del formulario\");\r\n                    $state.go('create.forms', {id: $stateParams.id});\r\n                  });\r\n                } else {\r\n                  restService.saveBasicInformation($scope.data).then(function (data) {\r\n                    notificationService.success(\"Se ha creado la informaciÃ³n basica del formulario\");\r\n                    $state.go('create.forms', {id: data.idForm});\r\n                  });\r\n                }\r\n\r\n              };\r\n              $scope.previewmailtempcont = function (id) {\r\n                if (id) {\r\n                  restService.previewMailTemplateContent(id).then(function (data) {\r\n                    var e = data.template;\r\n                    document.getElementById(\"preview-modal\").innerHTML = \"\";\r\n                    $('<iframe frameborder=\"0\" width=\"100%\" height=\"100%\"/>').appendTo('#preview-modal').contents().find('body').append(e);\r\n                    $('#myModal').modal('show');\r\n                  });\r\n                }\r\n              };\r\n              $scope.getContactList = function () {\r\n                restService.getContactlist().then(function (res) {\r\n                  $scope.contactlist = res;\r\n                });\r\n              };\r\n\r\n              getAllCategories();\r\n\r\n              function getAllCategories() {\r\n                restService.getAllFormCategory().then(function (res) {\r\n                  $scope.category = res;\r\n                });\r\n              }\r\n              ;\r\n\r\n              $scope.saveCategory = function () {\r\n                var data = {category: $scope.nameCategory};\r\n\r\n                restService.addFormCategory(data).then(function (res) {\r\n                  notificationService.success(res['msg']);\r\n                  $scope.nameCategory = \"\";\r\n                  getAllCategories();\r\n                  $scope.changeStatusInputCate();\r\n                  $scope.data.idFormCategory = res['idFormCategory'];\r\n                });\r\n              };\r\n\r\n              $scope.getMailTemplate = function (search) {\r\n                if (search) {\r\n                  restService.getallmailtemplatebyfilter(search).then(function (data) {\r\n                    $scope.mailtemplate = data;\r\n                  });\r\n                } else {\r\n                  restService.getMailTemplate().then(function (res) {\r\n                    $scope.mailtemplate = res;\r\n                  });\r\n                }\r\n              };\r\n\r\n              if (typeof $stateParams.id != \"undefined\" && $stateParams.id != \"\") {\r\n                $rootScope.idForm = $stateParams.id;\r\n                restService.getInformationForm($stateParams.id).then(function (data) {\r\n                  $scope.data = data;\r\n                  $scope.data.idFormCategory = data.idFormCategory;\r\n                  $scope.data.doubleOptin = {};\r\n                  $scope.data.mailWelcome = {};\r\n                  $scope.data.notification = {};\r\n                  if (data.optin == 1) {\r\n                    restService.getOptin($stateParams.id).then(function (dataOptin) {\r\n                      if (dataOptin != false) {\r\n                        $scope.data.doubleOptin = dataOptin;\r\n                        $scope.data.doubleOptin.active = true;\r\n                        $(\"#divdoubleOptin\").collapse('show');\r\n                      }\r\n                    });\r\n                  }\r\n                  if (data.welcomeMail == 1) {\r\n                    restService.getWelcomeMail($stateParams.id).then(function (dataWelcome) {\r\n                      if (dataWelcome != false) {\r\n                        $scope.data.mailWelcome = dataWelcome;\r\n                        $scope.data.mailWelcome.active = true;\r\n                        $(\"#divwelcome\").collapse('show');\r\n                      }\r\n                    });\r\n                  }\r\n                  if (data.notificationMail == 1) {\r\n                    restService.getNotification($stateParams.id).then(function (dataNotification) {\r\n                      if (dataNotification != false) {\r\n                        $scope.data.notification = dataNotification;\r\n                        $scope.data.notification.active = true;\r\n                        $(\"#divnotification\").collapse('show');\r\n                      }\r\n                    });\r\n                  }\r\n                  $scope.getContactList();\r\n                  $scope.getMailTemplate();\r\n                }).catch(function (data) {\r\n                  $state.go('create.describe');\r\n                });\r\n              } else {\r\n                $scope.getContactList();\r\n                $scope.getMailTemplate();\r\n              }\r\n            }])\r\n          .controller('formsController', ['$scope', 'restService', 'notificationService', '$builder', '$validator', '$q', '$stateParams', '$state', '$window', '$rootScope', '$injector', function ($scope, restService, notificationService, $builder, $validator, $q, $stateParams, $state, $window, $rootScope, $injector) {\r\n\r\n              $injector.get('$drag').setConfigData('droppables', {});\r\n              $rootScope.idForm = $stateParams.id;\r\n              $scope.input = [];\r\n              $builder.setForm('default', []);\r\n              $scope.db = false;\r\n              $scope.complet = false;\r\n              $scope.arrFields = [\r\n                {selected: false, id: \"name\", title: \"Nombre\", input: \"textInput\", field: \"primary\"},\r\n                {selected: false, id: \"lastname\", title: \"Apellido\", input: \"textInput\", field: \"primary\"},\r\n                {selected: false, id: \"birthdate\", title: \"Fecha Nacimiento\", input: \"dateInput\", field: \"primary\", validation: \"[fecha]\"},\r\n                {selected: false, id: \"email\", title: \"Correo\", input: \"textInput\", field: \"primary\", objExt: {noDeleted: true}},\r\n                {selected: false, id: \"indicative\", title: \"Indicativo\", input: \"select\", field: \"primary\", objExt: {noOptions: true, dependence: \"phone\"}},\r\n                {selected: false, id: \"phone\", title: \"Telefono\", input: \"numberInput\", field: \"primary\", validation: \"[numberEnteros]\", objExt: {noOptions: true, dependence: \"indicative\"}},\r\n                {selected: false, id: \"encabezado\", title: \"Nombre de formulario\", input: \"encabezado\", field: \"encabezado\"},\r\n              ];\r\n\r\n              $scope.init = function () {\r\n                restService.getcontentform($stateParams.id).then(function (data) {\r\n                  var objData = JSON.parse(data.content);\r\n                  $scope.backgroundForm = objData.background;\r\n                  $builder.setForm('default', objData.form);\r\n                  $scope.form = $builder.forms['default'];\r\n                  $scope.db = true;\r\n                  $scope.initWatch();\r\n                  $scope.getIndicative();\r\n                  $scope.setConfigScope(objData);\r\n                }).catch(function () {\r\n                  $builder.addFormObject('default', {\r\n                    id: 'button',\r\n                    component: 'button',\r\n                    label: 'Aceptar',\r\n                    description: '',\r\n                    placeholder: 'button',\r\n                    required: true,\r\n                    editable: true,\r\n                    objExt: {fontOrien: \"center\"},\r\n                  });\r\n                  $scope.form = $builder.forms['default'];\r\n                  $scope.initWatch();\r\n                  $scope.getIndicative();\r\n                });\r\n              }\r\n\r\n              $scope.setConfigScope = function (content) {\r\n                if (typeof content.background != \"undefined\") {\r\n                  $scope.backgroundForm = content.background;\r\n                }\r\n                if (typeof content.fontForm != \"undefined\") {\r\n                  $scope.fontForm = content.fontForm;\r\n                }\r\n                if (typeof content.sizeForm != \"undefined\") {\r\n                  $scope.sizeForm = content.sizeForm;\r\n                }\r\n                if (typeof content.fontStyle != \"undefined\") {\r\n                  $scope.fontStyle = content.fontStyle;\r\n                }\r\n              }\r\n\r\n              $scope.arrDirective = [];\r\n              $scope.addComponent = function (Field) {\r\n                var objExtra = {};\r\n                var objComponent = {};\r\n                if (Field.selected) {\r\n                  return;\r\n                }\r\n\r\n                Field.selected = true;\r\n                if (angular.isDefined(Field.objExt)) {\r\n                  objExtra = Field.objExt;\r\n                }\r\n                if (Field.input == 'dateInput') {\r\n                  objExtra = {openen: false};\r\n                }\r\n                if (angular.isDefined($scope.fontForm)) {\r\n                  objExtra.fontColor = $scope.fontForm;\r\n                }\r\n\r\n                if (angular.isDefined($scope.sizeForm)) {\r\n                  objExtra.sizeStyle = $scope.sizeForm;\r\n                }\r\n\r\n                if (angular.isDefined($scope.fontStyle)) {\r\n                  objExtra.fontStyle = $scope.fontStyle;\r\n                }\r\n\r\n                if (Field.input == 'encabezado') {\r\n                  Field.title = \"Nombre de formulario\";\r\n                  objExtra = {sizeStyle: \"24px\", fontOrien: \"center\"};\r\n                }\r\n\r\n\r\n                objComponent = {\r\n                  id: Field.id,\r\n                  component: Field.input,\r\n                  label: Field.title,\r\n                  description: '',\r\n                  placeholder: Field.title,\r\n                  required: true,\r\n                  editable: true,\r\n                  objExt: objExtra,\r\n                };\r\n\r\n                if (Field.id == 'email') {\r\n                  objComponent.objExt.validationOptionsHide = true;\r\n                  objComponent.validation = \"[email]\";\r\n                }\r\n                if (typeof Field.validation != \"undefined\") {\r\n                  objComponent.validation = Field.validation;\r\n                }\r\n\r\n                if (Field.input == 'checkbox') {\r\n                  if (angular.isDefined(Field.valueDefault)) {\r\n                    if (typeof Field.valueDefault == \"string\") {\r\n                      objComponent.options = Field.valueDefault.split(\",\");\r\n                    } else {\r\n                      objComponent.options = Field.valueDefault;\r\n                    }\r\n                  }\r\n                } else if (Field.input == 'select') {\r\n                  if (angular.isDefined(Field.valueDefault)) {\r\n                    if (typeof Field.valueDefault == \"string\") {\r\n                      objComponent.options = Field.valueDefault.split(\",\");\r\n                    } else {\r\n                      objComponent.options = Field.valueDefault;\r\n                    }\r\n                   \r\n                  }\r\n                }\r\n                $builder.addFormObject('default', objComponent);\r\n                if (typeof Field.objExt != \"undefined\" && typeof Field.objExt.dependence != \"undefined\") {\r\n                  var valid = false;\r\n                  for (var i in $scope.form) {\r\n                    if ($scope.form[i].id == Field.objExt.dependence) {\r\n                      valid = true;\r\n                    }\r\n                  }\r\n                  if (!valid) {\r\n                    for (var i in $scope.arrFields) {\r\n                      if ($scope.arrFields[i].id == Field.objExt.dependence) {\r\n                        $scope.addComponent($scope.arrFields[i]);\r\n                      }\r\n                    }\r\n                  }\r\n\r\n                }\r\n              }\r\n              $scope.initWatch = function () {\r\n                $scope.$watch('form', function (newv, old) {\r\n                  if (old.length > newv.length) {\r\n                    $scope.compareArrayObject(old, newv, 'id').then(function (data) {\r\n                      for (var j in data) {\r\n                        for (var i = 0; i < $scope.arrFields.length; i++) {\r\n                          if ($scope.arrFields[i].id == data[j].id) {\r\n                            $scope.arrFields[i].selected = false;\r\n                          }\r\n                        }\r\n                      }\r\n                    });\r\n                  }\r\n                }, true);\r\n              }\r\n\r\n              $scope.compareArrayObject = function (x, y, itemCompared) {\r\n                var defer = $q.defer();\r\n                var arrayReturn = [];\r\n                for (var i in x) {\r\n                  var objX = x[i];\r\n                  if (angular.isDefined(objX[itemCompared])) {\r\n                    var valid = false;\r\n                    for (var j in y) {\r\n                      var objY = y[j];\r\n                      if (objX[itemCompared] == objY[itemCompared]) {\r\n                        valid = true;\r\n                      }\r\n                    }\r\n                    if (!valid) {\r\n                      arrayReturn.push(objX);\r\n                    }\r\n                  }\r\n                }\r\n                defer.resolve(arrayReturn);\r\n                return defer.promise;\r\n              }\r\n\r\n              $scope.setValueArrObj = function (x, y, item) {\r\n                var defer = $q.defer();\r\n                var arrayReturn = [];\r\n                for (var i in x) {\r\n                  var objX = x[i];\r\n                  if (angular.isDefined(objX[item])) {\r\n                    for (var j in y) {\r\n                      var objY = y[j];\r\n                      if (objX[item] == objY[item]) {\r\n                        arrayReturn.push(objX);\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n                defer.resolve(arrayReturn);\r\n                return defer.promise;\r\n              }\r\n\r\n\r\n              $scope.getCustomField = function () {\r\n                restService.getCustomfield($scope.idContactList).then(function (data) {\r\n                  for (var i in data) {\r\n                    var id = data[i].alternativename;\r\n                    var title = data[i].name;\r\n                    var input;\r\n                    switch (data[i].type) {\r\n                      case 'Text':\r\n                        input = \"textInput\";\r\n                        break;\r\n                      case 'Date':\r\n                        input = \"dateInput\";\r\n                        break;\r\n                      case 'Numerical':\r\n                        input = \"numberInput\";\r\n                        break;\r\n                      case 'TextArea':\r\n                        input = \"textArea\";\r\n                        break;\r\n                      case 'Multiselect':\r\n                        input = \"checkbox\";\r\n                        break;\r\n                      case 'Select':\r\n                        input = \"select\";\r\n                        break;\r\n                    }\r\n                    $scope.arrFields.push({selected: false, id: id, title: title, input: input, field: \"custom\", valueDefault: data[i].value});\r\n                  }\r\n                  for (var i in $scope.form) {\r\n                    for (var j in $scope.arrFields) {\r\n\r\n                      if ($scope.arrFields[j].id == $scope.form[i].id) {\r\n                        $scope.arrFields[j].selected = true;\r\n                      }\r\n                    }\r\n                  }\r\n                });\r\n              }\r\n\r\n              $scope.getIndicative = function () {\r\n                restService.getAllIndicative().then(function (data) {\r\n                  var array = [];\r\n                  for (var i in data) {\r\n                    if (data[i].phonecode != 1 && data[i].phonecode != 0 && data[i].phonecode != \"\") {\r\n                      array.push(\"(+\" + data[i].phonecode + \") \" + data[i].name);\r\n                    }\r\n                  }\r\n                  $scope.getCustomField();\r\n                  if (!$scope.db) {\r\n                    for (var i in $scope.arrFields) {\r\n                      if ($scope.arrFields[i].id == \"indicative\") {\r\n                        $scope.arrFields[i].valueDefault = array;\r\n                      }\r\n                      $scope.addComponent($scope.arrFields[i]);\r\n                    }\r\n                  }\r\n                  $scope.complet = true;\r\n                });\r\n              }\r\n\r\n\r\n              $scope.configForm = function (nameObj, valueObj) {\r\n                $builder.updateConfig('default', nameObj, valueObj);\r\n              }\r\n\r\n              $scope.AddForm = function () {\r\n                $scope.searchObjArray($scope.form, 'id', 'email').then(function (data) {\r\n                  if (!data) {\r\n                    notificationService.warning('El formulario debe tener por lo menos el correo');\r\n                  }\r\n                  var background = (angular.isDefined($scope.backgroundForm)) ? $scope.backgroundForm : null;\r\n                  var objSend = {form: $scope.form, background: background};\r\n                  if (typeof $scope.backgroundForm != \"undefined\") {\r\n                    objSend.background = $scope.backgroundForm;\r\n                  }\r\n                  if (typeof $scope.fontForm != \"undefined\") {\r\n                    objSend.fontForm = $scope.fontForm;\r\n                  }\r\n                  if (typeof $scope.sizeForm != \"undefined\") {\r\n                    objSend.sizeForm = $scope.sizeForm;\r\n                  }\r\n                  if (typeof $scope.fontStyle != \"undefined\") {\r\n                    objSend.fontStyle = $scope.fontStyle;\r\n                  }\r\n\r\n                  restService.saveForm($stateParams.id, objSend).then(function (data) {\r\n                    $state.go('list');\r\n                  });\r\n                });\r\n              }\r\n\r\n              $scope.searchObjArray = function (array, item, compared) {\r\n                var defer = $q.defer();\r\n                var flag = false;\r\n                for (var i in array) {\r\n                  if (array[i][item] == compared) {\r\n                    flag = true;\r\n                    break;\r\n                  }\r\n                }\r\n                defer.resolve(true);\r\n                return defer.promise;\r\n              }\r\n\r\n              if (angular.isUndefined($stateParams.id) || $stateParams.id == \"\") {\r\n                $state.go('create.describe');\r\n              } else {\r\n                restService.getInformationForm($stateParams.id).then(function (data) {\r\n                  $scope.idContactList = data.idContactlist;\r\n                  $scope.init();\r\n                }).catch(function (data) {\r\n                  $state.go('create.describe', {id: $rootScope.idForm});\r\n                  notificationService.warning(\"El formulario no tiene una lista de contacto asignada.\");\r\n                });\r\n              }\r\n            }])\r\n          .controller('ContactsController', ['$scope', 'restService', 'notificationService', '$stateParams', '$state', function ($scope, restService, notificationService, $stateParams, $state) {\r\n              $scope.show = true;\r\n              $scope.showList = true;\r\n              $scope.contactlist = [{}];\r\n              $scope.selected = [];\r\n              $scope.progressbar = false;\r\n              $scope.changestatus = true;\r\n              $scope.form = {};\r\n              $scope.showStatus = function (arr, value) {\r\n                var selected = [];\r\n                angular.forEach(arr, function (s) {\r\n                  angular.forEach(value, function (c) {\r\n                    if (s == c) {\r\n                      selected.push(s);\r\n                    }\r\n                  });\r\n                });\r\n                return selected.length ? selected.join(', ') : 'empty';\r\n              };\r\n              $scope.updateUser = function (data, key, idContact) {\r\n                restService.editContact(idContact, key, data, $scope.idContactlist).then(function (data) {\r\n                  notificationService.primary(data.message);\r\n                  $scope.getAll();\r\n                }).catch(function (data) {\r\n                  notificationService.error(data.message);\r\n                  $scope.getAll();\r\n                });\r\n              };\r\n              $scope.stringfieldsprimary = function (field) {\r\n                var string = field;\r\n                switch (field) {\r\n                  case \"name\":\r\n                    string = \"Nombre\";\r\n                    break;\r\n                  case \"lastname\":\r\n                    string = \"Apellido\";\r\n                    break;\r\n                  case \"email\":\r\n                    string = \"Correo electronico\";\r\n                    break;\r\n                  case \"phone\":\r\n                    string = \"Telefono\";\r\n                    break;\r\n                  case \"birthdate\":\r\n                    string = \"Fecha de cumpleaÃ±os\";\r\n                    break;\r\n                  case \"indicative\":\r\n                    string = \"Indicativo\";\r\n                    break;\r\n                  case \"description\":\r\n                    string = \"DescripciÃ³n\";\r\n                    break;\r\n                }\r\n                return string;\r\n              };\r\n              $scope.stringsearch = -1;\r\n              $scope.searchcontacts = function () {\r\n                $scope.stringsearch = $scope.search;\r\n                $scope.getAll();\r\n              };\r\n\r\n              $scope.initial = 0;\r\n              $scope.page = 1;\r\n              $scope.forward = function () {\r\n                $scope.progressbar = false;\r\n                $scope.initial += 1;\r\n                $scope.page += 1;\r\n                $scope.getAll();\r\n              };\r\n              $scope.fastforward = function () {\r\n                $scope.progressbar = false;\r\n                $scope.initial = ($scope.contacts.total_pages - 1);\r\n                $scope.page = $scope.contacts.total_pages;\r\n                $scope.getAll();\r\n              };\r\n              $scope.backward = function () {\r\n                $scope.progressbar = false;\r\n                $scope.initial -= 1;\r\n                $scope.page -= 1;\r\n                $scope.getAll();\r\n              };\r\n              $scope.fastbackward = function () {\r\n                $scope.progressbar = false;\r\n                $scope.initial = 0;\r\n                $scope.page = 1;\r\n                $scope.getAll();\r\n              };\r\n              $scope.getAll = function () {\r\n                $scope.progressbar = false;\r\n                restService.getInformationForm($scope.idForm).then(function (data) {\r\n                  $scope.form.name = data.name;\r\n                  $scope.idContactlist = data.idContactlist;\r\n                  restService.getAll($scope.initial, $scope.idContactlist, $scope.idForm, $scope.stringsearch).then(function (data) {\r\n                    if (data.total == 0) {\r\n                      $scope.loading = true;\r\n                      $scope.show = false;\r\n                      $scope.showList = true;\r\n                    } else {\r\n                      $scope.loading = false;\r\n                      $scope.show = true;\r\n                      $scope.showList = false;\r\n                    }\r\n                    $scope.contacts = data;\r\n                    \r\n                  });\r\n                  restService.getAllIndicative().then(function (data) {\r\n                    $scope.indicative = data;\r\n                  });\r\n                  restService.customfieldselect($scope.idContactlist).then(function (data) {\r\n                    $scope.arr = [];\r\n                    for (var i = 0; i < data.length; i++) {\r\n                      if (data[i].type == \"Select\" || data[i].type == \"Multiselect\")\r\n                        $scope.arr[data[i].idCustomfield] = data[i].value;\r\n                    }\r\n                    $scope.progressbar = true;\r\n                  });\r\n                });\r\n              };\r\n              $scope.changestatus = function (idContact) {\r\n                restService.changestatus(idContact, $scope.idContactlist).then(function (data) {\r\n                  $scope.getAll();\r\n                  notificationService.primary(data.message);\r\n                });\r\n              };\r\n              $scope.confirmDelete = function (idContact, idContactlist) {\r\n                $scope.idContact = idContact;\r\n                $scope.idContactlist = idContactlist;\r\n                openModal();\r\n              };\r\n\r\n              if ($stateParams.id != '') {\r\n                $scope.idForm = $stateParams.id;\r\n                $scope.getAll();\r\n              } else {\r\n                $state.go('list');\r\n              }\r\n              $scope.deleteContact = function () {\r\n                restService.deleteContact($scope.idContact, $scope.idContactlist).then(function (data) {\r\n                  notificationService.warning(data.message);\r\n                });\r\n                $scope.getAll();\r\n                closeModal();\r\n              };\r\n\r\n            }])\r\n          .controller('main', ['$rootScope', '$scope', '$state', function ($rootScope, $scope, $state) {\r\n              $scope.state = $state;\r\n            }])\r\n          .controller('reportController', ['$scope', 'notificationService', 'restService', '$stateParams', 'constantForms', function ($scope, notificationService, restService, $stateParams, constantForms) {\r\n\r\n              \r\n              $scope.data = {};\r\n              $scope.misc = {\r\n                show: true,\r\n                showList: true,\r\n                contactlist: [{}],\r\n                selected: [],\r\n                progressbar: false,\r\n                changestatus: true,\r\n                stringsearch: -1,\r\n                initial: 0,\r\n                page: 1,\r\n                previewShow: false,\r\n                input: [],\r\n                categoriForm: \"\",\r\n                createFor: \"\",\r\n                dateCreated: \"\",\r\n                numSuscription: \"\",\r\n                updateFor: \"\",\r\n                updateDate: \"\",\r\n                fields: {},\r\n                total: 0,\r\n                nameForm: \"\",\r\n                sizeArrayFields: 0,\r\n                arrayTitlesFil: [],\r\n                arrayDataContacts: []\r\n              };\r\n\r\n              $scope.functions = {\r\n                searchcontacts: function () {\r\n                  $scope.misc.stringsearch = $scope.search;\r\n                  $scope.resService.suscripsforms($scope.idForm);\r\n                },\r\n                forward: function () {\r\n                  $scope.misc.initial += 1;\r\n                  $scope.misc.page += 1;\r\n                  $scope.resService.suscripsforms($scope.idForm);\r\n                },\r\n                fastforward: function () {\r\n                  $scope.misc.initial = ($scope.contacts[2].total_pages - 1);\r\n                  $scope.misc.page = $scope.contacts[2].total_pages;\r\n                  $scope.resService.suscripsforms($scope.idForm);\r\n                },\r\n                backward: function () {\r\n                  $scope.misc.initial -= 1;\r\n                  $scope.misc.page -= 1;\r\n                  $scope.resService.suscripsforms($scope.idForm);\r\n                },\r\n                fastbackward: function () {\r\n                  $scope.misc.initial = 0;\r\n                  $scope.misc.page = 1;\r\n                  $scope.resService.suscripsforms($scope.idForm);\r\n                },\r\n                listForms: function () {\r\n                  restService.listForms($scope.misc.initial, $scope.filter).then(function (res) {\r\n                    $scope.list = res;\r\n                  });\r\n                },\r\n                getAllIndicative: function () {\r\n                  restService.getAllIndicative().then(function (data) {\r\n                    $scope.indicative = data;\r\n                  });\r\n                },\r\n                dowloadReport: function () {\r\n                  $scope.resService.dowloadReport();\r\n                  var url = fullUrlBase + 'statistic/downloadexcel/' + 'Formulario_' + $scope.misc.nameForm;\r\n                  location.href = url;\r\n                }\r\n              }\r\n\r\n              $scope.resService = {\r\n                dowloadReport: function () {\r\n                  restService.dowloadReportContactsForm($scope.idForm).then(function () {\r\n                  });\r\n                },\r\n                suscripsforms: function (paramIdForm) {\r\n                  restService.suscripsforms(paramIdForm, $scope.misc.initial, $scope.misc.stringsearch).then(function (data) {\r\n                    $scope.misc.total = data[1]['total'];\r\n\r\n                    if (data[1].total == 0) {\r\n                      $scope.loading = true;\r\n                      $scope.misc.show = false;\r\n                      $scope.misc.showList = true;\r\n                    } else {\r\n                      $scope.loading = false;\r\n                      $scope.misc.show = true;\r\n                      $scope.misc.showList = false;\r\n                    }\r\n\r\n                    if (data[0]['items'].idContacts != null) {\r\n                      $scope.contacts = data;\r\n                      $scope.misc.categoriForm = data[0].items['name'];\r\n                      $scope.misc.createFor = data[0].items['createdBy'];\r\n                      $scope.misc.dateCreated = data[0].items['created'];\r\n                      $scope.misc.numSuscription = data[1]['total'];\r\n                      $scope.misc.updateFor = data[0].items['updatedBy'];\r\n                      $scope.misc.updateDate = data[0].items['updated'];\r\n                      $scope.fieldsforms = data[3];\r\n                      $scope.fieldspersonal = data[4].form;\r\n                      $scope.contactInfoList = data[5].contactsinfo;\r\n                      $scope.misc.nameForm = data[0].items['nameForm'];\r\n\r\n                      angular.forEach($scope.fieldspersonal, function (value, key) {\r\n                        if (value.id == 'encabezado' || value.id == 'button') {\r\n                          $scope.fieldspersonal.splice(key, 1);\r\n                        }\r\n                      });\r\n                      $scope.misc.arrayTitlesFil = [];\r\n                      $scope.misc.sizeArrayFields = $scope.fieldspersonal.length;\r\n                      angular.forEach($scope.fieldspersonal, function (value, key) {\r\n                        if ($scope.misc.sizeArrayFields > 7) {\r\n                          if (key <= 3) {\r\n                            $scope.misc.arrayTitlesFil.push(value);\r\n                          }\r\n                        } else if ($scope.misc.sizeArrayFields <= 7) {\r\n                          $scope.misc.arrayTitlesFil.push(value);\r\n                        }\r\n                      });\r\n\r\n                      $scope.arrayAux = [];\r\n                      $scope.misc.arrayDataContacts = [];\r\n                      angular.forEach($scope.contactInfoList, function (value, key) {\r\n                        var countContact = 0;\r\n                        $scope.aux = {};\r\n                        angular.forEach(value, function (value2, key2) {\r\n                          if ($scope.misc.sizeArrayFields > 7) {\r\n                            if (countContact <= 3) {\r\n                              $scope.aux[key2] = value2;\r\n                            }\r\n                          } else {\r\n                            $scope.aux[key2] = value2;\r\n                            \r\n                          }\r\n                          countContact++;\r\n                        });\r\n                        $scope.misc.arrayDataContacts.push($scope.aux);\r\n                      });\r\n                    } else {\r\n                      $scope.contacts = data;\r\n                      $scope.misc.categoriForm = data[0].items['name'];\r\n                      $scope.misc.createFor = data[0].items['createdBy'];\r\n                      $scope.misc.dateCreated = data[0].items['created'];\r\n                      $scope.misc.numSuscription = data[1]['total'];\r\n                      $scope.misc.updateFor = data[0].items['updatedBy'];\r\n                      $scope.misc.updateDate = data[0].items['updated'];\r\n                      $scope.fieldsforms = data[3];\r\n                      $scope.fieldspersonal = data[4].form;\r\n                      $scope.contactInfoList = data[5].contactsinfo;\r\n                      $scope.misc.nameForm = data[0].items['nameForm'];\r\n                      notificationService.warning(constantForms.Notifications.Errors.errorNoneContactsInscriptForms);\r\n                    }\r\n                    $scope.misc.progressbar = true;\r\n                  }).catch(function (error) {\r\n                    console.log(error);\r\n                    notificationService.error(error.message);\r\n                  });\r\n                }\r\n              }\r\n\r\n              if (typeof $stateParams.id != \"undefined\") {\r\n                $scope.idForm = $stateParams.id;\r\n                $scope.resService.suscripsforms($scope.idForm);\r\n              }\r\n            }])\r\n})();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL2Zvcm1zL2NvbnRyb2xsZXJzLmpzP2RhMjIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsaUJBQWlCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixlQUFlO0FBQ2Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0I7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0NBQXdDLHNCQUFzQix1QjtBQUM5RDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLG9CQUFvQjtBQUNuRSxtQkFBbUI7QUFDbkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSwrQ0FBK0MsZ0JBQWdCO0FBQy9ELG1CQUFtQjtBQUNuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUEsbUVBQW1FO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtRkFBbUY7QUFDcEcsaUJBQWlCLHlGQUF5RjtBQUMxRyxpQkFBaUIseUhBQXlIO0FBQzFJLGlCQUFpQiw4RkFBOEYsaUJBQWlCO0FBQ2hJLGlCQUFpQixvR0FBb0csc0NBQXNDO0FBQzNKLGlCQUFpQixpSUFBaUksMkNBQTJDO0FBQzdMLGlCQUFpQiwyR0FBMkc7QUFDNUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixvQkFBb0I7QUFDakQsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyw2QkFBNkI7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxrR0FBa0c7QUFDN0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsZ0RBQWdELHNCQUFzQjtBQUN0RTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxtQ0FBbUMsaUJBQWlCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUEsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx1QkFBdUI7O0FBRXZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCOztBQUVBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSx1QkFBdUI7QUFDdkIscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLENBQUMiLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuKGZ1bmN0aW9uICgpIHtcclxuICBhbmd1bGFyLm1vZHVsZSgnZm9ybXMuY29udHJvbGxlcnMnLCBbXSlcclxuICAgICAgICAgIC5maWx0ZXIoJ3Byb3BzRmlsdGVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGl0ZW1zLCBwcm9wcykge1xyXG4gICAgICAgICAgICAgIHZhciBvdXQgPSBbXTtcclxuICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0FycmF5KGl0ZW1zKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XHJcbiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBpdGVtTWF0Y2hlcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IGtleXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRleHQgPSBwcm9wc1twcm9wXS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtW3Byb3BdLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHRleHQpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaXRlbU1hdGNoZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAoaXRlbU1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG91dCA9IGl0ZW1zO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgcmV0dXJuIG91dDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY29udHJvbGxlcignaW5kZXhDb250cm9sbGVyJywgWyckc2NvcGUnLCAncmVzdFNlcnZpY2UnLCAnbm90aWZpY2F0aW9uU2VydmljZScsICckYnVpbGRlcicsICckdmFsaWRhdG9yJywgJyR3aW5kb3cnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbiAoJHNjb3BlLCByZXN0U2VydmljZSwgbm90aWZpY2F0aW9uU2VydmljZSwgJGJ1aWxkZXIsICR2YWxpZGF0b3JtLCAkd2luZG93LCAkdGltZW91dCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5pbml0aWFsID0gMDtcclxuICAgICAgICAgICAgICAkc2NvcGUucGFnZSA9IDE7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnByZXZpZXdTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmlucHV0ID0gW107XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmZvcndhcmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbCArPSAxO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5saXN0Rm9ybXMoKTtcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICRzY29wZS5mYXN0Zm9yd2FyZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pbml0aWFsID0gKCRzY29wZS5saXN0LnRvdGFsX3BhZ2VzIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFnZSA9ICRzY29wZS5saXN0LnRvdGFsX3BhZ2VzO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpc3RGb3JtcygpO1xyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmJhY2t3YXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWwgLT0gMTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wYWdlIC09IDE7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubGlzdEZvcm1zKCk7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAkc2NvcGUuZmFzdGJhY2t3YXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpc3RGb3JtcygpO1xyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmxpc3RGb3JtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLmxpc3RGb3Jtcygkc2NvcGUuaW5pdGlhbCwgJHNjb3BlLmZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gcmVzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAkc2NvcGUubGlzdEZvcm1zKCk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlciA9IHt9O1xyXG5cclxuICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVybmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLmxpc3RGb3Jtcygkc2NvcGUuaW5pdGlhbCwgJHNjb3BlLmZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gcmVzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLm9wZW5Nb2RhbCA9IGZ1bmN0aW9uIChpZEZvcm0pIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pZEZvcm0gPSBpZEZvcm07XHJcbiAgICAgICAgICAgICAgICAkKCcjZGVsZXRlRGlhbG9nJykuYWRkQ2xhc3MoJ2RpYWxvZy0tb3BlbicpO1xyXG4gICAgICAgICAgICAgIH07IFxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICRzY29wZS5jbG9zZU1vZGFsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnI2RlbGV0ZURpYWxvZycpLnJlbW92ZUNsYXNzKCdkaWFsb2ctLW9wZW4nKTtcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICRzY29wZS5kZWxldGVGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdFNlcnZpY2UuZGVsZXRlRm9ybSh7aWRGb3JtOiAkc2NvcGUuaWRGb3JtfSkudGhlbihmdW5jdGlvbiAocmVzKSB7IFxyXG4gICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLndhcm5pbmcocmVzLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdEZvcm1zKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jbG9zZU1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAkc2NvcGUudHJhbnNsYXRlVHlwZSA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgY2FzZSAnc3VzY3JpcHRpb24nOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnU3VzY3JpcGNpw7NuJztcclxuICAgICAgICAgICAgICAgICAgY2FzZSAndXBkYXRpbmcnOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnQWN0dWFsaXphY2nDs24nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgZ2V0QWxsQ2F0ZWdvcmllcygpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5wcmV2aXN1YWxpemFyID0gZnVuY3Rpb24gKCRpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByZXZpZXdTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UoJHNjb3BlLmxpc3QuaXRlbXNbJGluZGV4XS5jb250ZW50LmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgJGJ1aWxkZXIuc2V0Rm9ybSgnc2lnbWFGb3JtJywganNvbi5mb3JtKTtcclxuICAgICAgICAgICAgICAgICQoXCIjcHJldmlld1wiKS5hZGRDbGFzcygnZGlhbG9nLS1vcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYmFja2dyb3VuZEZvcm0gPSBqc29uLmJhY2tncm91bmQ7XHJcblxyXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUucHJldmlld1Nob3cgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAkc2NvcGUudmFsaWRhdGVGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHZhbGlkYXRvci52YWxpZGF0ZSgkc2NvcGUsICdzaWdtYUZvcm0nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoKSB7fSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uICgpIHt9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNvZGVIdG1sID0gZnVuY3Rpb24gKCRpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgJChcIiNjb2RlSHRtbFwiKS5hZGRDbGFzcygnZGlhbG9nLS1vcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29kZUh0bWxTdHJpbmcgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLmxpc3QuaXRlbXNbJGluZGV4XS5odG1sKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNvZGVJZnJhbWUgPSBmdW5jdGlvbiAoJGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2lmcmFtZVwiKS5hZGRDbGFzcygnZGlhbG9nLS1vcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29kZUlmcmFtZVN0cmluZyA9IGFuZ3VsYXIuY29weSgkc2NvcGUubGlzdC5pdGVtc1skaW5kZXhdLmlmcmFtZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAkc2NvcGUucmVtb3ZlRGlhbG9nID0gZnVuY3Rpb24gKG1vZGFsKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI1wiICsgbW9kYWwpLnJlbW92ZUNsYXNzKCdkaWFsb2ctLW9wZW4nKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICRzY29wZS5yZWxvYWRFZGl0Rm9ybSA9IGZ1bmN0aW9uIChpZEZvcm0pIHtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IGZ1bGxVcmxCYXNlICsgdGVtcGxhdGVCYXNlICsgJy9jcmVhdGUjL2Jhc2ljaW5mb3JtYXRpb24vJyArIGlkRm9ybTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEFsbENhdGVnb3JpZXMoKSB7XHJcbiAgICAgICAgICAgICAgICByZXN0U2VydmljZS5nZXRBbGxGb3JtQ2F0ZWdvcnkoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3J5ID0gcmVzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XSlcclxuICAgICAgICAgIC5jb250cm9sbGVyKCdjcmVhdGVCYXNpY0luZm9ybWF0aW9uQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3Jlc3RTZXJ2aWNlJywgJ25vdGlmaWNhdGlvblNlcnZpY2UnLCAnJHdpbmRvdycsICckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbiAoJHNjb3BlLCByZXN0U2VydmljZSwgbm90aWZpY2F0aW9uU2VydmljZSwgJHdpbmRvdywgJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRyb290U2NvcGUpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICRzY29wZS5kYXRhLmRvdWJsZU9wdGluID0ge307XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmRhdGEubWFpbFdlbGNvbWUgPSB7fTtcclxuICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5ub3RpZmljYXRpb24gPSB7fTtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2hvd0lucHV0Q2F0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICRzY29wZS5zaG93U2VsZWN0Q2F0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNob3dJY29uc0NhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICRzY29wZS5zaG93SWNvbnNTYXZlQ2F0ZSA9IGZhbHNlO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZVN0YXR1c0lucHV0Q2F0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLnNob3dJbnB1dENhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dJbnB1dENhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1NlbGVjdENhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dJY29uc0NhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dJY29uc1NhdmVDYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93SW5wdXRDYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93U2VsZWN0Q2F0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93SWNvbnNDYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dJY29uc1NhdmVDYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAkc2NvcGUuc2F2ZUJhc2ljSW5mb3JtYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzdGF0ZVBhcmFtcy5pZCAhPSBcInVuZGVmaW5lZFwiICYmICRzdGF0ZVBhcmFtcy5pZCAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLnVwZGF0ZWJhc2ljaW5mb3JtYXRpb24oJHN0YXRlUGFyYW1zLmlkLCAkc2NvcGUuZGF0YSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc3VjY2VzcyhcIlNlIGhhIGNyZWFkbyBsYSBpbmZvcm1hY2nDs24gYmFzaWNhIGRlbCBmb3JtdWxhcmlvXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY3JlYXRlLmZvcm1zJywge2lkOiAkc3RhdGVQYXJhbXMuaWR9KTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICByZXN0U2VydmljZS5zYXZlQmFzaWNJbmZvcm1hdGlvbigkc2NvcGUuZGF0YSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc3VjY2VzcyhcIlNlIGhhIGNyZWFkbyBsYSBpbmZvcm1hY2nDs24gYmFzaWNhIGRlbCBmb3JtdWxhcmlvXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY3JlYXRlLmZvcm1zJywge2lkOiBkYXRhLmlkRm9ybX0pO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAkc2NvcGUucHJldmlld21haWx0ZW1wY29udCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLnByZXZpZXdNYWlsVGVtcGxhdGVDb250ZW50KGlkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBkYXRhLnRlbXBsYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJldmlldy1tb2RhbFwiKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJzxpZnJhbWUgZnJhbWVib3JkZXI9XCIwXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiLz4nKS5hcHBlbmRUbygnI3ByZXZpZXctbW9kYWwnKS5jb250ZW50cygpLmZpbmQoJ2JvZHknKS5hcHBlbmQoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI215TW9kYWwnKS5tb2RhbCgnc2hvdycpO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICRzY29wZS5nZXRDb250YWN0TGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLmdldENvbnRhY3RsaXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jb250YWN0bGlzdCA9IHJlcztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIGdldEFsbENhdGVnb3JpZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QWxsQ2F0ZWdvcmllcygpIHtcclxuICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLmdldEFsbEZvcm1DYXRlZ29yeSgpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcnkgPSByZXM7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgO1xyXG5cclxuICAgICAgICAgICAgICAkc2NvcGUuc2F2ZUNhdGVnb3J5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7Y2F0ZWdvcnk6ICRzY29wZS5uYW1lQ2F0ZWdvcnl9O1xyXG5cclxuICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLmFkZEZvcm1DYXRlZ29yeShkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5zdWNjZXNzKHJlc1snbXNnJ10pO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZUNhdGVnb3J5ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgZ2V0QWxsQ2F0ZWdvcmllcygpO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlU3RhdHVzSW5wdXRDYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmlkRm9ybUNhdGVnb3J5ID0gcmVzWydpZEZvcm1DYXRlZ29yeSddO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmdldE1haWxUZW1wbGF0ZSA9IGZ1bmN0aW9uIChzZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgICAgcmVzdFNlcnZpY2UuZ2V0YWxsbWFpbHRlbXBsYXRlYnlmaWx0ZXIoc2VhcmNoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1haWx0ZW1wbGF0ZSA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgcmVzdFNlcnZpY2UuZ2V0TWFpbFRlbXBsYXRlKCkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1haWx0ZW1wbGF0ZSA9IHJlcztcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiAkc3RhdGVQYXJhbXMuaWQgIT0gXCJ1bmRlZmluZWRcIiAmJiAkc3RhdGVQYXJhbXMuaWQgIT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pZEZvcm0gPSAkc3RhdGVQYXJhbXMuaWQ7XHJcbiAgICAgICAgICAgICAgICByZXN0U2VydmljZS5nZXRJbmZvcm1hdGlvbkZvcm0oJHN0YXRlUGFyYW1zLmlkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEuaWRGb3JtQ2F0ZWdvcnkgPSBkYXRhLmlkRm9ybUNhdGVnb3J5O1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5kb3VibGVPcHRpbiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5tYWlsV2VsY29tZSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5ub3RpZmljYXRpb24gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGRhdGEub3B0aW4gPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLmdldE9wdGluKCRzdGF0ZVBhcmFtcy5pZCkudGhlbihmdW5jdGlvbiAoZGF0YU9wdGluKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YU9wdGluICE9IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmRvdWJsZU9wdGluID0gZGF0YU9wdGluO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5kb3VibGVPcHRpbi5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2RpdmRvdWJsZU9wdGluXCIpLmNvbGxhcHNlKCdzaG93Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgaWYgKGRhdGEud2VsY29tZU1haWwgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLmdldFdlbGNvbWVNYWlsKCRzdGF0ZVBhcmFtcy5pZCkudGhlbihmdW5jdGlvbiAoZGF0YVdlbGNvbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhV2VsY29tZSAhPSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5tYWlsV2VsY29tZSA9IGRhdGFXZWxjb21lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5tYWlsV2VsY29tZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2RpdndlbGNvbWVcIikuY29sbGFwc2UoJ3Nob3cnKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBpZiAoZGF0YS5ub3RpZmljYXRpb25NYWlsID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN0U2VydmljZS5nZXROb3RpZmljYXRpb24oJHN0YXRlUGFyYW1zLmlkKS50aGVuKGZ1bmN0aW9uIChkYXRhTm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YU5vdGlmaWNhdGlvbiAhPSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5ub3RpZmljYXRpb24gPSBkYXRhTm90aWZpY2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5ub3RpZmljYXRpb24uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNkaXZub3RpZmljYXRpb25cIikuY29sbGFwc2UoJ3Nob3cnKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0Q29udGFjdExpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldE1haWxUZW1wbGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjcmVhdGUuZGVzY3JpYmUnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0Q29udGFjdExpc3QoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5nZXRNYWlsVGVtcGxhdGUoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1dKVxyXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ2Zvcm1zQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3Jlc3RTZXJ2aWNlJywgJ25vdGlmaWNhdGlvblNlcnZpY2UnLCAnJGJ1aWxkZXInLCAnJHZhbGlkYXRvcicsICckcScsICckc3RhdGVQYXJhbXMnLCAnJHN0YXRlJywgJyR3aW5kb3cnLCAnJHJvb3RTY29wZScsICckaW5qZWN0b3InLCBmdW5jdGlvbiAoJHNjb3BlLCByZXN0U2VydmljZSwgbm90aWZpY2F0aW9uU2VydmljZSwgJGJ1aWxkZXIsICR2YWxpZGF0b3IsICRxLCAkc3RhdGVQYXJhbXMsICRzdGF0ZSwgJHdpbmRvdywgJHJvb3RTY29wZSwgJGluamVjdG9yKSB7XHJcblxyXG4gICAgICAgICAgICAgICRpbmplY3Rvci5nZXQoJyRkcmFnJykuc2V0Q29uZmlnRGF0YSgnZHJvcHBhYmxlcycsIHt9KTtcclxuICAgICAgICAgICAgICAkcm9vdFNjb3BlLmlkRm9ybSA9ICRzdGF0ZVBhcmFtcy5pZDtcclxuICAgICAgICAgICAgICAkc2NvcGUuaW5wdXQgPSBbXTtcclxuICAgICAgICAgICAgICAkYnVpbGRlci5zZXRGb3JtKCdkZWZhdWx0JywgW10pO1xyXG4gICAgICAgICAgICAgICRzY29wZS5kYiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICRzY29wZS5jb21wbGV0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFyckZpZWxkcyA9IFtcclxuICAgICAgICAgICAgICAgIHtzZWxlY3RlZDogZmFsc2UsIGlkOiBcIm5hbWVcIiwgdGl0bGU6IFwiTm9tYnJlXCIsIGlucHV0OiBcInRleHRJbnB1dFwiLCBmaWVsZDogXCJwcmltYXJ5XCJ9LFxyXG4gICAgICAgICAgICAgICAge3NlbGVjdGVkOiBmYWxzZSwgaWQ6IFwibGFzdG5hbWVcIiwgdGl0bGU6IFwiQXBlbGxpZG9cIiwgaW5wdXQ6IFwidGV4dElucHV0XCIsIGZpZWxkOiBcInByaW1hcnlcIn0sXHJcbiAgICAgICAgICAgICAgICB7c2VsZWN0ZWQ6IGZhbHNlLCBpZDogXCJiaXJ0aGRhdGVcIiwgdGl0bGU6IFwiRmVjaGEgTmFjaW1pZW50b1wiLCBpbnB1dDogXCJkYXRlSW5wdXRcIiwgZmllbGQ6IFwicHJpbWFyeVwiLCB2YWxpZGF0aW9uOiBcIltmZWNoYV1cIn0sXHJcbiAgICAgICAgICAgICAgICB7c2VsZWN0ZWQ6IGZhbHNlLCBpZDogXCJlbWFpbFwiLCB0aXRsZTogXCJDb3JyZW9cIiwgaW5wdXQ6IFwidGV4dElucHV0XCIsIGZpZWxkOiBcInByaW1hcnlcIiwgb2JqRXh0OiB7bm9EZWxldGVkOiB0cnVlfX0sXHJcbiAgICAgICAgICAgICAgICB7c2VsZWN0ZWQ6IGZhbHNlLCBpZDogXCJpbmRpY2F0aXZlXCIsIHRpdGxlOiBcIkluZGljYXRpdm9cIiwgaW5wdXQ6IFwic2VsZWN0XCIsIGZpZWxkOiBcInByaW1hcnlcIiwgb2JqRXh0OiB7bm9PcHRpb25zOiB0cnVlLCBkZXBlbmRlbmNlOiBcInBob25lXCJ9fSxcclxuICAgICAgICAgICAgICAgIHtzZWxlY3RlZDogZmFsc2UsIGlkOiBcInBob25lXCIsIHRpdGxlOiBcIlRlbGVmb25vXCIsIGlucHV0OiBcIm51bWJlcklucHV0XCIsIGZpZWxkOiBcInByaW1hcnlcIiwgdmFsaWRhdGlvbjogXCJbbnVtYmVyRW50ZXJvc11cIiwgb2JqRXh0OiB7bm9PcHRpb25zOiB0cnVlLCBkZXBlbmRlbmNlOiBcImluZGljYXRpdmVcIn19LFxyXG4gICAgICAgICAgICAgICAge3NlbGVjdGVkOiBmYWxzZSwgaWQ6IFwiZW5jYWJlemFkb1wiLCB0aXRsZTogXCJOb21icmUgZGUgZm9ybXVsYXJpb1wiLCBpbnB1dDogXCJlbmNhYmV6YWRvXCIsIGZpZWxkOiBcImVuY2FiZXphZG9cIn0sXHJcbiAgICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXN0U2VydmljZS5nZXRjb250ZW50Zm9ybSgkc3RhdGVQYXJhbXMuaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIG9iakRhdGEgPSBKU09OLnBhcnNlKGRhdGEuY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5iYWNrZ3JvdW5kRm9ybSA9IG9iakRhdGEuYmFja2dyb3VuZDtcclxuICAgICAgICAgICAgICAgICAgJGJ1aWxkZXIuc2V0Rm9ybSgnZGVmYXVsdCcsIG9iakRhdGEuZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5mb3JtID0gJGJ1aWxkZXIuZm9ybXNbJ2RlZmF1bHQnXTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmRiID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmluaXRXYXRjaCgpO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0SW5kaWNhdGl2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0Q29uZmlnU2NvcGUob2JqRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICRidWlsZGVyLmFkZEZvcm1PYmplY3QoJ2RlZmF1bHQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdidXR0b24nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ2J1dHRvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdBY2VwdGFyJyxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdidXR0b24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9iakV4dDoge2ZvbnRPcmllbjogXCJjZW50ZXJcIn0sXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuZm9ybSA9ICRidWlsZGVyLmZvcm1zWydkZWZhdWx0J107XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5pbml0V2F0Y2goKTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldEluZGljYXRpdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNldENvbmZpZ1Njb3BlID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudC5iYWNrZ3JvdW5kICE9IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmJhY2tncm91bmRGb3JtID0gY29udGVudC5iYWNrZ3JvdW5kO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50LmZvbnRGb3JtICE9IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmZvbnRGb3JtID0gY29udGVudC5mb250Rm9ybTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudC5zaXplRm9ybSAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5zaXplRm9ybSA9IGNvbnRlbnQuc2l6ZUZvcm07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQuZm9udFN0eWxlICE9IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmZvbnRTdHlsZSA9IGNvbnRlbnQuZm9udFN0eWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFyckRpcmVjdGl2ZSA9IFtdO1xyXG4gICAgICAgICAgICAgICRzY29wZS5hZGRDb21wb25lbnQgPSBmdW5jdGlvbiAoRmllbGQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvYmpFeHRyYSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iakNvbXBvbmVudCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKEZpZWxkLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBGaWVsZC5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoRmllbGQub2JqRXh0KSkge1xyXG4gICAgICAgICAgICAgICAgICBvYmpFeHRyYSA9IEZpZWxkLm9iakV4dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChGaWVsZC5pbnB1dCA9PSAnZGF0ZUlucHV0Jykge1xyXG4gICAgICAgICAgICAgICAgICBvYmpFeHRyYSA9IHtvcGVuZW46IGZhbHNlfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCgkc2NvcGUuZm9udEZvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIG9iakV4dHJhLmZvbnRDb2xvciA9ICRzY29wZS5mb250Rm9ybTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoJHNjb3BlLnNpemVGb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICBvYmpFeHRyYS5zaXplU3R5bGUgPSAkc2NvcGUuc2l6ZUZvcm07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKCRzY29wZS5mb250U3R5bGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgIG9iakV4dHJhLmZvbnRTdHlsZSA9ICRzY29wZS5mb250U3R5bGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKEZpZWxkLmlucHV0ID09ICdlbmNhYmV6YWRvJykge1xyXG4gICAgICAgICAgICAgICAgICBGaWVsZC50aXRsZSA9IFwiTm9tYnJlIGRlIGZvcm11bGFyaW9cIjtcclxuICAgICAgICAgICAgICAgICAgb2JqRXh0cmEgPSB7c2l6ZVN0eWxlOiBcIjI0cHhcIiwgZm9udE9yaWVuOiBcImNlbnRlclwifTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgb2JqQ29tcG9uZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgICBpZDogRmllbGQuaWQsXHJcbiAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogRmllbGQuaW5wdXQsXHJcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBGaWVsZC50aXRsZSxcclxuICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogRmllbGQudGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgb2JqRXh0OiBvYmpFeHRyYSxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKEZpZWxkLmlkID09ICdlbWFpbCcpIHtcclxuICAgICAgICAgICAgICAgICAgb2JqQ29tcG9uZW50Lm9iakV4dC52YWxpZGF0aW9uT3B0aW9uc0hpZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICBvYmpDb21wb25lbnQudmFsaWRhdGlvbiA9IFwiW2VtYWlsXVwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBGaWVsZC52YWxpZGF0aW9uICE9IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgb2JqQ29tcG9uZW50LnZhbGlkYXRpb24gPSBGaWVsZC52YWxpZGF0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChGaWVsZC5pbnB1dCA9PSAnY2hlY2tib3gnKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChGaWVsZC52YWx1ZURlZmF1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBGaWVsZC52YWx1ZURlZmF1bHQgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgb2JqQ29tcG9uZW50Lm9wdGlvbnMgPSBGaWVsZC52YWx1ZURlZmF1bHQuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBvYmpDb21wb25lbnQub3B0aW9ucyA9IEZpZWxkLnZhbHVlRGVmYXVsdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoRmllbGQuaW5wdXQgPT0gJ3NlbGVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKEZpZWxkLnZhbHVlRGVmYXVsdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIEZpZWxkLnZhbHVlRGVmYXVsdCA9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBvYmpDb21wb25lbnQub3B0aW9ucyA9IEZpZWxkLnZhbHVlRGVmYXVsdC5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgIG9iakNvbXBvbmVudC5vcHRpb25zID0gRmllbGQudmFsdWVEZWZhdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkYnVpbGRlci5hZGRGb3JtT2JqZWN0KCdkZWZhdWx0Jywgb2JqQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgRmllbGQub2JqRXh0ICE9IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIEZpZWxkLm9iakV4dC5kZXBlbmRlbmNlICE9IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gJHNjb3BlLmZvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmZvcm1baV0uaWQgPT0gRmllbGQub2JqRXh0LmRlcGVuZGVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gJHNjb3BlLmFyckZpZWxkcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hcnJGaWVsZHNbaV0uaWQgPT0gRmllbGQub2JqRXh0LmRlcGVuZGVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZENvbXBvbmVudCgkc2NvcGUuYXJyRmllbGRzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICRzY29wZS5pbml0V2F0Y2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJHdhdGNoKCdmb3JtJywgZnVuY3Rpb24gKG5ld3YsIG9sZCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAob2xkLmxlbmd0aCA+IG5ld3YubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbXBhcmVBcnJheU9iamVjdChvbGQsIG5ld3YsICdpZCcpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5hcnJGaWVsZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFyckZpZWxkc1tpXS5pZCA9PSBkYXRhW2pdLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXJyRmllbGRzW2ldLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIHRydWUpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNvbXBhcmVBcnJheU9iamVjdCA9IGZ1bmN0aW9uICh4LCB5LCBpdGVtQ29tcGFyZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXlSZXR1cm4gPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4geCkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgb2JqWCA9IHhbaV07XHJcbiAgICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChvYmpYW2l0ZW1Db21wYXJlZF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiBpbiB5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqWSA9IHlbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqWFtpdGVtQ29tcGFyZWRdID09IG9iallbaXRlbUNvbXBhcmVkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGFycmF5UmV0dXJuLnB1c2gob2JqWCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGFycmF5UmV0dXJuKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNldFZhbHVlQXJyT2JqID0gZnVuY3Rpb24gKHgsIHksIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXlSZXR1cm4gPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4geCkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgb2JqWCA9IHhbaV07XHJcbiAgICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChvYmpYW2l0ZW1dKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4geSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIG9ialkgPSB5W2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG9ialhbaXRlbV0gPT0gb2JqWVtpdGVtXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVJldHVybi5wdXNoKG9ialgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShhcnJheVJldHVybik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAkc2NvcGUuZ2V0Q3VzdG9tRmllbGQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXN0U2VydmljZS5nZXRDdXN0b21maWVsZCgkc2NvcGUuaWRDb250YWN0TGlzdCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBkYXRhW2ldLmFsdGVybmF0aXZlbmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBkYXRhW2ldLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0O1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZGF0YVtpXS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlICdUZXh0JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBcInRleHRJbnB1dFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0RhdGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IFwiZGF0ZUlucHV0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTnVtZXJpY2FsJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBcIm51bWJlcklucHV0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSAnVGV4dEFyZWEnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IFwidGV4dEFyZWFcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlICdNdWx0aXNlbGVjdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ID0gXCJjaGVja2JveFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1NlbGVjdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ID0gXCJzZWxlY3RcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJGaWVsZHMucHVzaCh7c2VsZWN0ZWQ6IGZhbHNlLCBpZDogaWQsIHRpdGxlOiB0aXRsZSwgaW5wdXQ6IGlucHV0LCBmaWVsZDogXCJjdXN0b21cIiwgdmFsdWVEZWZhdWx0OiBkYXRhW2ldLnZhbHVlfSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiAkc2NvcGUuZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gJHNjb3BlLmFyckZpZWxkcykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYXJyRmllbGRzW2pdLmlkID09ICRzY29wZS5mb3JtW2ldLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJGaWVsZHNbal0uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAkc2NvcGUuZ2V0SW5kaWNhdGl2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLmdldEFsbEluZGljYXRpdmUoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXS5waG9uZWNvZGUgIT0gMSAmJiBkYXRhW2ldLnBob25lY29kZSAhPSAwICYmIGRhdGFbaV0ucGhvbmVjb2RlICE9IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGFycmF5LnB1c2goXCIoK1wiICsgZGF0YVtpXS5waG9uZWNvZGUgKyBcIikgXCIgKyBkYXRhW2ldLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0Q3VzdG9tRmllbGQoKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuZGIpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluICRzY29wZS5hcnJGaWVsZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYXJyRmllbGRzW2ldLmlkID09IFwiaW5kaWNhdGl2ZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJGaWVsZHNbaV0udmFsdWVEZWZhdWx0ID0gYXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkQ29tcG9uZW50KCRzY29wZS5hcnJGaWVsZHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY29tcGxldCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAkc2NvcGUuY29uZmlnRm9ybSA9IGZ1bmN0aW9uIChuYW1lT2JqLCB2YWx1ZU9iaikge1xyXG4gICAgICAgICAgICAgICAgJGJ1aWxkZXIudXBkYXRlQ29uZmlnKCdkZWZhdWx0JywgbmFtZU9iaiwgdmFsdWVPYmopO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLkFkZEZvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VhcmNoT2JqQXJyYXkoJHNjb3BlLmZvcm0sICdpZCcsICdlbWFpbCcpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS53YXJuaW5nKCdFbCBmb3JtdWxhcmlvIGRlYmUgdGVuZXIgcG9yIGxvIG1lbm9zIGVsIGNvcnJlbycpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kID0gKGFuZ3VsYXIuaXNEZWZpbmVkKCRzY29wZS5iYWNrZ3JvdW5kRm9ybSkpID8gJHNjb3BlLmJhY2tncm91bmRGb3JtIDogbnVsbDtcclxuICAgICAgICAgICAgICAgICAgdmFyIG9ialNlbmQgPSB7Zm9ybTogJHNjb3BlLmZvcm0sIGJhY2tncm91bmQ6IGJhY2tncm91bmR9O1xyXG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5iYWNrZ3JvdW5kRm9ybSAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqU2VuZC5iYWNrZ3JvdW5kID0gJHNjb3BlLmJhY2tncm91bmRGb3JtO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLmZvbnRGb3JtICE9IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmpTZW5kLmZvbnRGb3JtID0gJHNjb3BlLmZvbnRGb3JtO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLnNpemVGb3JtICE9IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmpTZW5kLnNpemVGb3JtID0gJHNjb3BlLnNpemVGb3JtO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLmZvbnRTdHlsZSAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqU2VuZC5mb250U3R5bGUgPSAkc2NvcGUuZm9udFN0eWxlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICByZXN0U2VydmljZS5zYXZlRm9ybSgkc3RhdGVQYXJhbXMuaWQsIG9ialNlbmQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2xpc3QnKTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICRzY29wZS5zZWFyY2hPYmpBcnJheSA9IGZ1bmN0aW9uIChhcnJheSwgaXRlbSwgY29tcGFyZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBhcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoYXJyYXlbaV1baXRlbV0gPT0gY29tcGFyZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoJHN0YXRlUGFyYW1zLmlkKSB8fCAkc3RhdGVQYXJhbXMuaWQgPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjcmVhdGUuZGVzY3JpYmUnKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzdFNlcnZpY2UuZ2V0SW5mb3JtYXRpb25Gb3JtKCRzdGF0ZVBhcmFtcy5pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuaWRDb250YWN0TGlzdCA9IGRhdGEuaWRDb250YWN0bGlzdDtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmluaXQoKTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnY3JlYXRlLmRlc2NyaWJlJywge2lkOiAkcm9vdFNjb3BlLmlkRm9ybX0pO1xyXG4gICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLndhcm5pbmcoXCJFbCBmb3JtdWxhcmlvIG5vIHRpZW5lIHVuYSBsaXN0YSBkZSBjb250YWN0byBhc2lnbmFkYS5cIik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1dKVxyXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0NvbnRhY3RzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3Jlc3RTZXJ2aWNlJywgJ25vdGlmaWNhdGlvblNlcnZpY2UnLCAnJHN0YXRlUGFyYW1zJywgJyRzdGF0ZScsIGZ1bmN0aW9uICgkc2NvcGUsIHJlc3RTZXJ2aWNlLCBub3RpZmljYXRpb25TZXJ2aWNlLCAkc3RhdGVQYXJhbXMsICRzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5zaG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2hvd0xpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICRzY29wZS5jb250YWN0bGlzdCA9IFt7fV07XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkID0gW107XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzYmFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZXN0YXR1cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmZvcm0gPSB7fTtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2hvd1N0YXR1cyA9IGZ1bmN0aW9uIChhcnIsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBbXTtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChhcnIsIGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocyA9PSBjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZC5wdXNoKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZC5sZW5ndGggPyBzZWxlY3RlZC5qb2luKCcsICcpIDogJ2VtcHR5JztcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICRzY29wZS51cGRhdGVVc2VyID0gZnVuY3Rpb24gKGRhdGEsIGtleSwgaWRDb250YWN0KSB7XHJcbiAgICAgICAgICAgICAgICByZXN0U2VydmljZS5lZGl0Q29udGFjdChpZENvbnRhY3QsIGtleSwgZGF0YSwgJHNjb3BlLmlkQ29udGFjdGxpc3QpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5wcmltYXJ5KGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGwoKTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldEFsbCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAkc2NvcGUuc3RyaW5nZmllbGRzcHJpbWFyeSA9IGZ1bmN0aW9uIChmaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0cmluZyA9IGZpZWxkO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChmaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyA9IFwiTm9tYnJlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJsYXN0bmFtZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyA9IFwiQXBlbGxpZG9cIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgY2FzZSBcImVtYWlsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nID0gXCJDb3JyZW8gZWxlY3Ryb25pY29cIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgY2FzZSBcInBob25lXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nID0gXCJUZWxlZm9ub1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICBjYXNlIFwiYmlydGhkYXRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nID0gXCJGZWNoYSBkZSBjdW1wbGVhw7Fvc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICBjYXNlIFwiaW5kaWNhdGl2ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyA9IFwiSW5kaWNhdGl2b1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICBjYXNlIFwiZGVzY3JpcHRpb25cIjpcclxuICAgICAgICAgICAgICAgICAgICBzdHJpbmcgPSBcIkRlc2NyaXBjacOzblwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZztcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICRzY29wZS5zdHJpbmdzZWFyY2ggPSAtMTtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2VhcmNoY29udGFjdHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RyaW5nc2VhcmNoID0gJHNjb3BlLnNlYXJjaDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGwoKTtcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbCA9IDA7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnBhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICRzY29wZS5mb3J3YXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzYmFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbCArPSAxO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGwoKTtcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICRzY29wZS5mYXN0Zm9yd2FyZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9ncmVzc2JhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWwgPSAoJHNjb3BlLmNvbnRhY3RzLnRvdGFsX3BhZ2VzIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFnZSA9ICRzY29wZS5jb250YWN0cy50b3RhbF9wYWdlcztcclxuICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGwoKTtcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICRzY29wZS5iYWNrd2FyZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9ncmVzc2JhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWwgLT0gMTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wYWdlIC09IDE7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsKCk7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAkc2NvcGUuZmFzdGJhY2t3YXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzYmFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFnZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsKCk7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzYmFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXN0U2VydmljZS5nZXRJbmZvcm1hdGlvbkZvcm0oJHNjb3BlLmlkRm9ybSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuZm9ybS5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuaWRDb250YWN0bGlzdCA9IGRhdGEuaWRDb250YWN0bGlzdDtcclxuICAgICAgICAgICAgICAgICAgcmVzdFNlcnZpY2UuZ2V0QWxsKCRzY29wZS5pbml0aWFsLCAkc2NvcGUuaWRDb250YWN0bGlzdCwgJHNjb3BlLmlkRm9ybSwgJHNjb3BlLnN0cmluZ3NlYXJjaCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnRvdGFsID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0xpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3cgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dMaXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jb250YWN0cyA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICByZXN0U2VydmljZS5nZXRBbGxJbmRpY2F0aXZlKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbmRpY2F0aXZlID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLmN1c3RvbWZpZWxkc2VsZWN0KCRzY29wZS5pZENvbnRhY3RsaXN0KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFyciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaV0udHlwZSA9PSBcIlNlbGVjdFwiIHx8IGRhdGFbaV0udHlwZSA9PSBcIk11bHRpc2VsZWN0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJbZGF0YVtpXS5pZEN1c3RvbWZpZWxkXSA9IGRhdGFbaV0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9ncmVzc2JhciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlc3RhdHVzID0gZnVuY3Rpb24gKGlkQ29udGFjdCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdFNlcnZpY2UuY2hhbmdlc3RhdHVzKGlkQ29udGFjdCwgJHNjb3BlLmlkQ29udGFjdGxpc3QpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldEFsbCgpO1xyXG4gICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLnByaW1hcnkoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNvbmZpcm1EZWxldGUgPSBmdW5jdGlvbiAoaWRDb250YWN0LCBpZENvbnRhY3RsaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaWRDb250YWN0ID0gaWRDb250YWN0O1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlkQ29udGFjdGxpc3QgPSBpZENvbnRhY3RsaXN0O1xyXG4gICAgICAgICAgICAgICAgb3Blbk1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKCRzdGF0ZVBhcmFtcy5pZCAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlkRm9ybSA9ICRzdGF0ZVBhcmFtcy5pZDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGwoKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdsaXN0Jyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICRzY29wZS5kZWxldGVDb250YWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdFNlcnZpY2UuZGVsZXRlQ29udGFjdCgkc2NvcGUuaWRDb250YWN0LCAkc2NvcGUuaWRDb250YWN0bGlzdCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLndhcm5pbmcoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldEFsbCgpO1xyXG4gICAgICAgICAgICAgICAgY2xvc2VNb2RhbCgpO1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB9XSlcclxuICAgICAgICAgIC5jb250cm9sbGVyKCdtYWluJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuc3RhdGUgPSAkc3RhdGU7XHJcbiAgICAgICAgICAgIH1dKVxyXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ3JlcG9ydENvbnRyb2xsZXInLCBbJyRzY29wZScsICdub3RpZmljYXRpb25TZXJ2aWNlJywgJ3Jlc3RTZXJ2aWNlJywgJyRzdGF0ZVBhcmFtcycsICdjb25zdGFudEZvcm1zJywgZnVuY3Rpb24gKCRzY29wZSwgbm90aWZpY2F0aW9uU2VydmljZSwgcmVzdFNlcnZpY2UsICRzdGF0ZVBhcmFtcywgY29uc3RhbnRGb3Jtcykge1xyXG5cclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAkc2NvcGUuZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICRzY29wZS5taXNjID0ge1xyXG4gICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNob3dMaXN0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29udGFjdGxpc3Q6IFt7fV0sXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogW10sXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc2JhcjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VzdGF0dXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzdHJpbmdzZWFyY2g6IC0xLFxyXG4gICAgICAgICAgICAgICAgaW5pdGlhbDogMCxcclxuICAgICAgICAgICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgICAgICAgICBwcmV2aWV3U2hvdzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpbnB1dDogW10sXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaUZvcm06IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVGb3I6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRlQ3JlYXRlZDogXCJcIixcclxuICAgICAgICAgICAgICAgIG51bVN1c2NyaXB0aW9uOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlRm9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0ZTogXCJcIixcclxuICAgICAgICAgICAgICAgIGZpZWxkczoge30sXHJcbiAgICAgICAgICAgICAgICB0b3RhbDogMCxcclxuICAgICAgICAgICAgICAgIG5hbWVGb3JtOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgc2l6ZUFycmF5RmllbGRzOiAwLFxyXG4gICAgICAgICAgICAgICAgYXJyYXlUaXRsZXNGaWw6IFtdLFxyXG4gICAgICAgICAgICAgICAgYXJyYXlEYXRhQ29udGFjdHM6IFtdXHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmZ1bmN0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIHNlYXJjaGNvbnRhY3RzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLnN0cmluZ3NlYXJjaCA9ICRzY29wZS5zZWFyY2g7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5yZXNTZXJ2aWNlLnN1c2NyaXBzZm9ybXMoJHNjb3BlLmlkRm9ybSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZm9yd2FyZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy5pbml0aWFsICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc1NlcnZpY2Uuc3VzY3JpcHNmb3Jtcygkc2NvcGUuaWRGb3JtKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmYXN0Zm9yd2FyZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy5pbml0aWFsID0gKCRzY29wZS5jb250YWN0c1syXS50b3RhbF9wYWdlcyAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy5wYWdlID0gJHNjb3BlLmNvbnRhY3RzWzJdLnRvdGFsX3BhZ2VzO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUucmVzU2VydmljZS5zdXNjcmlwc2Zvcm1zKCRzY29wZS5pZEZvcm0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJhY2t3YXJkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLmluaXRpYWwgLT0gMTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2MucGFnZSAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUucmVzU2VydmljZS5zdXNjcmlwc2Zvcm1zKCRzY29wZS5pZEZvcm0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZhc3RiYWNrd2FyZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy5pbml0aWFsID0gMDtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2MucGFnZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5yZXNTZXJ2aWNlLnN1c2NyaXBzZm9ybXMoJHNjb3BlLmlkRm9ybSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbGlzdEZvcm1zOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLmxpc3RGb3Jtcygkc2NvcGUubWlzYy5pbml0aWFsLCAkc2NvcGUuZmlsdGVyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IHJlcztcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZ2V0QWxsSW5kaWNhdGl2ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICByZXN0U2VydmljZS5nZXRBbGxJbmRpY2F0aXZlKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbmRpY2F0aXZlID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZG93bG9hZFJlcG9ydDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUucmVzU2VydmljZS5kb3dsb2FkUmVwb3J0KCk7XHJcbiAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBmdWxsVXJsQmFzZSArICdzdGF0aXN0aWMvZG93bmxvYWRleGNlbC8nICsgJ0Zvcm11bGFyaW9fJyArICRzY29wZS5taXNjLm5hbWVGb3JtO1xyXG4gICAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gdXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgJHNjb3BlLnJlc1NlcnZpY2UgPSB7XHJcbiAgICAgICAgICAgICAgICBkb3dsb2FkUmVwb3J0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlc3RTZXJ2aWNlLmRvd2xvYWRSZXBvcnRDb250YWN0c0Zvcm0oJHNjb3BlLmlkRm9ybSkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN1c2NyaXBzZm9ybXM6IGZ1bmN0aW9uIChwYXJhbUlkRm9ybSkge1xyXG4gICAgICAgICAgICAgICAgICByZXN0U2VydmljZS5zdXNjcmlwc2Zvcm1zKHBhcmFtSWRGb3JtLCAkc2NvcGUubWlzYy5pbml0aWFsLCAkc2NvcGUubWlzYy5zdHJpbmdzZWFyY2gpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy50b3RhbCA9IGRhdGFbMV1bJ3RvdGFsJ107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhWzFdLnRvdGFsID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLnNob3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLnNob3dMaXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLnNob3cgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2Muc2hvd0xpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhWzBdWydpdGVtcyddLmlkQ29udGFjdHMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRhY3RzID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLmNhdGVnb3JpRm9ybSA9IGRhdGFbMF0uaXRlbXNbJ25hbWUnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLmNyZWF0ZUZvciA9IGRhdGFbMF0uaXRlbXNbJ2NyZWF0ZWRCeSddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2MuZGF0ZUNyZWF0ZWQgPSBkYXRhWzBdLml0ZW1zWydjcmVhdGVkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy5udW1TdXNjcmlwdGlvbiA9IGRhdGFbMV1bJ3RvdGFsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy51cGRhdGVGb3IgPSBkYXRhWzBdLml0ZW1zWyd1cGRhdGVkQnknXTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLnVwZGF0ZURhdGUgPSBkYXRhWzBdLml0ZW1zWyd1cGRhdGVkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZmllbGRzZm9ybXMgPSBkYXRhWzNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZpZWxkc3BlcnNvbmFsID0gZGF0YVs0XS5mb3JtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRhY3RJbmZvTGlzdCA9IGRhdGFbNV0uY29udGFjdHNpbmZvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2MubmFtZUZvcm0gPSBkYXRhWzBdLml0ZW1zWyduYW1lRm9ybSddO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuZmllbGRzcGVyc29uYWwsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pZCA9PSAnZW5jYWJlemFkbycgfHwgdmFsdWUuaWQgPT0gJ2J1dHRvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZmllbGRzcGVyc29uYWwuc3BsaWNlKGtleSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2MuYXJyYXlUaXRsZXNGaWwgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLnNpemVBcnJheUZpZWxkcyA9ICRzY29wZS5maWVsZHNwZXJzb25hbC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goJHNjb3BlLmZpZWxkc3BlcnNvbmFsLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm1pc2Muc2l6ZUFycmF5RmllbGRzID4gNykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPD0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2MuYXJyYXlUaXRsZXNGaWwucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5taXNjLnNpemVBcnJheUZpZWxkcyA8PSA3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2MuYXJyYXlUaXRsZXNGaWwucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJheUF1eCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2MuYXJyYXlEYXRhQ29udGFjdHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuY29udGFjdEluZm9MaXN0LCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRDb250YWN0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmF1eCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godmFsdWUsIGZ1bmN0aW9uICh2YWx1ZTIsIGtleTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm1pc2Muc2l6ZUFycmF5RmllbGRzID4gNykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50Q29udGFjdCA8PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hdXhba2V5Ml0gPSB2YWx1ZTI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hdXhba2V5Ml0gPSB2YWx1ZTI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRDb250YWN0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy5hcnJheURhdGFDb250YWN0cy5wdXNoKCRzY29wZS5hdXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb250YWN0cyA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy5jYXRlZ29yaUZvcm0gPSBkYXRhWzBdLml0ZW1zWyduYW1lJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy5jcmVhdGVGb3IgPSBkYXRhWzBdLml0ZW1zWydjcmVhdGVkQnknXTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLmRhdGVDcmVhdGVkID0gZGF0YVswXS5pdGVtc1snY3JlYXRlZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2MubnVtU3VzY3JpcHRpb24gPSBkYXRhWzFdWyd0b3RhbCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pc2MudXBkYXRlRm9yID0gZGF0YVswXS5pdGVtc1sndXBkYXRlZEJ5J107XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWlzYy51cGRhdGVEYXRlID0gZGF0YVswXS5pdGVtc1sndXBkYXRlZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZpZWxkc2Zvcm1zID0gZGF0YVszXTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5maWVsZHNwZXJzb25hbCA9IGRhdGFbNF0uZm9ybTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb250YWN0SW5mb0xpc3QgPSBkYXRhWzVdLmNvbnRhY3RzaW5mbztcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLm5hbWVGb3JtID0gZGF0YVswXS5pdGVtc1snbmFtZUZvcm0nXTtcclxuICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uud2FybmluZyhjb25zdGFudEZvcm1zLk5vdGlmaWNhdGlvbnMuRXJyb3JzLmVycm9yTm9uZUNvbnRhY3RzSW5zY3JpcHRGb3Jtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNjLnByb2dyZXNzYmFyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiAkc3RhdGVQYXJhbXMuaWQgIT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlkRm9ybSA9ICRzdGF0ZVBhcmFtcy5pZDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5yZXNTZXJ2aWNlLnN1c2NyaXBzZm9ybXMoJHNjb3BlLmlkRm9ybSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XSlcclxufSkoKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9qcy9hbmd1bGFyL2Zvcm1zL2NvbnRyb2xsZXJzLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n(function () {\r\n  angular.module('forms.services', [])\r\n          .factory('restService', ['$http', '$q', 'notificationService','constantForms', function ($http, $q, notificationService, constantForms) {\r\n\r\n              function getAllReportEmail(page, search) {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.getAllReportEmail + page;\r\n                $http.post(url, search)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n\r\n              function getContactlist() {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.getContactlist;\r\n                $http.get(url)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n\r\n              function getMailTemplate() {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.getMailTemplate;\r\n                $http.get(url)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n\r\n\r\n              function previewMailTemplateContent(id) {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.previewMailTemplateContent + id;\r\n                $http.post(url)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n\r\n              function saveBasicInformation(data) {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.saveBasicInformation;\r\n                $http.post(url, data)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n\r\n              function updatebasicinformation(idForm, data) {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.updatebasicinformation+ idForm;\r\n                $http.put(url, data)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n              function getCustomfield(idContactlist) {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.getCustomfield + idContactlist;\r\n                $http.get(url)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n\r\n              function listForms(page, data) {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.listForms + page;\r\n                $http.post(url, data)\r\n                        .success(function (res) {\r\n                          deferred.resolve(res);\r\n                        })\r\n                        .error(function (res) {\r\n                          deferred.reject(res);\r\n                          notificationService.error(res.message);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n\r\n              function getAllFormCategory() {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.getAllFormCategory;\r\n                $http.get(url)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n\r\n              function getInformationForm(id) {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.getInformationForm + id;\r\n                $http.get(url)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n\r\n              function saveForm(id, data) {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.saveForm + id;\r\n                $http.post(url, data)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                          notificationService.success(data.message);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n\r\n              function getAllIndicative() {\r\n                var deferred = $q.defer();\r\n                $http.get(constantForms.UrlPeticion.Urls.getAllIndicative)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n\r\n                return deferred.promise;\r\n              }\r\n\r\n              function getAll(page, idContactlist, idForm, stringsearch) {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.getAll + page + \"/\" + idContactlist + \"/\" + idForm;\r\n\r\n                $http.post(url, stringsearch)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n\r\n                return deferred.promise;\r\n              }\r\n\r\n              function customfieldselect(idContactlist) {\r\n                var deferred = $q.defer();\r\n                $http.get(constantForms.UrlPeticion.Urls.customfieldselect + idContactlist)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n\r\n                return deferred.promise;\r\n              }\r\n\r\n              function editContact(idContact, key, value, idContactlist) {\r\n                var deferred = $q.defer();\r\n                var data = {\r\n                  idContact: idContact,\r\n                  key: key,\r\n                  value: value\r\n                };\r\n                $http.post(constantForms.UrlPeticion.Urls.editContact + idContactlist, data)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n\r\n                return deferred.promise;\r\n              }\r\n\r\n              function changestatus(idContact, idContactlist) {\r\n                var deferred = $q.defer();\r\n                $http.get(constantForms.UrlPeticion.Urls.changestatus + idContact + \"/\" + idContactlist)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n\r\n                return deferred.promise;\r\n              }\r\n\r\n              function deleteContact(idContact, idContactlist) {\r\n                var deferred = $q.defer();\r\n                $http.delete(constantForms.UrlPeticion.Urls.deleteContact + idContact + '/' + idContactlist)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n\r\n                return deferred.promise;\r\n              }\r\n\r\n              function getOptin(idForm) {\r\n                var deferred = $q.defer();\r\n                $http.get(constantForms.UrlPeticion.Urls.getOptin + idForm)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n\r\n                return deferred.promise;\r\n              }\r\n\r\n              function getWelcomeMail(idForm) {\r\n                var deferred = $q.defer();\r\n                $http.get(constantForms.UrlPeticion.Urls.getWelcomeMail + idForm)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n\r\n                return deferred.promise;\r\n              }\r\n\r\n              function getNotification(idForm) {\r\n                var deferred = $q.defer();\r\n                $http.get(constantForms.UrlPeticion.Urls.getNotification + idForm)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n\r\n                return deferred.promise;\r\n              }\r\n\r\n              function getcontentform(idForm) {\r\n                var deferred = $q.defer();\r\n                $http.get(constantForms.UrlPeticion.Urls.getcontentform + idForm)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                        });\r\n\r\n                return deferred.promise;\r\n              }\r\n\r\n              function addFormCategory(data) {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.addFormCategory;\r\n\r\n                $http.post(url, data)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n\r\n                return deferred.promise;\r\n              }\r\n\r\n              function getallmailtemplatebyfilter(search) {\r\n                var deferred = $q.defer();\r\n             \r\n                $http.post(constantForms.UrlPeticion.Urls.getallmailtemplatebyfilter, search)\r\n                        .success(function (data) {\r\n                          //console.log('getallmailtemplate', data);\r\n                          if (data.length == 0) {\r\n                            notificationService.error(\"No se encontro ninguna plantilla de correo.\");\r\n                            deferred.reject(data);\r\n                          }\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n              \r\n              function suscripsforms(idForm, page, stringsearch){\r\n                var deferred = $q.defer();\r\n                $http.post(constantForms.UrlPeticion.Urls.suscripsforms + idForm+ '/'+page, stringsearch)\r\n                  .success(function (data) {\r\n                    deferred.resolve(data);\r\n                  })\r\n                  .error(function (data) {\r\n                    deferred.reject(data);\r\n                  });\r\n                  \r\n                  return deferred.promise;\r\n              }\r\n              \r\n              function dowloadReportContactsForm(idForm) {\r\n                var deferred = $q.defer();\r\n                var url = constantForms.UrlPeticion.Urls.dowloadReportContactsForm+idForm;\r\n                $http.post(url)\r\n                        .success(function (data) {\r\n                          deferred.resolve(data);\r\n                        })\r\n                        .error(function (data) {\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n              \r\n              function deleteForm(data){\r\n                var url = constantForms.UrlPeticion.Urls.deleteForm;\r\n                var deferred = $q.defer();\r\n                $http.post(url, data)\r\n                        .success(function(data){\r\n                          deferred.resolve(data);\r\n                        }).error(function(data){\r\n                          deferred.reject(data);\r\n                          notificationService.error(data.message);\r\n                        });\r\n                return deferred.promise;\r\n              }\r\n\r\n              return {\r\n                getAllReportEmail: getAllReportEmail,\r\n                getContactlist: getContactlist,\r\n                getMailTemplate: getMailTemplate,\r\n                previewMailTemplateContent: previewMailTemplateContent,\r\n                saveBasicInformation: saveBasicInformation,\r\n                getCustomfield: getCustomfield,\r\n                listForms: listForms,\r\n                getAllFormCategory: getAllFormCategory,\r\n                saveForm: saveForm,\r\n                getInformationForm: getInformationForm,\r\n                getAllIndicative: getAllIndicative,\r\n                getAll: getAll,\r\n                getAllIndicative: getAllIndicative,\r\n                customfieldselect: customfieldselect,\r\n                editContact: editContact,\r\n                changestatus: changestatus,\r\n                deleteContact: deleteContact,\r\n                getOptin: getOptin,\r\n                getWelcomeMail: getWelcomeMail,\r\n                getNotification: getNotification,\r\n                updatebasicinformation: updatebasicinformation,\r\n                getcontentform: getcontentform,\r\n                addFormCategory: addFormCategory,\r\n                getallmailtemplatebyfilter:getallmailtemplatebyfilter,\r\n                suscripsforms: suscripsforms,\r\n                dowloadReportContactsForm: dowloadReportContactsForm,\r\n                deleteForm: deleteForm\r\n              };\r\n            }])\r\n          .factory('notificationService', function () {\r\n            function error(message) {\r\n              slideOnTop(message, 4000, 'glyphicon glyphicon-remove-circle', 'danger');\r\n            }\r\n\r\n            function success(message) {\r\n              slideOnTop(message, 4000, 'glyphicon glyphicon-ok-circle', 'success');\r\n            }\r\n\r\n            function warning(message) {\r\n              slideOnTop(message, 4000, 'glyphicon glyphicon-exclamation-sign', 'warning');\r\n            }\r\n\r\n            function notice(message) {\r\n              slideOnTop(message, 4000, 'glyphicon glyphicon-exclamation-sign', 'notice');\r\n            }\r\n\r\n            function primary(message) {\r\n              slideOnTop(message, 4000, 'glyphicon glyphicon-exclamation-sign', 'primary');\r\n            }\r\n\r\n            return {\r\n              error: error,\r\n              success: success,\r\n              warning: warning,\r\n              notice: notice,\r\n              primary: primary\r\n            };\r\n          });\r\n})();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL2Zvcm1zL3NlcnZpY2VzLmpzP2M1MWIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qjs7QUFFekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qjs7QUFFekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qjs7QUFFekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EseUJBQXlCOztBQUV6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCOztBQUV6QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxtQkFBbUI7O0FBRW5CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsQ0FBQyIsImZpbGUiOiI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gIGFuZ3VsYXIubW9kdWxlKCdmb3Jtcy5zZXJ2aWNlcycsIFtdKVxyXG4gICAgICAgICAgLmZhY3RvcnkoJ3Jlc3RTZXJ2aWNlJywgWyckaHR0cCcsICckcScsICdub3RpZmljYXRpb25TZXJ2aWNlJywnY29uc3RhbnRGb3JtcycsIGZ1bmN0aW9uICgkaHR0cCwgJHEsIG5vdGlmaWNhdGlvblNlcnZpY2UsIGNvbnN0YW50Rm9ybXMpIHtcclxuXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QWxsUmVwb3J0RW1haWwocGFnZSwgc2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGNvbnN0YW50Rm9ybXMuVXJsUGV0aWNpb24uVXJscy5nZXRBbGxSZXBvcnRFbWFpbCArIHBhZ2U7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KHVybCwgc2VhcmNoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRDb250YWN0bGlzdCgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gY29uc3RhbnRGb3Jtcy5VcmxQZXRpY2lvbi5VcmxzLmdldENvbnRhY3RsaXN0O1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KHVybClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TWFpbFRlbXBsYXRlKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgICAgIHZhciB1cmwgPSBjb25zdGFudEZvcm1zLlVybFBldGljaW9uLlVybHMuZ2V0TWFpbFRlbXBsYXRlO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KHVybClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIHByZXZpZXdNYWlsVGVtcGxhdGVDb250ZW50KGlkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGNvbnN0YW50Rm9ybXMuVXJsUGV0aWNpb24uVXJscy5wcmV2aWV3TWFpbFRlbXBsYXRlQ29udGVudCArIGlkO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIHNhdmVCYXNpY0luZm9ybWF0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gY29uc3RhbnRGb3Jtcy5VcmxQZXRpY2lvbi5VcmxzLnNhdmVCYXNpY0luZm9ybWF0aW9uO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZWJhc2ljaW5mb3JtYXRpb24oaWRGb3JtLCBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGNvbnN0YW50Rm9ybXMuVXJsUGV0aWNpb24uVXJscy51cGRhdGViYXNpY2luZm9ybWF0aW9uKyBpZEZvcm07XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wdXQodXJsLCBkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEN1c3RvbWZpZWxkKGlkQ29udGFjdGxpc3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gY29uc3RhbnRGb3Jtcy5VcmxQZXRpY2lvbi5VcmxzLmdldEN1c3RvbWZpZWxkICsgaWRDb250YWN0bGlzdDtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCh1cmwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGxpc3RGb3JtcyhwYWdlLCBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGNvbnN0YW50Rm9ybXMuVXJsUGV0aWNpb24uVXJscy5saXN0Rm9ybXMgKyBwYWdlO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihyZXMubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRBbGxGb3JtQ2F0ZWdvcnkoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGNvbnN0YW50Rm9ybXMuVXJsUGV0aWNpb24uVXJscy5nZXRBbGxGb3JtQ2F0ZWdvcnk7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQodXJsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRJbmZvcm1hdGlvbkZvcm0oaWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gY29uc3RhbnRGb3Jtcy5VcmxQZXRpY2lvbi5VcmxzLmdldEluZm9ybWF0aW9uRm9ybSArIGlkO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KHVybClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBzYXZlRm9ybShpZCwgZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgICAgIHZhciB1cmwgPSBjb25zdGFudEZvcm1zLlVybFBldGljaW9uLlVybHMuc2F2ZUZvcm0gKyBpZDtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QodXJsLCBkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5zdWNjZXNzKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRBbGxJbmRpY2F0aXZlKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldChjb25zdGFudEZvcm1zLlVybFBldGljaW9uLlVybHMuZ2V0QWxsSW5kaWNhdGl2ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEFsbChwYWdlLCBpZENvbnRhY3RsaXN0LCBpZEZvcm0sIHN0cmluZ3NlYXJjaCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgICAgIHZhciB1cmwgPSBjb25zdGFudEZvcm1zLlVybFBldGljaW9uLlVybHMuZ2V0QWxsICsgcGFnZSArIFwiL1wiICsgaWRDb250YWN0bGlzdCArIFwiL1wiICsgaWRGb3JtO1xyXG5cclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QodXJsLCBzdHJpbmdzZWFyY2gpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBjdXN0b21maWVsZHNlbGVjdChpZENvbnRhY3RsaXN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KGNvbnN0YW50Rm9ybXMuVXJsUGV0aWNpb24uVXJscy5jdXN0b21maWVsZHNlbGVjdCArIGlkQ29udGFjdGxpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBlZGl0Q29udGFjdChpZENvbnRhY3QsIGtleSwgdmFsdWUsIGlkQ29udGFjdGxpc3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgaWRDb250YWN0OiBpZENvbnRhY3QsXHJcbiAgICAgICAgICAgICAgICAgIGtleToga2V5LFxyXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KGNvbnN0YW50Rm9ybXMuVXJsUGV0aWNpb24uVXJscy5lZGl0Q29udGFjdCArIGlkQ29udGFjdGxpc3QsIGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBjaGFuZ2VzdGF0dXMoaWRDb250YWN0LCBpZENvbnRhY3RsaXN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KGNvbnN0YW50Rm9ybXMuVXJsUGV0aWNpb24uVXJscy5jaGFuZ2VzdGF0dXMgKyBpZENvbnRhY3QgKyBcIi9cIiArIGlkQ29udGFjdGxpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBkZWxldGVDb250YWN0KGlkQ29udGFjdCwgaWRDb250YWN0bGlzdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgICAgICRodHRwLmRlbGV0ZShjb25zdGFudEZvcm1zLlVybFBldGljaW9uLlVybHMuZGVsZXRlQ29udGFjdCArIGlkQ29udGFjdCArICcvJyArIGlkQ29udGFjdGxpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRPcHRpbihpZEZvcm0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoY29uc3RhbnRGb3Jtcy5VcmxQZXRpY2lvbi5VcmxzLmdldE9wdGluICsgaWRGb3JtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0V2VsY29tZU1haWwoaWRGb3JtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KGNvbnN0YW50Rm9ybXMuVXJsUGV0aWNpb24uVXJscy5nZXRXZWxjb21lTWFpbCArIGlkRm9ybSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGdldE5vdGlmaWNhdGlvbihpZEZvcm0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoY29uc3RhbnRGb3Jtcy5VcmxQZXRpY2lvbi5VcmxzLmdldE5vdGlmaWNhdGlvbiArIGlkRm9ybSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGdldGNvbnRlbnRmb3JtKGlkRm9ybSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldChjb25zdGFudEZvcm1zLlVybFBldGljaW9uLlVybHMuZ2V0Y29udGVudGZvcm0gKyBpZEZvcm0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZEZvcm1DYXRlZ29yeShkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGNvbnN0YW50Rm9ybXMuVXJsUGV0aWNpb24uVXJscy5hZGRGb3JtQ2F0ZWdvcnk7XHJcblxyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRhbGxtYWlsdGVtcGxhdGVieWZpbHRlcihzZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoY29uc3RhbnRGb3Jtcy5VcmxQZXRpY2lvbi5VcmxzLmdldGFsbG1haWx0ZW1wbGF0ZWJ5ZmlsdGVyLCBzZWFyY2gpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0YWxsbWFpbHRlbXBsYXRlJywgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoXCJObyBzZSBlbmNvbnRybyBuaW5ndW5hIHBsYW50aWxsYSBkZSBjb3JyZW8uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24gc3VzY3JpcHNmb3JtcyhpZEZvcm0sIHBhZ2UsIHN0cmluZ3NlYXJjaCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdChjb25zdGFudEZvcm1zLlVybFBldGljaW9uLlVybHMuc3VzY3JpcHNmb3JtcyArIGlkRm9ybSsgJy8nK3BhZ2UsIHN0cmluZ3NlYXJjaClcclxuICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGRvd2xvYWRSZXBvcnRDb250YWN0c0Zvcm0oaWRGb3JtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGNvbnN0YW50Rm9ybXMuVXJsUGV0aWNpb24uVXJscy5kb3dsb2FkUmVwb3J0Q29udGFjdHNGb3JtK2lkRm9ybTtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QodXJsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZUZvcm0oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gY29uc3RhbnRGb3Jtcy5VcmxQZXRpY2lvbi5VcmxzLmRlbGV0ZUZvcm07XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZ2V0QWxsUmVwb3J0RW1haWw6IGdldEFsbFJlcG9ydEVtYWlsLFxyXG4gICAgICAgICAgICAgICAgZ2V0Q29udGFjdGxpc3Q6IGdldENvbnRhY3RsaXN0LFxyXG4gICAgICAgICAgICAgICAgZ2V0TWFpbFRlbXBsYXRlOiBnZXRNYWlsVGVtcGxhdGUsXHJcbiAgICAgICAgICAgICAgICBwcmV2aWV3TWFpbFRlbXBsYXRlQ29udGVudDogcHJldmlld01haWxUZW1wbGF0ZUNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICBzYXZlQmFzaWNJbmZvcm1hdGlvbjogc2F2ZUJhc2ljSW5mb3JtYXRpb24sXHJcbiAgICAgICAgICAgICAgICBnZXRDdXN0b21maWVsZDogZ2V0Q3VzdG9tZmllbGQsXHJcbiAgICAgICAgICAgICAgICBsaXN0Rm9ybXM6IGxpc3RGb3JtcyxcclxuICAgICAgICAgICAgICAgIGdldEFsbEZvcm1DYXRlZ29yeTogZ2V0QWxsRm9ybUNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgc2F2ZUZvcm06IHNhdmVGb3JtLFxyXG4gICAgICAgICAgICAgICAgZ2V0SW5mb3JtYXRpb25Gb3JtOiBnZXRJbmZvcm1hdGlvbkZvcm0sXHJcbiAgICAgICAgICAgICAgICBnZXRBbGxJbmRpY2F0aXZlOiBnZXRBbGxJbmRpY2F0aXZlLFxyXG4gICAgICAgICAgICAgICAgZ2V0QWxsOiBnZXRBbGwsXHJcbiAgICAgICAgICAgICAgICBnZXRBbGxJbmRpY2F0aXZlOiBnZXRBbGxJbmRpY2F0aXZlLFxyXG4gICAgICAgICAgICAgICAgY3VzdG9tZmllbGRzZWxlY3Q6IGN1c3RvbWZpZWxkc2VsZWN0LFxyXG4gICAgICAgICAgICAgICAgZWRpdENvbnRhY3Q6IGVkaXRDb250YWN0LFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlc3RhdHVzOiBjaGFuZ2VzdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBkZWxldGVDb250YWN0OiBkZWxldGVDb250YWN0LFxyXG4gICAgICAgICAgICAgICAgZ2V0T3B0aW46IGdldE9wdGluLFxyXG4gICAgICAgICAgICAgICAgZ2V0V2VsY29tZU1haWw6IGdldFdlbGNvbWVNYWlsLFxyXG4gICAgICAgICAgICAgICAgZ2V0Tm90aWZpY2F0aW9uOiBnZXROb3RpZmljYXRpb24sXHJcbiAgICAgICAgICAgICAgICB1cGRhdGViYXNpY2luZm9ybWF0aW9uOiB1cGRhdGViYXNpY2luZm9ybWF0aW9uLFxyXG4gICAgICAgICAgICAgICAgZ2V0Y29udGVudGZvcm06IGdldGNvbnRlbnRmb3JtLFxyXG4gICAgICAgICAgICAgICAgYWRkRm9ybUNhdGVnb3J5OiBhZGRGb3JtQ2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBnZXRhbGxtYWlsdGVtcGxhdGVieWZpbHRlcjpnZXRhbGxtYWlsdGVtcGxhdGVieWZpbHRlcixcclxuICAgICAgICAgICAgICAgIHN1c2NyaXBzZm9ybXM6IHN1c2NyaXBzZm9ybXMsXHJcbiAgICAgICAgICAgICAgICBkb3dsb2FkUmVwb3J0Q29udGFjdHNGb3JtOiBkb3dsb2FkUmVwb3J0Q29udGFjdHNGb3JtLFxyXG4gICAgICAgICAgICAgICAgZGVsZXRlRm9ybTogZGVsZXRlRm9ybVxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1dKVxyXG4gICAgICAgICAgLmZhY3RvcnkoJ25vdGlmaWNhdGlvblNlcnZpY2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICBzbGlkZU9uVG9wKG1lc3NhZ2UsIDQwMDAsICdnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZS1jaXJjbGUnLCAnZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgIHNsaWRlT25Ub3AobWVzc2FnZSwgNDAwMCwgJ2dseXBoaWNvbiBnbHlwaGljb24tb2stY2lyY2xlJywgJ3N1Y2Nlc3MnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gd2FybmluZyhtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgc2xpZGVPblRvcChtZXNzYWdlLCA0MDAwLCAnZ2x5cGhpY29uIGdseXBoaWNvbi1leGNsYW1hdGlvbi1zaWduJywgJ3dhcm5pbmcnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gbm90aWNlKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICBzbGlkZU9uVG9wKG1lc3NhZ2UsIDQwMDAsICdnbHlwaGljb24gZ2x5cGhpY29uLWV4Y2xhbWF0aW9uLXNpZ24nLCAnbm90aWNlJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHByaW1hcnkobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgIHNsaWRlT25Ub3AobWVzc2FnZSwgNDAwMCwgJ2dseXBoaWNvbiBnbHlwaGljb24tZXhjbGFtYXRpb24tc2lnbicsICdwcmltYXJ5Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxyXG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXHJcbiAgICAgICAgICAgICAgd2FybmluZzogd2FybmluZyxcclxuICAgICAgICAgICAgICBub3RpY2U6IG5vdGljZSxcclxuICAgICAgICAgICAgICBwcmltYXJ5OiBwcmltYXJ5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9KTtcclxufSkoKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9qcy9hbmd1bGFyL2Zvcm1zL3NlcnZpY2VzLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4\n");

/***/ })
/******/ ]);