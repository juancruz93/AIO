/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

eval("__webpack_require__(1);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL2FjY291bnQvbWFpbi5qcz8zYjRiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG1CQUFPLENBQUMsQ0FBaUIiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJy4vY29udHJvbGxlci5qcycpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vanMvYW5ndWxhci9hY2NvdW50L21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, exports) {

eval("angular.module('aio', ['platanus.keepValues', 'ngMaterial', 'ngRoute', 'ui.router'])\r\n        .factory('main', ['$http', '$window', function ($http, $window) {\r\n            return {\r\n              registerAccount: function (data, success, error) {\r\n                $http.post('create', data).success(success).error(error);\r\n              },\r\n              editAccount: function (data, idAccount, success, error) {\r\n                var route = $window.myBaseURL + \"account/edit/\";\r\n                $http.post(route + idAccount, data).success(success).error(error);\r\n              },\r\n              country: function (success, error) {\r\n                var route = $window.myBaseURL + \"country/country\";\r\n                $http.get(route).success(success).error(error);\r\n              },\r\n              state: function (data, success, error) {\r\n                var route = $window.myBaseURL + \"country/state/\";\r\n                $http.get(route + data).success(success).error(error);\r\n              },\r\n              city: function (data, success, error) {\r\n                var route = $window.myBaseURL + \"country/cities/\";\r\n                $http.get(route + data).success(success).error(error);\r\n              },\r\n              planbycountryaccount: function (idAllied, idCounty, success, error) {\r\n                $http.get($window.myBaseURL + 'account/planbycountryaccount/' + idAllied + '/' + idCounty).success(success).error(error);\r\n              },\r\n              getfooters: function (success, error) {\r\n                $http.get($window.myBaseURL + 'account/getfooters/').success(success).error(error);\r\n              },\r\n              userCreate: function (idAccount, data, success, error) {\r\n                $http.post($window.myBaseURL + 'account/usercreate/' + idAccount, data).success(success).error(error);\r\n              },\r\n              categories: function (success, error) {\r\n                $http.get($window.myBaseURL + 'api/accountcategory/getaccountcategories').success(success).error(error);\r\n              },\r\n              habeasData: function (success, idAccount, error){\r\n                $http.post($window.myBaseURL + '/api/accounting/gethabeasdata' + idAccount).success(success).error(error);\r\n              },\r\n              getAll: function (page, name, accountRegisterType, status, success, error) {\r\n                \r\n                var data = [page, name, accountRegisterType, status];\r\n                $http.post($window.myBaseURL + 'account/index', data).success(success).error(error);\r\n                \r\n              },\r\n              getservicesaccount: function (idAccount, success, error) {\r\n                $http.get($window.myBaseURL + 'account/getservicesaccount/' + idAccount).success(success).error(error);\r\n              },\r\n              rechargeAccount: function (data, success, error) {\r\n                $http.post($window.myBaseURL + 'account/rechargeaccount', data).success(success).error(error);\r\n              },\r\n              mta : function (data, success, error) {\r\n                $http.post($window.myBaseURL + 'mta/getallmta', data).success(success).error(error);\r\n              },\r\n              getMta : function (data, success, error){\r\n                $http.post($window.myBaseURL + 'mta/getidmtadcxmta/', data).success(success).error(error);\r\n              },\r\n              getrechargeservices: function (idServices, success, error) {\r\n                $http.get($window.myBaseURL + 'account/rechargeservices/' + idServices).success(success).error(error);\r\n              },\r\n            }\r\n          }])\r\n        .factory('notificationService', function () {\r\n          function error(message) {\r\n            slideOnTop(message, 4000, 'glyphicon glyphicon-remove-circle', 'danger');\r\n          }\r\n\r\n          function success(message) {\r\n            slideOnTop(message, 4000, 'glyphicon glyphicon-ok-circle', 'success');\r\n          }\r\n\r\n          function warning(message) {\r\n            slideOnTop(message, 4000, 'glyphicon glyphicon-exclamation-sign', 'warning');\r\n          }\r\n\r\n          function notice(message) {\r\n            slideOnTop(message, 4000, 'glyphicon glyphicon-exclamation-sign', 'notice');\r\n          }\r\n\r\n          function primary(message) {\r\n            slideOnTop(message, 4000, 'glyphicon glyphicon-exclamation-sign', 'primary');\r\n          }\r\n\r\n          return {\r\n            error: error,\r\n            success: success,\r\n            warning: warning,\r\n            notice: notice,\r\n            primary: primary\r\n          };\r\n        })\r\n        .controller('ctrlAccount', ['$rootScope', '$scope', '$http', 'main', '$window', 'notificationService', '$routeParams', '$location', function ($rootScope, $scope, $http, main, $window, notificationService, $routeParams, $location) {\r\n            var arrayParams = $location.absUrl().split('/');\r\n            var lastposition = arrayParams[arrayParams.length-1];\r\n            \r\n            if(parseInt(lastposition)){\r\n              $scope.namePage = 'edit';\r\n            }\r\n            \r\n            $scope.createUser = function (idAccount) {\r\n              main.userCreate(idAccount, $scope.data, function (res) {\r\n                var route = $window.myBaseURL + \"account/userlist/\" + res.idAccount;\r\n                $window.location.href = route;\r\n              }, function (err) {\r\n                notificationService.error(err[0]);\r\n                $rootScope.error = 'fail';\r\n              });\r\n            };\r\n            $scope.hourInit = (typeof hourInit == \"undefined\")? 7 : hourInit;\r\n            $scope.hourEnd = (typeof hourEnd == \"undefined\")? 18 : hourEnd;\r\n            $scope.rest = function (init){\r\n              if(init){\r\n                $scope.hourInit--;\r\n                $scope.changeHour($scope.hourInit,'hourInit');\r\n              }else{\r\n                $scope.hourEnd--;\r\n                $scope.changeHour($scope.hourEnd,'hourEnd');\r\n              }\r\n            }\r\n            $scope.sum = function (init){\r\n              if(init){\r\n                $scope.hourInit++;\r\n                $scope.changeHour($scope.hourInit,'hourInit');\r\n              }else{\r\n                $scope.hourEnd++;\r\n                $scope.changeHour($scope.hourEnd,'hourEnd');\r\n              }\r\n            }\r\n            $scope.changeHour = function(model,key){\r\n              if(model>24){\r\n                $scope[key] = 24;\r\n              }\r\n              if(model<1){\r\n                $scope[key] = 1;\r\n              }\r\n            }\r\n            $scope.status = true;\r\n            $scope.showDetail = false;\r\n            $scope.expirationDate = 0;\r\n            $scope.showMta = false;\r\n            //$scope.attachments = false;\r\n\r\n            if (typeof (category) != 'undefined') {\r\n              $scope.idAccountCategory = category;\r\n              var cate = jQuery.parseJSON(category);\r\n              $scope.expirationDate = cate.expirationDate;\r\n            }\r\n\r\n            if (typeof (paymentPlan) != 'undefined') {\r\n              $scope.paymentBefore = jQuery.parseJSON(paymentPlan);\r\n              $scope.payment = jQuery.parseJSON(paymentPlan);\r\n              $scope.idPaymentPlan = $scope.payment.idPaymentPlan;\r\n            }\r\n\r\n            if (typeof (idFooter) != 'undefined') {\r\n              $scope.idFooter = idFooter;\r\n            }\r\n\r\n            if (typeof (footerEditable) != 'undefined') {\r\n              $scope.footerEditable = footerEditable;\r\n            }\r\n\r\n            if (typeof (senderAllowed) != 'undefined') {\r\n              $scope.senderAllowed = senderAllowed;\r\n            }\r\n\r\n            if (typeof (expiryDate) != 'undefined') {\r\n              $scope.expiryDate = new Date(expiryDate);\r\n            }\r\n\r\n            if (typeof (status) != 'undefined') {\r\n              $scope.status = status == 1;\r\n            }\r\n\r\n            /*if (typeof (attachments) != 'undefined') {\r\n             $scope.attachments = attachments == 1;\r\n             }*/\r\n            \r\n            if (typeof (idCountry) != 'undefined') {\r\n              $scope.idCountry = idCountry;\r\n            }\r\n            \r\n            if (typeof (idState) != 'undefined') {\r\n              $scope.idState = idState;\r\n            }\r\n            \r\n            if (typeof (idCity) != 'undefined') {\r\n              $scope.idCity = idCity;\r\n            }\r\n\r\n            main.country(function (res) {\r\n              $scope.country = res;\r\n              if ($scope.idCountry) {\r\n                $scope.countrySelected = $scope.idCountry;\r\n                $scope.selectCountry($scope.countrySelected);\r\n              }\r\n            }, function (res) {\r\n              $rootScope.error = 'fail';\r\n            });\r\n\r\n            main.categories(function (res) {\r\n              $scope.categories = res;\r\n            }, function (res) {\r\n              $rootScope.error = 'fail';\r\n            });\r\n\r\n            main.getfooters(function (res) {\r\n              $scope.footers = res;\r\n            }, function (res) {\r\n              $rootScope.error = 'fail';\r\n            });\r\n\r\n            $scope.selectCountryUser = function () {\r\n              $scope.stateUser = {};\r\n              $scope.citiesUser = {};\r\n              main.state($scope.countrySelectedUser, function (res) {\r\n                $scope.stateUser = res;\r\n              }, function (res) {\r\n                $rootScope.error = 'fail';\r\n              });\r\n            };\r\n            $scope.selectStateUser = function () {\r\n              $scope.citiesUser = {};\r\n              main.city($scope.stateSelectedUser, function (res) {\r\n                $scope.citiesUser = res;\r\n              }, function (res) {\r\n                $rootScope.error = 'fail';\r\n              });\r\n            };\r\n\r\n            $scope.selectCountry = function (id) {\r\n              if (!id) {\r\n                id = $scope.countrySelected;\r\n                $scope.idCountry = \"\";\r\n                $scope.idState = \"\";\r\n                $scope.idCity = \"\";\r\n                $scope.stateSelected = \"\";\r\n               $scope.citySelected = \"\";\r\n              }\r\n              $scope.state = {};\r\n              $scope.cities = {};\r\n             $scope.showDetail = false;\r\n              if (typeof (paymentPlan) != 'undefined') {\r\n                var jsonPaymentPlan = jQuery.parseJSON(paymentPlan);\r\n//                $scope.paymentPlanSelected = paymentPlan;\r\n                $scope.paymentPlanSelected = jsonPaymentPlan.idPaymentPlan;\r\n             } else {\r\n                $scope.paymentPlanSelected = '';\r\n              }\r\n              main.state(id, function (res) {\r\n                $scope.state = res;\r\n                if (idState) {\r\n//                  $scope.stateSelected = idState;\r\n                  $scope.stateSelected = $scope.idState;\r\n                  $scope.selectState($scope.stateSelected);\r\n                }\r\n              }, function (res) {\r\n                $rootScope.error = 'fail';\r\n              });\r\n\r\n              main.planbycountryaccount(idAllied, id, function (res) {\r\n                $scope.paymentPlan = res;\r\n                if($scope.idPaymentPlan){\r\n                  $scope.paymentPlanSelected = $scope.idPaymentPlan;\r\n                  //$scope.descriptionPlan($scope.stateSelected);\r\n                  $scope.selectPlanSelected($scope.paymentPlanSelected);\r\n                }\r\n                \r\n              }, function (res) {\r\n                $rootScope.error = 'fail';\r\n              });\r\n            };\r\n            $scope.selectState = function (id) {\r\n              if (!id) {\r\n                id = $scope.stateSelected;\r\n                idState = \"\";\r\n                idCity = \"\";\r\n                $scope.citySelected = \"\";\r\n              }\r\n              $scope.cities = {};\r\n              main.city(id, function (res) {\r\n                $scope.cities = res;\r\n                if (idCity) {\r\n//                  $scope.citySelected = idCity;\r\n                  $scope.citySelected = $scope.idCity;\r\n                }\r\n              }, function (res) {\r\n                $rootScope.error = 'fail';\r\n              });\r\n            };\r\n\r\n            $scope.space = function () {\r\n              if (isFinite($scope.fileSpace) && $scope.fileSpace > 0) {\r\n                $scope.ss = $scope.spaceTotal - $scope.fileSpace;\r\n                if ($scope.fileSpace > $scope.spaceTotal) {\r\n                  $scope.fileSpace = $scope.spaceTotal;\r\n                  $scope.ss = 0;\r\n                }\r\n              } else {\r\n                $scope.fileSpace = 0;\r\n                $scope.ss = $scope.spaceTotal;\r\n              }\r\n            };\r\n\r\n            $scope.mailL = function () {\r\n              if (isFinite($scope.mailLimit) && $scope.mailLimit > 0) {\r\n                $scope.mail = $scope.mailTotal - $scope.mailLimit;\r\n                if ($scope.mailLimit > $scope.mailTotal) {\r\n                  $scope.mailLimit = $scope.mailTotal;\r\n                  $scope.mail = 0;\r\n                }\r\n              } else {\r\n                $scope.mailLimit = 0;\r\n                $scope.mail = $scope.mailTotal;\r\n              }\r\n            };\r\n            $scope.contactL = function () {\r\n              if (isFinite($scope.contactLimit) && $scope.contactLimit > 0) {\r\n                $scope.contact = $scope.contactTotal - $scope.contactLimit;\r\n                if ($scope.contactLimit > $scope.contactTotal) {\r\n                  $scope.contactLimit = $scope.contactTotal;\r\n                  $scope.contact = 0;\r\n                }\r\n              } else {\r\n                $scope.contactLimit = 0;\r\n                $scope.contact = $scope.contactTotal;\r\n              }\r\n            };\r\n            $scope.smsL = function () {\r\n              if (isFinite($scope.smsLimit) && $scope.smsLimit > 0) {\r\n                $scope.sms = $scope.smsTotal - $scope.smsLimit;\r\n                if ($scope.smsLimit > $scope.smsTotal) {\r\n                  $scope.smsLimit = $scope.smsTotal;\r\n                  $scope.sms = 0;\r\n                }\r\n              } else {\r\n                $scope.smsLimit = 0;\r\n                $scope.sms = $scope.smsTotal;\r\n              }\r\n            };\r\n            \r\n            $scope.smstwowayL = function () {\r\n              if (isFinite($scope.smstwowayLimit) && $scope.smstwowayLimit > 0) {\r\n                $scope.smstwoway = $scope.smstwowayTotal - $scope.smstwowayLimit;\r\n                if ($scope.smstwowayLimit > $scope.smstwowayTotal) {\r\n                  $scope.smstwowayLimit = $scope.$scope.smstwowayTotal;\r\n                  $scope.smstwoway = 0;\r\n                }\r\n              } else {\r\n                $scope.smstwowayLimit = 0;\r\n                $scope.smstwoway = $scope.smstwowayTotal;\r\n              }\r\n            };\r\n            \r\n            $scope.landingpageL = function () {\r\n              if (isFinite($scope.landingpageLimit) && $scope.landingpageLimit > 0) {\r\n                $scope.landingpage = $scope.landingpageTotal - $scope.landingpageLimit;\r\n                if ($scope.landingpageLimit > $scope.smstwowayTotal) {\r\n                  $scope.landingpageLimit = $scope.$scope.smstwowayTotal;\r\n                  $scope.landingpage = 0;\r\n                }\r\n              } else {\r\n                $scope.landingpageLimit = 0;\r\n                $scope.landingpage = $scope.landingpageTotal;\r\n              }\r\n            };\r\n            \r\n            \r\n            $scope.calculeDiskSpace = function () {\r\n              $scope.totalspace = diskSpaceAllied - $scope.plan.diskSpace;\r\n            };\r\n            \r\n            //For create users of the account\r\n            if(!(typeof diskSpaceAllied) == 'undefined'){\r\n              if($scope.totalspace==null||$scope.totalspace==''){\r\n                $scope.totalspace = diskSpaceAllied;\r\n              }\r\n            }\r\n\r\n            $scope.newAccount = function () {\r\n              var plan = jQuery.parseJSON($scope.paymentPlanSelected);\r\n              var category = jQuery.parseJSON($scope.idAccountCategory);\r\n              if ($scope.expirationDate == 1 && $scope.expiryDate == null) {\r\n                notificationService.error('El campo fecha de expiración es obligatorio');\r\n                return;\r\n              } else if ($scope.expirationDate == 0) {\r\n                $scope.expiryDate = null;\r\n              }\r\n              var data = {\r\n                /*datos de occount*/\r\n                name: $scope.name,\r\n                phone: $scope.phone,\r\n                address: $scope.address,\r\n                email: $scope.email,\r\n                nit: $scope.nit,\r\n                city: $scope.citySelected,\r\n                status: $scope.status,\r\n                idPaymentPlan: plan.idPaymentPlan,\r\n                senderAllowed: $scope.senderAllowed,\r\n                idFooter: $scope.idFooter,\r\n                footerEditable: $scope.footerEditable,\r\n                expiryDate: $scope.expiryDate,\r\n                tolerance: $scope.tolerance,\r\n                idAccountCategory: category.idAccountCategory,\r\n                //attachments: $scope.attachments,\r\n                url: $scope.urlWebSite,\r\n                hourInit: $scope.hourInit,\r\n                hourEnd: $scope.hourEnd,\r\n                habeasData: $scope.habeasdata,\r\n                mta: $scope.mtaSelected,\r\n                showMta: $scope.showMta\r\n              };\r\n\r\n              main.registerAccount(data, function (res) {\r\n                var route = $window.myBaseURL + \"account/usercreate/\" + res.idAccount;\r\n                $window.location.href = route;\r\n              }, function (res) {\r\n                slideOnTop(res[0], 3000, \"glyphicon glyphicon-remove-sign\", \"danger\");\r\n                $rootScope.error = 'fail';\r\n              });\r\n            };\r\n                        \r\n            /*$scope.selectPlanSelected = function (id) {\r\n              $scope.showMta = false;\r\n              if (!id) {\r\n                id = $scope.paymentPlanSelected;\r\n                angular.forEach($scope.paymentPlan, function (value, key) {\r\n                  if (value.idPaymentPlan == $scope.paymentPlanSelected) {\r\n                    angular.forEach(value.planxservice, function (obj, key) {\r\n                      if (obj.service == \"Email Marketing\") {\r\n                        $scope.showMta = true;\r\n                      }\r\n                    })\r\n                    $scope.payment = value;\r\n                  }\r\n                });\r\n                $scope.plan = $scope.payment;\r\n                $scope.showDetail = true;\r\n                $scope.idPaymentPlan = \"\";\r\n              } else {\r\n                angular.forEach($scope.payment.planxservice, function (obj, key) {\r\n                  if (obj.service == \"Email Marketing\") {\r\n                    $scope.showMta = true;\r\n                  }\r\n                });\r\n              }\r\n            }*/\r\n            \r\n            $scope.selectPlanSelected = function (id) {\r\n              $scope.showMta = false;\r\n              if (!id) {\r\n                id = $scope.paymentPlanSelected;\r\n              }\r\n              angular.forEach($scope.paymentPlan, function (value, key) {\r\n                if (value.idPaymentPlan == $scope.paymentPlanSelected) {\r\n                  angular.forEach(value.planxservice, function (obj, key) {\r\n                    if (obj.service == \"Email Marketing\") {\r\n                      $scope.showMta = true;\r\n                    }\r\n                  })\r\n                  $scope.payment = value;\r\n                }\r\n              });\r\n              $scope.plan = $scope.payment;\r\n              $scope.showDetail = true;\r\n              $scope.idPaymentPlan = \"\";\r\n            }\r\n            \r\n            /*\r\n             * For the view Create\r\n             * @return {undefined}\r\n             */\r\n            $scope.descriptionPlan = function () {\r\n              $scope.showMta = false;\r\n              $scope.plan = jQuery.parseJSON($scope.paymentPlanSelected);\r\n              $scope.showDetail = true;\r\n              \r\n              angular.forEach($scope.plan.planxservice, function (value, key) {\r\n                if(value.service==\"Email Marketing\"){\r\n                  $scope.showMta = true;\r\n                }\r\n              });\r\n            };\r\n\r\n            $scope.showExpiryDate = function () {\r\n              var category = jQuery.parseJSON($scope.idAccountCategory);\r\n              $scope.expirationDate = category.expirationDate;\r\n            };\r\n\r\n            $scope.editAccount = function (idAccount, validateConfirm) {\r\n\r\n              var plan = jQuery.parseJSON($scope.paymentPlanSelected);\r\n              var category = jQuery.parseJSON($scope.idAccountCategory);\r\n              if ($scope.expirationDate == 1 && $scope.expiryDate == null) {\r\n                notificationService.error('El campo fecha de expiración es obligatorio');\r\n                return;\r\n              } else if ($scope.expirationDate == 0) {\r\n                $scope.expiryDate = null;\r\n              }\r\n              var data = {\r\n                /*datos de account*/\r\n                name: $scope.name,\r\n                phone: $scope.phone,\r\n                address: $scope.address,\r\n                email: $scope.email,\r\n                nit: $scope.nit,\r\n//                idPaymentPlan: plan.idPaymentPlan,\r\n                idPaymentPlan: $scope.paymentPlanSelected,\r\n                city: $scope.citySelected,\r\n                status: $scope.status,\r\n                senderAllowed: $scope.senderAllowed,\r\n                idFooter: $scope.idFooter,\r\n                footerEditable: $scope.footerEditable,\r\n                expiryDate: $scope.expiryDate,\r\n                tolerancePeriod: $scope.tolerancePeriod,\r\n                idAccountCategory: category.idAccountCategory,\r\n                //attachments: $scope.attachments,\r\n                validateConfirm: validateConfirm,\r\n                url: $scope.urlWebSite,\r\n                hourInit: $scope.hourInit,\r\n                hourEnd: $scope.hourEnd,\r\n                habeasData: $scope.habeasdata,\r\n                mta: $scope.mtaSelected,\r\n                showMta: $scope.showMta\r\n              };\r\n\r\n              if (validateConfirm == true) {\r\n                $scope.validateConfirm = true;\r\n              }\r\n\r\n              main.editAccount(data, idAccount, function (res) {\r\n                var route = $window.myBaseURL + \"account/index\";\r\n                $window.location.href = route;\r\n              }, function (res) {\r\n                if (res.code == 403) {\r\n                  slideOnTop(res[0], 3000, \"glyphicon glyphicon-remove-sign\", \"danger\");\r\n                  $scope.validateConfirm = false;\r\n                  $rootScope.error = 'fail';\r\n                } else if (res.code == 409) {\r\n                  $scope.errorEditAccount = res.message;\r\n                  openModalConfirm();\r\n                }\r\n              });\r\n            }\r\n           \r\n            main.mta($scope.data, function (res) {\r\n              $scope.mta = res;\r\n              if ($scope.idMta) {\r\n                $scope.mtaSelected = $scope.idMta;\r\n                $scope.selectMta($scope.mtaSelected);\r\n              }\r\n            }, function (err) {\r\n              notificationService.error(err[0]);\r\n              $rootScope.error = 'fail';\r\n            });\r\n              \r\n            $scope.selectMta = function (id) {\r\n              if (!id) {\r\n                id = $scope.mtaSelected;\r\n                $scope.idMta = \"0\";\r\n              }\r\n            }\r\n            \r\n            if ($scope.namePage == 'edit') {\r\n              var idAccount = lastposition;\r\n              main.getMta(idAccount, function (res) {\r\n                if(res!=null&&res!=''){\r\n                  $scope.idMta = res[0]['idMta'];\r\n                  $scope.namePage = '';\r\n                }\r\n                else{\r\n                  $scope.idMta = '0';\r\n                  $scope.namePage = '';\r\n                }\r\n                $scope.mtaSelected = $scope.idMta;\r\n                $scope.selectMta($scope.mtaSelected);\r\n                /*$scope.stateSelected = $scope.idState;\r\n                $scope.selectState($scope.stateSelected);*/\r\n              }, function (res) {\r\n                $rootScope.error = 'fail';\r\n              });\r\n            }\r\n            \r\n          }])\r\n        .controller('ctrlAccountlist', ['$scope', '$http', 'main', '$q', 'notificationService', function ($scope, $http, main, $q, notificationService) {\r\n            $scope.initial = 0;\r\n            $scope.page = 1;\r\n            $scope.idAccount;\r\n            $scope.name = \"\";\r\n            $scope.accountRegisterType;\r\n            $scope.status;\r\n\r\n            $scope.getAll = function (name) {\r\n              if (name) {\r\n                $scope.name = name;\r\n              }\r\n              main.getAll($scope.initial, $scope.name, $scope.accountRegisterType, $scope.status, function (res) {\r\n                $scope.accounts = res.accounts;\r\n                $scope.configAllied = res.configAllied;\r\n\r\n              }, function (res) {\r\n                $rootScope.error = 'fail';\r\n              });\r\n            };\r\n            //FUNCION PARA TAER LOS REGISTROS POR TIPO DE ORIGEN\r\n            $scope.typeFunc = function () {\r\n              if ($scope.accountRegisterType.length > 0) {\r\n                $scope.initial = 0;\r\n                $scope.getAll();\r\n              }\r\n            };\r\n            //FUNCION PARA TRAER LOS REGISTROS POR ESTADO DE LA CUENTA\r\n            $scope.statusFunc = function () {\r\n              if ($scope.status.length > 0) {\r\n                $scope.initial = 0;\r\n                $scope.getAll();\r\n              }\r\n            };\r\n\r\n            ((contactTotalAllied >= 0) ? $scope.contactTotalAllied = contactTotalAllied : \"\");\r\n            ((smsTotalAllied >= 0) ? $scope.smsTotalAllied = smsTotalAllied : \"\");\r\n            ((smstwowayTotalAllied >= 0) ? $scope.smstwowayTotalAllied = smstwowayTotalAllied : \"\");\r\n            ((landingpageTotalAllied >= 0) ? $scope.landingpageTotalAllied = landingpageTotalAllied : \"\");            \r\n            ((accountingModeAllied >= 0) ? $scope.accountingModeAllied = accountingModeAllied : \"\");\r\n\r\n            $scope.restartPagination = function () {\r\n              $scope.initial = 0;\r\n              $scope.page = 1;\r\n            };\r\n\r\n            $scope.listMailTemplateAccount = function (data) {\r\n              $scope.idAccount = data;\r\n              $http.get(fullUrlBase + \"api/mailtemplate/listmailtempbyacco/\" + data + \"/\" + $scope.initial)\r\n                      .success(function (data) {\r\n                        $scope.list = data;\r\n                      })\r\n                      .error(function (data) {\r\n                        console.log(data);\r\n                        //notificationService.error(data.message);\r\n                      });\r\n              $(\"#myModal\").modal('show');\r\n            };\r\n\r\n            $scope.rechargeService = function (idAccount) {\r\n              $scope.idAccount = idAccount;\r\n              $scope.showsms = false;\r\n              $scope.showsmstwoway = false;\r\n              $scope.showlandingpage = false;\r\n              $scope.showemail = false;\r\n              $scope.smsLimit = '';\r\n              $scope.smstwowayLimit = '';\r\n              $scope.mailLimit = '';\r\n              $scope.services = [];\r\n              main.getservicesaccount(idAccount, function (res) {\r\n                $scope.result = res;\r\n                $scope.limitSmsAccount = res.limitSmsAccount;\r\n                $scope.limitSmstwowayAccount = res.limitSmstwowayAccount;\r\n                $scope.limitContactAccount = res.limitContactAccount;\r\n                $scope.limitLandingpageAccount = res.limitLandingpageAccount;\r\n              }, function (error) {\r\n                $rootScope.error = 'fail';\r\n              });\r\n\r\n              $(\"#modalRecharge\").modal('show');\r\n            };\r\n\r\n            $scope.showsms = false;\r\n            $scope.showsmstwoway = false;\r\n            $scope.showlandingpage = false;\r\n            $scope.showemail = false;\r\n\r\n            $scope.selectedServices = function () {\r\n              $scope.showsms = false;\r\n              $scope.showsmstwoway = false;\r\n              $scope.showlandingpage = false;              \r\n              $scope.showemail = false;\r\n              for (var i = 0; i < $scope.services.length; i++) {\r\n                if ($scope.services[i] == 1) {\r\n                  $scope.showsms = true;\r\n                }\r\n                if ($scope.services[i] == 2) {\r\n                  $scope.showemail = true;\r\n                }\r\n                if ($scope.services[i] == 7) {\r\n                  $scope.showsmstwoway = true;\r\n                }\r\n                if ($scope.services[i] == 8) {\r\n                  $scope.showlandingpage = true;\r\n                }\r\n              }\r\n            };\r\n\r\n            $scope.rechargeApply = function () {\r\n              var data = {\r\n                smsLimit: $scope.smsLimit,\r\n                smstwowayLimit: $scope.smstwowayLimit,\r\n                landingpageLimit: $scope.landingpageLimit,\r\n                mailLimit: $scope.mailLimit,\r\n                idAccount: $scope.idAccount,\r\n                services: $scope.services\r\n              };\r\n\r\n              main.rechargeAccount(data, function (res) {\r\n                $scope.smsTotalAllied = $scope.smsTotalAllied - $scope.smsLimit;\r\n                $scope.smstwowayTotalAllied = $scope.smstwowayTotalAllied - $scope.smstwowayLimit;\r\n                $scope.landingpageTotalAllied = $scope.landingpageTotalAllied - $scope.landingpageLimit;\r\n                $scope.contactTotalAllied = $scope.contactTotalAllied - $scope.mailLimit;\r\n                notificationService.success(res[0]);\r\n              }, function (error) {\r\n                $rootScope.error = 'fail';\r\n              });\r\n\r\n              $(\"#modalRecharge\").modal('hide');\r\n            };\r\n\r\n            $scope.forward = function () {\r\n              $scope.initial += 1;\r\n              $scope.page += 1;\r\n              $scope.getAll();\r\n            };\r\n            $scope.fastforward = function () {\r\n              $scope.initial = ($scope.accounts.total_pages - 1);\r\n              $scope.page = $scope.accounts.total_pages;\r\n              $scope.getAll();\r\n            };\r\n            $scope.backward = function () {\r\n              $scope.initial -= 1;\r\n              $scope.page -= 1;\r\n              $scope.getAll();\r\n            };\r\n            $scope.fastbackward = function () {\r\n              $scope.initial = 0;\r\n              $scope.page = 1;\r\n              $scope.getAll();\r\n            };\r\n\r\n            $scope.getAll();\r\n          }])\r\n        .controller('ctrlRecharges', ['$scope', '$http', 'main', '$q', 'notificationService', function ($scope, $http, main, $q, notificationService) {\r\n          $scope.account = {};\r\n          $scope.history = [];\r\n          $scope.listRangesprices = [];\r\n          $scope.quantity = null;\r\n          $scope.objectRangePrices = false;\r\n          $scope.is_services = '';\r\n\r\n          $scope.data = \"\";\r\n\r\n          $scope.rechargeService = function (idServices) {\r\n            main.getrechargeservices(idServices, function (res) {\r\n              $scope.account = res.account;\r\n              $scope.history = res.history;\r\n              $scope.services = res.services;\r\n              $scope.is_services = res.services.idServices == 1 ? true : false;\r\n              $scope.listRangesprices = res.rangesprices;\r\n            }, function (error) {\r\n              $rootScope.error = 'fail';\r\n            });\r\n          };\r\n          $scope.rechargeService(idServices);\r\n\r\n          $scope.ngChange = function (value) {\r\n            recharges = value;\r\n            if (value != null) {\r\n              idRangesPrices = value.idRangesPrices;\r\n              $scope.objectRangePrices = true;\r\n            } else {\r\n              $scope.objectRangePrices = false;\r\n            }\r\n          };\r\n\r\n        }]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9hbmd1bGFyL2FjY291bnQvY29udHJvbGxlci5qcz8wNWRjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBOztBQUVBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7O0FBRWQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxlQUFlO0FBQ2Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsZUFBZTs7QUFFZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlO0FBQ2Y7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsZUFBZTtBQUNmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RCxlQUFlO0FBQ2Y7QUFDQSxlQUFlO0FBQ2Y7O0FBRUEsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGVBQWU7QUFDZjtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMEc7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsZUFBZTs7QUFFZjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDZDO0FBQ0E7QUFDQSw2QkFBNkIsNEJBQTRCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGVBQWU7O0FBRWY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUEsU0FBUyIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ2FpbycsIFsncGxhdGFudXMua2VlcFZhbHVlcycsICduZ01hdGVyaWFsJywgJ25nUm91dGUnLCAndWkucm91dGVyJ10pXHJcbiAgICAgICAgLmZhY3RvcnkoJ21haW4nLCBbJyRodHRwJywgJyR3aW5kb3cnLCBmdW5jdGlvbiAoJGh0dHAsICR3aW5kb3cpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICByZWdpc3RlckFjY291bnQ6IGZ1bmN0aW9uIChkYXRhLCBzdWNjZXNzLCBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnY3JlYXRlJywgZGF0YSkuc3VjY2VzcyhzdWNjZXNzKS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBlZGl0QWNjb3VudDogZnVuY3Rpb24gKGRhdGEsIGlkQWNjb3VudCwgc3VjY2VzcywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHZhciByb3V0ZSA9ICR3aW5kb3cubXlCYXNlVVJMICsgXCJhY2NvdW50L2VkaXQvXCI7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KHJvdXRlICsgaWRBY2NvdW50LCBkYXRhKS5zdWNjZXNzKHN1Y2Nlc3MpLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGNvdW50cnk6IGZ1bmN0aW9uIChzdWNjZXNzLCBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJvdXRlID0gJHdpbmRvdy5teUJhc2VVUkwgKyBcImNvdW50cnkvY291bnRyeVwiO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KHJvdXRlKS5zdWNjZXNzKHN1Y2Nlc3MpLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHN0YXRlOiBmdW5jdGlvbiAoZGF0YSwgc3VjY2VzcywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHZhciByb3V0ZSA9ICR3aW5kb3cubXlCYXNlVVJMICsgXCJjb3VudHJ5L3N0YXRlL1wiO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KHJvdXRlICsgZGF0YSkuc3VjY2VzcyhzdWNjZXNzKS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBjaXR5OiBmdW5jdGlvbiAoZGF0YSwgc3VjY2VzcywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHZhciByb3V0ZSA9ICR3aW5kb3cubXlCYXNlVVJMICsgXCJjb3VudHJ5L2NpdGllcy9cIjtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldChyb3V0ZSArIGRhdGEpLnN1Y2Nlc3Moc3VjY2VzcykuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgcGxhbmJ5Y291bnRyeWFjY291bnQ6IGZ1bmN0aW9uIChpZEFsbGllZCwgaWRDb3VudHksIHN1Y2Nlc3MsIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJHdpbmRvdy5teUJhc2VVUkwgKyAnYWNjb3VudC9wbGFuYnljb3VudHJ5YWNjb3VudC8nICsgaWRBbGxpZWQgKyAnLycgKyBpZENvdW50eSkuc3VjY2VzcyhzdWNjZXNzKS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBnZXRmb290ZXJzOiBmdW5jdGlvbiAoc3VjY2VzcywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgkd2luZG93Lm15QmFzZVVSTCArICdhY2NvdW50L2dldGZvb3RlcnMvJykuc3VjY2VzcyhzdWNjZXNzKS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB1c2VyQ3JlYXRlOiBmdW5jdGlvbiAoaWRBY2NvdW50LCBkYXRhLCBzdWNjZXNzLCBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgkd2luZG93Lm15QmFzZVVSTCArICdhY2NvdW50L3VzZXJjcmVhdGUvJyArIGlkQWNjb3VudCwgZGF0YSkuc3VjY2VzcyhzdWNjZXNzKS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBjYXRlZ29yaWVzOiBmdW5jdGlvbiAoc3VjY2VzcywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgkd2luZG93Lm15QmFzZVVSTCArICdhcGkvYWNjb3VudGNhdGVnb3J5L2dldGFjY291bnRjYXRlZ29yaWVzJykuc3VjY2VzcyhzdWNjZXNzKS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBoYWJlYXNEYXRhOiBmdW5jdGlvbiAoc3VjY2VzcywgaWRBY2NvdW50LCBlcnJvcil7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCR3aW5kb3cubXlCYXNlVVJMICsgJy9hcGkvYWNjb3VudGluZy9nZXRoYWJlYXNkYXRhJyArIGlkQWNjb3VudCkuc3VjY2VzcyhzdWNjZXNzKS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBnZXRBbGw6IGZ1bmN0aW9uIChwYWdlLCBuYW1lLCBhY2NvdW50UmVnaXN0ZXJUeXBlLCBzdGF0dXMsIHN1Y2Nlc3MsIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW3BhZ2UsIG5hbWUsIGFjY291bnRSZWdpc3RlclR5cGUsIHN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCR3aW5kb3cubXlCYXNlVVJMICsgJ2FjY291bnQvaW5kZXgnLCBkYXRhKS5zdWNjZXNzKHN1Y2Nlc3MpLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgZ2V0c2VydmljZXNhY2NvdW50OiBmdW5jdGlvbiAoaWRBY2NvdW50LCBzdWNjZXNzLCBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCR3aW5kb3cubXlCYXNlVVJMICsgJ2FjY291bnQvZ2V0c2VydmljZXNhY2NvdW50LycgKyBpZEFjY291bnQpLnN1Y2Nlc3Moc3VjY2VzcykuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgcmVjaGFyZ2VBY2NvdW50OiBmdW5jdGlvbiAoZGF0YSwgc3VjY2VzcywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJHdpbmRvdy5teUJhc2VVUkwgKyAnYWNjb3VudC9yZWNoYXJnZWFjY291bnQnLCBkYXRhKS5zdWNjZXNzKHN1Y2Nlc3MpLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIG10YSA6IGZ1bmN0aW9uIChkYXRhLCBzdWNjZXNzLCBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgkd2luZG93Lm15QmFzZVVSTCArICdtdGEvZ2V0YWxsbXRhJywgZGF0YSkuc3VjY2VzcyhzdWNjZXNzKS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBnZXRNdGEgOiBmdW5jdGlvbiAoZGF0YSwgc3VjY2VzcywgZXJyb3Ipe1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgkd2luZG93Lm15QmFzZVVSTCArICdtdGEvZ2V0aWRtdGFkY3htdGEvJywgZGF0YSkuc3VjY2VzcyhzdWNjZXNzKS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBnZXRyZWNoYXJnZXNlcnZpY2VzOiBmdW5jdGlvbiAoaWRTZXJ2aWNlcywgc3VjY2VzcywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgkd2luZG93Lm15QmFzZVVSTCArICdhY2NvdW50L3JlY2hhcmdlc2VydmljZXMvJyArIGlkU2VydmljZXMpLnN1Y2Nlc3Moc3VjY2VzcykuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1dKVxyXG4gICAgICAgIC5mYWN0b3J5KCdub3RpZmljYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgZnVuY3Rpb24gZXJyb3IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICBzbGlkZU9uVG9wKG1lc3NhZ2UsIDQwMDAsICdnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZS1jaXJjbGUnLCAnZGFuZ2VyJyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHNsaWRlT25Ub3AobWVzc2FnZSwgNDAwMCwgJ2dseXBoaWNvbiBnbHlwaGljb24tb2stY2lyY2xlJywgJ3N1Y2Nlc3MnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgc2xpZGVPblRvcChtZXNzYWdlLCA0MDAwLCAnZ2x5cGhpY29uIGdseXBoaWNvbi1leGNsYW1hdGlvbi1zaWduJywgJ3dhcm5pbmcnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBub3RpY2UobWVzc2FnZSkge1xyXG4gICAgICAgICAgICBzbGlkZU9uVG9wKG1lc3NhZ2UsIDQwMDAsICdnbHlwaGljb24gZ2x5cGhpY29uLWV4Y2xhbWF0aW9uLXNpZ24nLCAnbm90aWNlJyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gcHJpbWFyeShtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHNsaWRlT25Ub3AobWVzc2FnZSwgNDAwMCwgJ2dseXBoaWNvbiBnbHlwaGljb24tZXhjbGFtYXRpb24tc2lnbicsICdwcmltYXJ5Jyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzLFxyXG4gICAgICAgICAgICB3YXJuaW5nOiB3YXJuaW5nLFxyXG4gICAgICAgICAgICBub3RpY2U6IG5vdGljZSxcclxuICAgICAgICAgICAgcHJpbWFyeTogcHJpbWFyeVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdjdHJsQWNjb3VudCcsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJGh0dHAnLCAnbWFpbicsICckd2luZG93JywgJ25vdGlmaWNhdGlvblNlcnZpY2UnLCAnJHJvdXRlUGFyYW1zJywgJyRsb2NhdGlvbicsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc2NvcGUsICRodHRwLCBtYWluLCAkd2luZG93LCBub3RpZmljYXRpb25TZXJ2aWNlLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgYXJyYXlQYXJhbXMgPSAkbG9jYXRpb24uYWJzVXJsKCkuc3BsaXQoJy8nKTtcclxuICAgICAgICAgICAgdmFyIGxhc3Rwb3NpdGlvbiA9IGFycmF5UGFyYW1zW2FycmF5UGFyYW1zLmxlbmd0aC0xXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKHBhcnNlSW50KGxhc3Rwb3NpdGlvbikpe1xyXG4gICAgICAgICAgICAgICRzY29wZS5uYW1lUGFnZSA9ICdlZGl0JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJHNjb3BlLmNyZWF0ZVVzZXIgPSBmdW5jdGlvbiAoaWRBY2NvdW50KSB7XHJcbiAgICAgICAgICAgICAgbWFpbi51c2VyQ3JlYXRlKGlkQWNjb3VudCwgJHNjb3BlLmRhdGEsIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciByb3V0ZSA9ICR3aW5kb3cubXlCYXNlVVJMICsgXCJhY2NvdW50L3VzZXJsaXN0L1wiICsgcmVzLmlkQWNjb3VudDtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJvdXRlO1xyXG4gICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZXJyWzBdKTtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZXJyb3IgPSAnZmFpbCc7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICRzY29wZS5ob3VySW5pdCA9ICh0eXBlb2YgaG91ckluaXQgPT0gXCJ1bmRlZmluZWRcIik/IDcgOiBob3VySW5pdDtcclxuICAgICAgICAgICAgJHNjb3BlLmhvdXJFbmQgPSAodHlwZW9mIGhvdXJFbmQgPT0gXCJ1bmRlZmluZWRcIik/IDE4IDogaG91ckVuZDtcclxuICAgICAgICAgICAgJHNjb3BlLnJlc3QgPSBmdW5jdGlvbiAoaW5pdCl7XHJcbiAgICAgICAgICAgICAgaWYoaW5pdCl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaG91ckluaXQtLTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jaGFuZ2VIb3VyKCRzY29wZS5ob3VySW5pdCwnaG91ckluaXQnKTtcclxuICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5ob3VyRW5kLS07XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlSG91cigkc2NvcGUuaG91ckVuZCwnaG91ckVuZCcpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuc3VtID0gZnVuY3Rpb24gKGluaXQpe1xyXG4gICAgICAgICAgICAgIGlmKGluaXQpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmhvdXJJbml0Kys7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlSG91cigkc2NvcGUuaG91ckluaXQsJ2hvdXJJbml0Jyk7XHJcbiAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaG91ckVuZCsrO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZUhvdXIoJHNjb3BlLmhvdXJFbmQsJ2hvdXJFbmQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNoYW5nZUhvdXIgPSBmdW5jdGlvbihtb2RlbCxrZXkpe1xyXG4gICAgICAgICAgICAgIGlmKG1vZGVsPjI0KXtcclxuICAgICAgICAgICAgICAgICRzY29wZVtrZXldID0gMjQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmKG1vZGVsPDEpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlW2tleV0gPSAxO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLnNob3dEZXRhaWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLmV4cGlyYXRpb25EYXRlID0gMDtcclxuICAgICAgICAgICAgJHNjb3BlLnNob3dNdGEgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8kc2NvcGUuYXR0YWNobWVudHMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGNhdGVnb3J5KSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICRzY29wZS5pZEFjY291bnRDYXRlZ29yeSA9IGNhdGVnb3J5O1xyXG4gICAgICAgICAgICAgIHZhciBjYXRlID0galF1ZXJ5LnBhcnNlSlNPTihjYXRlZ29yeSk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmV4cGlyYXRpb25EYXRlID0gY2F0ZS5leHBpcmF0aW9uRGF0ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAocGF5bWVudFBsYW4pICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnBheW1lbnRCZWZvcmUgPSBqUXVlcnkucGFyc2VKU09OKHBheW1lbnRQbGFuKTtcclxuICAgICAgICAgICAgICAkc2NvcGUucGF5bWVudCA9IGpRdWVyeS5wYXJzZUpTT04ocGF5bWVudFBsYW4pO1xyXG4gICAgICAgICAgICAgICRzY29wZS5pZFBheW1lbnRQbGFuID0gJHNjb3BlLnBheW1lbnQuaWRQYXltZW50UGxhbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoaWRGb290ZXIpICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmlkRm9vdGVyID0gaWRGb290ZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGZvb3RlckVkaXRhYmxlKSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICRzY29wZS5mb290ZXJFZGl0YWJsZSA9IGZvb3RlckVkaXRhYmxlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChzZW5kZXJBbGxvd2VkKSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICRzY29wZS5zZW5kZXJBbGxvd2VkID0gc2VuZGVyQWxsb3dlZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZXhwaXJ5RGF0ZSkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuZXhwaXJ5RGF0ZSA9IG5ldyBEYXRlKGV4cGlyeURhdGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChzdGF0dXMpICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IHN0YXR1cyA9PSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKmlmICh0eXBlb2YgKGF0dGFjaG1lbnRzKSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgJHNjb3BlLmF0dGFjaG1lbnRzID0gYXR0YWNobWVudHMgPT0gMTtcclxuICAgICAgICAgICAgIH0qL1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoaWRDb3VudHJ5KSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICRzY29wZS5pZENvdW50cnkgPSBpZENvdW50cnk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGlkU3RhdGUpICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmlkU3RhdGUgPSBpZFN0YXRlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChpZENpdHkpICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmlkQ2l0eSA9IGlkQ2l0eTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbWFpbi5jb3VudHJ5KGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuY291bnRyeSA9IHJlcztcclxuICAgICAgICAgICAgICBpZiAoJHNjb3BlLmlkQ291bnRyeSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNvdW50cnlTZWxlY3RlZCA9ICRzY29wZS5pZENvdW50cnk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0Q291bnRyeSgkc2NvcGUuY291bnRyeVNlbGVjdGVkKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAkcm9vdFNjb3BlLmVycm9yID0gJ2ZhaWwnO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIG1haW4uY2F0ZWdvcmllcyhmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSByZXM7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAkcm9vdFNjb3BlLmVycm9yID0gJ2ZhaWwnO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIG1haW4uZ2V0Zm9vdGVycyhmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmZvb3RlcnMgPSByZXM7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAkcm9vdFNjb3BlLmVycm9yID0gJ2ZhaWwnO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RDb3VudHJ5VXNlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuc3RhdGVVc2VyID0ge307XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNpdGllc1VzZXIgPSB7fTtcclxuICAgICAgICAgICAgICBtYWluLnN0YXRlKCRzY29wZS5jb3VudHJ5U2VsZWN0ZWRVc2VyLCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdGVVc2VyID0gcmVzO1xyXG4gICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZXJyb3IgPSAnZmFpbCc7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RTdGF0ZVVzZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNpdGllc1VzZXIgPSB7fTtcclxuICAgICAgICAgICAgICBtYWluLmNpdHkoJHNjb3BlLnN0YXRlU2VsZWN0ZWRVc2VyLCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2l0aWVzVXNlciA9IHJlcztcclxuICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmVycm9yID0gJ2ZhaWwnO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdENvdW50cnkgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgICBpZiAoIWlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZCA9ICRzY29wZS5jb3VudHJ5U2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaWRDb3VudHJ5ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pZFN0YXRlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pZENpdHkgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0YXRlU2VsZWN0ZWQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAkc2NvcGUuY2l0eVNlbGVjdGVkID0gXCJcIjtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnN0YXRlID0ge307XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNpdGllcyA9IHt9O1xyXG4gICAgICAgICAgICAgJHNjb3BlLnNob3dEZXRhaWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBpZiAodHlwZW9mIChwYXltZW50UGxhbikgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHZhciBqc29uUGF5bWVudFBsYW4gPSBqUXVlcnkucGFyc2VKU09OKHBheW1lbnRQbGFuKTtcclxuLy8gICAgICAgICAgICAgICAgJHNjb3BlLnBheW1lbnRQbGFuU2VsZWN0ZWQgPSBwYXltZW50UGxhbjtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wYXltZW50UGxhblNlbGVjdGVkID0ganNvblBheW1lbnRQbGFuLmlkUGF5bWVudFBsYW47XHJcbiAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBheW1lbnRQbGFuU2VsZWN0ZWQgPSAnJztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgbWFpbi5zdGF0ZShpZCwgZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0YXRlID0gcmVzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlkU3RhdGUpIHtcclxuLy8gICAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdGVTZWxlY3RlZCA9IGlkU3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5zdGF0ZVNlbGVjdGVkID0gJHNjb3BlLmlkU3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RTdGF0ZSgkc2NvcGUuc3RhdGVTZWxlY3RlZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5lcnJvciA9ICdmYWlsJztcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgbWFpbi5wbGFuYnljb3VudHJ5YWNjb3VudChpZEFsbGllZCwgaWQsIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wYXltZW50UGxhbiA9IHJlcztcclxuICAgICAgICAgICAgICAgIGlmKCRzY29wZS5pZFBheW1lbnRQbGFuKXtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnBheW1lbnRQbGFuU2VsZWN0ZWQgPSAkc2NvcGUuaWRQYXltZW50UGxhbjtcclxuICAgICAgICAgICAgICAgICAgLy8kc2NvcGUuZGVzY3JpcHRpb25QbGFuKCRzY29wZS5zdGF0ZVNlbGVjdGVkKTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdFBsYW5TZWxlY3RlZCgkc2NvcGUucGF5bWVudFBsYW5TZWxlY3RlZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmVycm9yID0gJ2ZhaWwnO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0U3RhdGUgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgICBpZiAoIWlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZCA9ICRzY29wZS5zdGF0ZVNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgaWRTdGF0ZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBpZENpdHkgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNpdHlTZWxlY3RlZCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICRzY29wZS5jaXRpZXMgPSB7fTtcclxuICAgICAgICAgICAgICBtYWluLmNpdHkoaWQsIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jaXRpZXMgPSByZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWRDaXR5KSB7XHJcbi8vICAgICAgICAgICAgICAgICAgJHNjb3BlLmNpdHlTZWxlY3RlZCA9IGlkQ2l0eTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNpdHlTZWxlY3RlZCA9ICRzY29wZS5pZENpdHk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5lcnJvciA9ICdmYWlsJztcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5zcGFjZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICBpZiAoaXNGaW5pdGUoJHNjb3BlLmZpbGVTcGFjZSkgJiYgJHNjb3BlLmZpbGVTcGFjZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zcyA9ICRzY29wZS5zcGFjZVRvdGFsIC0gJHNjb3BlLmZpbGVTcGFjZTtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZmlsZVNwYWNlID4gJHNjb3BlLnNwYWNlVG90YWwpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmZpbGVTcGFjZSA9ICRzY29wZS5zcGFjZVRvdGFsO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuc3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsZVNwYWNlID0gMDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zcyA9ICRzY29wZS5zcGFjZVRvdGFsO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5tYWlsTCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICBpZiAoaXNGaW5pdGUoJHNjb3BlLm1haWxMaW1pdCkgJiYgJHNjb3BlLm1haWxMaW1pdCA+IDApIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5tYWlsID0gJHNjb3BlLm1haWxUb3RhbCAtICRzY29wZS5tYWlsTGltaXQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm1haWxMaW1pdCA+ICRzY29wZS5tYWlsVG90YWwpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLm1haWxMaW1pdCA9ICRzY29wZS5tYWlsVG90YWw7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5tYWlsID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm1haWxMaW1pdCA9IDA7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubWFpbCA9ICRzY29wZS5tYWlsVG90YWw7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkc2NvcGUuY29udGFjdEwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGlzRmluaXRlKCRzY29wZS5jb250YWN0TGltaXQpICYmICRzY29wZS5jb250YWN0TGltaXQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29udGFjdCA9ICRzY29wZS5jb250YWN0VG90YWwgLSAkc2NvcGUuY29udGFjdExpbWl0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jb250YWN0TGltaXQgPiAkc2NvcGUuY29udGFjdFRvdGFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jb250YWN0TGltaXQgPSAkc2NvcGUuY29udGFjdFRvdGFsO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY29udGFjdCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jb250YWN0TGltaXQgPSAwO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRhY3QgPSAkc2NvcGUuY29udGFjdFRvdGFsO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgJHNjb3BlLnNtc0wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGlzRmluaXRlKCRzY29wZS5zbXNMaW1pdCkgJiYgJHNjb3BlLnNtc0xpbWl0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNtcyA9ICRzY29wZS5zbXNUb3RhbCAtICRzY29wZS5zbXNMaW1pdDtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuc21zTGltaXQgPiAkc2NvcGUuc21zVG90YWwpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnNtc0xpbWl0ID0gJHNjb3BlLnNtc1RvdGFsO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuc21zID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNtc0xpbWl0ID0gMDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zbXMgPSAkc2NvcGUuc21zVG90YWw7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJHNjb3BlLnNtc3R3b3dheUwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGlzRmluaXRlKCRzY29wZS5zbXN0d293YXlMaW1pdCkgJiYgJHNjb3BlLnNtc3R3b3dheUxpbWl0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNtc3R3b3dheSA9ICRzY29wZS5zbXN0d293YXlUb3RhbCAtICRzY29wZS5zbXN0d293YXlMaW1pdDtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuc21zdHdvd2F5TGltaXQgPiAkc2NvcGUuc21zdHdvd2F5VG90YWwpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnNtc3R3b3dheUxpbWl0ID0gJHNjb3BlLiRzY29wZS5zbXN0d293YXlUb3RhbDtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnNtc3R3b3dheSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zbXN0d293YXlMaW1pdCA9IDA7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc21zdHdvd2F5ID0gJHNjb3BlLnNtc3R3b3dheVRvdGFsO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICRzY29wZS5sYW5kaW5ncGFnZUwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGlzRmluaXRlKCRzY29wZS5sYW5kaW5ncGFnZUxpbWl0KSAmJiAkc2NvcGUubGFuZGluZ3BhZ2VMaW1pdCA+IDApIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sYW5kaW5ncGFnZSA9ICRzY29wZS5sYW5kaW5ncGFnZVRvdGFsIC0gJHNjb3BlLmxhbmRpbmdwYWdlTGltaXQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmxhbmRpbmdwYWdlTGltaXQgPiAkc2NvcGUuc21zdHdvd2F5VG90YWwpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmxhbmRpbmdwYWdlTGltaXQgPSAkc2NvcGUuJHNjb3BlLnNtc3R3b3dheVRvdGFsO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUubGFuZGluZ3BhZ2UgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubGFuZGluZ3BhZ2VMaW1pdCA9IDA7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubGFuZGluZ3BhZ2UgPSAkc2NvcGUubGFuZGluZ3BhZ2VUb3RhbDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJHNjb3BlLmNhbGN1bGVEaXNrU3BhY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsc3BhY2UgPSBkaXNrU3BhY2VBbGxpZWQgLSAkc2NvcGUucGxhbi5kaXNrU3BhY2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL0ZvciBjcmVhdGUgdXNlcnMgb2YgdGhlIGFjY291bnRcclxuICAgICAgICAgICAgaWYoISh0eXBlb2YgZGlza1NwYWNlQWxsaWVkKSA9PSAndW5kZWZpbmVkJyl7XHJcbiAgICAgICAgICAgICAgaWYoJHNjb3BlLnRvdGFsc3BhY2U9PW51bGx8fCRzY29wZS50b3RhbHNwYWNlPT0nJyl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxzcGFjZSA9IGRpc2tTcGFjZUFsbGllZDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5uZXdBY2NvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgIHZhciBwbGFuID0galF1ZXJ5LnBhcnNlSlNPTigkc2NvcGUucGF5bWVudFBsYW5TZWxlY3RlZCk7XHJcbiAgICAgICAgICAgICAgdmFyIGNhdGVnb3J5ID0galF1ZXJ5LnBhcnNlSlNPTigkc2NvcGUuaWRBY2NvdW50Q2F0ZWdvcnkpO1xyXG4gICAgICAgICAgICAgIGlmICgkc2NvcGUuZXhwaXJhdGlvbkRhdGUgPT0gMSAmJiAkc2NvcGUuZXhwaXJ5RGF0ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKCdFbCBjYW1wbyBmZWNoYSBkZSBleHBpcmFjacOzbiBlcyBvYmxpZ2F0b3JpbycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLmV4cGlyYXRpb25EYXRlID09IDApIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHBpcnlEYXRlID0gbnVsbDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAvKmRhdG9zIGRlIG9jY291bnQqL1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJHNjb3BlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBwaG9uZTogJHNjb3BlLnBob25lLFxyXG4gICAgICAgICAgICAgICAgYWRkcmVzczogJHNjb3BlLmFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICBlbWFpbDogJHNjb3BlLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbml0OiAkc2NvcGUubml0LFxyXG4gICAgICAgICAgICAgICAgY2l0eTogJHNjb3BlLmNpdHlTZWxlY3RlZCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogJHNjb3BlLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgIGlkUGF5bWVudFBsYW46IHBsYW4uaWRQYXltZW50UGxhbixcclxuICAgICAgICAgICAgICAgIHNlbmRlckFsbG93ZWQ6ICRzY29wZS5zZW5kZXJBbGxvd2VkLFxyXG4gICAgICAgICAgICAgICAgaWRGb290ZXI6ICRzY29wZS5pZEZvb3RlcixcclxuICAgICAgICAgICAgICAgIGZvb3RlckVkaXRhYmxlOiAkc2NvcGUuZm9vdGVyRWRpdGFibGUsXHJcbiAgICAgICAgICAgICAgICBleHBpcnlEYXRlOiAkc2NvcGUuZXhwaXJ5RGF0ZSxcclxuICAgICAgICAgICAgICAgIHRvbGVyYW5jZTogJHNjb3BlLnRvbGVyYW5jZSxcclxuICAgICAgICAgICAgICAgIGlkQWNjb3VudENhdGVnb3J5OiBjYXRlZ29yeS5pZEFjY291bnRDYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgIC8vYXR0YWNobWVudHM6ICRzY29wZS5hdHRhY2htZW50cyxcclxuICAgICAgICAgICAgICAgIHVybDogJHNjb3BlLnVybFdlYlNpdGUsXHJcbiAgICAgICAgICAgICAgICBob3VySW5pdDogJHNjb3BlLmhvdXJJbml0LFxyXG4gICAgICAgICAgICAgICAgaG91ckVuZDogJHNjb3BlLmhvdXJFbmQsXHJcbiAgICAgICAgICAgICAgICBoYWJlYXNEYXRhOiAkc2NvcGUuaGFiZWFzZGF0YSxcclxuICAgICAgICAgICAgICAgIG10YTogJHNjb3BlLm10YVNlbGVjdGVkLFxyXG4gICAgICAgICAgICAgICAgc2hvd010YTogJHNjb3BlLnNob3dNdGFcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBtYWluLnJlZ2lzdGVyQWNjb3VudChkYXRhLCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcm91dGUgPSAkd2luZG93Lm15QmFzZVVSTCArIFwiYWNjb3VudC91c2VyY3JlYXRlL1wiICsgcmVzLmlkQWNjb3VudDtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJvdXRlO1xyXG4gICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIHNsaWRlT25Ub3AocmVzWzBdLCAzMDAwLCBcImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlLXNpZ25cIiwgXCJkYW5nZXJcIik7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmVycm9yID0gJ2ZhaWwnO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgLyokc2NvcGUuc2VsZWN0UGxhblNlbGVjdGVkID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNob3dNdGEgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBpZiAoIWlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZCA9ICRzY29wZS5wYXltZW50UGxhblNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS5wYXltZW50UGxhbiwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmlkUGF5bWVudFBsYW4gPT0gJHNjb3BlLnBheW1lbnRQbGFuU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godmFsdWUucGxhbnhzZXJ2aWNlLCBmdW5jdGlvbiAob2JqLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmouc2VydmljZSA9PSBcIkVtYWlsIE1hcmtldGluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93TXRhID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYXltZW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBsYW4gPSAkc2NvcGUucGF5bWVudDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zaG93RGV0YWlsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pZFBheW1lbnRQbGFuID0gXCJcIjtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS5wYXltZW50LnBsYW54c2VydmljZSwgZnVuY3Rpb24gKG9iaiwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChvYmouc2VydmljZSA9PSBcIkVtYWlsIE1hcmtldGluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dNdGEgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0qL1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdFBsYW5TZWxlY3RlZCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5zaG93TXRhID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgaWYgKCFpZCkge1xyXG4gICAgICAgICAgICAgICAgaWQgPSAkc2NvcGUucGF5bWVudFBsYW5TZWxlY3RlZDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS5wYXltZW50UGxhbiwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pZFBheW1lbnRQbGFuID09ICRzY29wZS5wYXltZW50UGxhblNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2YWx1ZS5wbGFueHNlcnZpY2UsIGZ1bmN0aW9uIChvYmosIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmouc2VydmljZSA9PSBcIkVtYWlsIE1hcmtldGluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd010YSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUucGF5bWVudCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICRzY29wZS5wbGFuID0gJHNjb3BlLnBheW1lbnQ7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNob3dEZXRhaWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICRzY29wZS5pZFBheW1lbnRQbGFuID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICogRm9yIHRoZSB2aWV3IENyZWF0ZVxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAkc2NvcGUuZGVzY3JpcHRpb25QbGFuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5zaG93TXRhID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnBsYW4gPSBqUXVlcnkucGFyc2VKU09OKCRzY29wZS5wYXltZW50UGxhblNlbGVjdGVkKTtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2hvd0RldGFpbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS5wbGFuLnBsYW54c2VydmljZSwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlLnNlcnZpY2U9PVwiRW1haWwgTWFya2V0aW5nXCIpe1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd010YSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuc2hvd0V4cGlyeURhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGNhdGVnb3J5ID0galF1ZXJ5LnBhcnNlSlNPTigkc2NvcGUuaWRBY2NvdW50Q2F0ZWdvcnkpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5leHBpcmF0aW9uRGF0ZSA9IGNhdGVnb3J5LmV4cGlyYXRpb25EYXRlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmVkaXRBY2NvdW50ID0gZnVuY3Rpb24gKGlkQWNjb3VudCwgdmFsaWRhdGVDb25maXJtKSB7XHJcblxyXG4gICAgICAgICAgICAgIHZhciBwbGFuID0galF1ZXJ5LnBhcnNlSlNPTigkc2NvcGUucGF5bWVudFBsYW5TZWxlY3RlZCk7XHJcbiAgICAgICAgICAgICAgdmFyIGNhdGVnb3J5ID0galF1ZXJ5LnBhcnNlSlNPTigkc2NvcGUuaWRBY2NvdW50Q2F0ZWdvcnkpO1xyXG4gICAgICAgICAgICAgIGlmICgkc2NvcGUuZXhwaXJhdGlvbkRhdGUgPT0gMSAmJiAkc2NvcGUuZXhwaXJ5RGF0ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLmVycm9yKCdFbCBjYW1wbyBmZWNoYSBkZSBleHBpcmFjacOzbiBlcyBvYmxpZ2F0b3JpbycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLmV4cGlyYXRpb25EYXRlID09IDApIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5leHBpcnlEYXRlID0gbnVsbDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAvKmRhdG9zIGRlIGFjY291bnQqL1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJHNjb3BlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBwaG9uZTogJHNjb3BlLnBob25lLFxyXG4gICAgICAgICAgICAgICAgYWRkcmVzczogJHNjb3BlLmFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICBlbWFpbDogJHNjb3BlLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgbml0OiAkc2NvcGUubml0LFxyXG4vLyAgICAgICAgICAgICAgICBpZFBheW1lbnRQbGFuOiBwbGFuLmlkUGF5bWVudFBsYW4sXHJcbiAgICAgICAgICAgICAgICBpZFBheW1lbnRQbGFuOiAkc2NvcGUucGF5bWVudFBsYW5TZWxlY3RlZCxcclxuICAgICAgICAgICAgICAgIGNpdHk6ICRzY29wZS5jaXR5U2VsZWN0ZWQsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICRzY29wZS5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBzZW5kZXJBbGxvd2VkOiAkc2NvcGUuc2VuZGVyQWxsb3dlZCxcclxuICAgICAgICAgICAgICAgIGlkRm9vdGVyOiAkc2NvcGUuaWRGb290ZXIsXHJcbiAgICAgICAgICAgICAgICBmb290ZXJFZGl0YWJsZTogJHNjb3BlLmZvb3RlckVkaXRhYmxlLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5RGF0ZTogJHNjb3BlLmV4cGlyeURhdGUsXHJcbiAgICAgICAgICAgICAgICB0b2xlcmFuY2VQZXJpb2Q6ICRzY29wZS50b2xlcmFuY2VQZXJpb2QsXHJcbiAgICAgICAgICAgICAgICBpZEFjY291bnRDYXRlZ29yeTogY2F0ZWdvcnkuaWRBY2NvdW50Q2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICAvL2F0dGFjaG1lbnRzOiAkc2NvcGUuYXR0YWNobWVudHMsXHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUNvbmZpcm06IHZhbGlkYXRlQ29uZmlybSxcclxuICAgICAgICAgICAgICAgIHVybDogJHNjb3BlLnVybFdlYlNpdGUsXHJcbiAgICAgICAgICAgICAgICBob3VySW5pdDogJHNjb3BlLmhvdXJJbml0LFxyXG4gICAgICAgICAgICAgICAgaG91ckVuZDogJHNjb3BlLmhvdXJFbmQsXHJcbiAgICAgICAgICAgICAgICBoYWJlYXNEYXRhOiAkc2NvcGUuaGFiZWFzZGF0YSxcclxuICAgICAgICAgICAgICAgIG10YTogJHNjb3BlLm10YVNlbGVjdGVkLFxyXG4gICAgICAgICAgICAgICAgc2hvd010YTogJHNjb3BlLnNob3dNdGFcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBpZiAodmFsaWRhdGVDb25maXJtID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS52YWxpZGF0ZUNvbmZpcm0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgbWFpbi5lZGl0QWNjb3VudChkYXRhLCBpZEFjY291bnQsIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciByb3V0ZSA9ICR3aW5kb3cubXlCYXNlVVJMICsgXCJhY2NvdW50L2luZGV4XCI7XHJcbiAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSByb3V0ZTtcclxuICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gNDAzKSB7XHJcbiAgICAgICAgICAgICAgICAgIHNsaWRlT25Ub3AocmVzWzBdLCAzMDAwLCBcImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlLXNpZ25cIiwgXCJkYW5nZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS52YWxpZGF0ZUNvbmZpcm0gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5lcnJvciA9ICdmYWlsJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmNvZGUgPT0gNDA5KSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvckVkaXRBY2NvdW50ID0gcmVzLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgIG9wZW5Nb2RhbENvbmZpcm0oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBtYWluLm10YSgkc2NvcGUuZGF0YSwgZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICRzY29wZS5tdGEgPSByZXM7XHJcbiAgICAgICAgICAgICAgaWYgKCRzY29wZS5pZE10YSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm10YVNlbGVjdGVkID0gJHNjb3BlLmlkTXRhO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdE10YSgkc2NvcGUubXRhU2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UuZXJyb3IoZXJyWzBdKTtcclxuICAgICAgICAgICAgICAkcm9vdFNjb3BlLmVycm9yID0gJ2ZhaWwnO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdE10YSA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICAgIGlmICghaWQpIHtcclxuICAgICAgICAgICAgICAgIGlkID0gJHNjb3BlLm10YVNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlkTXRhID0gXCIwXCI7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLm5hbWVQYWdlID09ICdlZGl0Jykge1xyXG4gICAgICAgICAgICAgIHZhciBpZEFjY291bnQgPSBsYXN0cG9zaXRpb247XHJcbiAgICAgICAgICAgICAgbWFpbi5nZXRNdGEoaWRBY2NvdW50LCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXMhPW51bGwmJnJlcyE9Jycpe1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuaWRNdGEgPSByZXNbMF1bJ2lkTXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5uYW1lUGFnZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmlkTXRhID0gJzAnO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZVBhZ2UgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5tdGFTZWxlY3RlZCA9ICRzY29wZS5pZE10YTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RNdGEoJHNjb3BlLm10YVNlbGVjdGVkKTtcclxuICAgICAgICAgICAgICAgIC8qJHNjb3BlLnN0YXRlU2VsZWN0ZWQgPSAkc2NvcGUuaWRTdGF0ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RTdGF0ZSgkc2NvcGUuc3RhdGVTZWxlY3RlZCk7Ki9cclxuICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmVycm9yID0gJ2ZhaWwnO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgfV0pXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2N0cmxBY2NvdW50bGlzdCcsIFsnJHNjb3BlJywgJyRodHRwJywgJ21haW4nLCAnJHEnLCAnbm90aWZpY2F0aW9uU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCBtYWluLCAkcSwgbm90aWZpY2F0aW9uU2VydmljZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5pdGlhbCA9IDA7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdlID0gMTtcclxuICAgICAgICAgICAgJHNjb3BlLmlkQWNjb3VudDtcclxuICAgICAgICAgICAgJHNjb3BlLm5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICAkc2NvcGUuYWNjb3VudFJlZ2lzdGVyVHlwZTtcclxuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cztcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5nZXRBbGwgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgIGlmIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIG1haW4uZ2V0QWxsKCRzY29wZS5pbml0aWFsLCAkc2NvcGUubmFtZSwgJHNjb3BlLmFjY291bnRSZWdpc3RlclR5cGUsICRzY29wZS5zdGF0dXMsIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hY2NvdW50cyA9IHJlcy5hY2NvdW50cztcclxuICAgICAgICAgICAgICAgICRzY29wZS5jb25maWdBbGxpZWQgPSByZXMuY29uZmlnQWxsaWVkO1xyXG5cclxuICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmVycm9yID0gJ2ZhaWwnO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvL0ZVTkNJT04gUEFSQSBUQUVSIExPUyBSRUdJU1RST1MgUE9SIFRJUE8gREUgT1JJR0VOXHJcbiAgICAgICAgICAgICRzY29wZS50eXBlRnVuYyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFjY291bnRSZWdpc3RlclR5cGUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldEFsbCgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy9GVU5DSU9OIFBBUkEgVFJBRVIgTE9TIFJFR0lTVFJPUyBQT1IgRVNUQURPIERFIExBIENVRU5UQVxyXG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzRnVuYyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICBpZiAoJHNjb3BlLnN0YXR1cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW5pdGlhbCA9IDA7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgKChjb250YWN0VG90YWxBbGxpZWQgPj0gMCkgPyAkc2NvcGUuY29udGFjdFRvdGFsQWxsaWVkID0gY29udGFjdFRvdGFsQWxsaWVkIDogXCJcIik7XHJcbiAgICAgICAgICAgICgoc21zVG90YWxBbGxpZWQgPj0gMCkgPyAkc2NvcGUuc21zVG90YWxBbGxpZWQgPSBzbXNUb3RhbEFsbGllZCA6IFwiXCIpO1xyXG4gICAgICAgICAgICAoKHNtc3R3b3dheVRvdGFsQWxsaWVkID49IDApID8gJHNjb3BlLnNtc3R3b3dheVRvdGFsQWxsaWVkID0gc21zdHdvd2F5VG90YWxBbGxpZWQgOiBcIlwiKTtcclxuICAgICAgICAgICAgKChsYW5kaW5ncGFnZVRvdGFsQWxsaWVkID49IDApID8gJHNjb3BlLmxhbmRpbmdwYWdlVG90YWxBbGxpZWQgPSBsYW5kaW5ncGFnZVRvdGFsQWxsaWVkIDogXCJcIik7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICgoYWNjb3VudGluZ01vZGVBbGxpZWQgPj0gMCkgPyAkc2NvcGUuYWNjb3VudGluZ01vZGVBbGxpZWQgPSBhY2NvdW50aW5nTW9kZUFsbGllZCA6IFwiXCIpO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnJlc3RhcnRQYWdpbmF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5pbml0aWFsID0gMDtcclxuICAgICAgICAgICAgICAkc2NvcGUucGFnZSA9IDE7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUubGlzdE1haWxUZW1wbGF0ZUFjY291bnQgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5pZEFjY291bnQgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICRodHRwLmdldChmdWxsVXJsQmFzZSArIFwiYXBpL21haWx0ZW1wbGF0ZS9saXN0bWFpbHRlbXBieWFjY28vXCIgKyBkYXRhICsgXCIvXCIgKyAkc2NvcGUuaW5pdGlhbClcclxuICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbm90aWZpY2F0aW9uU2VydmljZS5lcnJvcihkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgJChcIiNteU1vZGFsXCIpLm1vZGFsKCdzaG93Jyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUucmVjaGFyZ2VTZXJ2aWNlID0gZnVuY3Rpb24gKGlkQWNjb3VudCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5pZEFjY291bnQgPSBpZEFjY291bnQ7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNob3dzbXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2hvd3Ntc3R3b3dheSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICRzY29wZS5zaG93bGFuZGluZ3BhZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2hvd2VtYWlsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNtc0xpbWl0ID0gJyc7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNtc3R3b3dheUxpbWl0ID0gJyc7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLm1haWxMaW1pdCA9ICcnO1xyXG4gICAgICAgICAgICAgICRzY29wZS5zZXJ2aWNlcyA9IFtdO1xyXG4gICAgICAgICAgICAgIG1haW4uZ2V0c2VydmljZXNhY2NvdW50KGlkQWNjb3VudCwgZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VsdCA9IHJlcztcclxuICAgICAgICAgICAgICAgICRzY29wZS5saW1pdFNtc0FjY291bnQgPSByZXMubGltaXRTbXNBY2NvdW50O1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpbWl0U21zdHdvd2F5QWNjb3VudCA9IHJlcy5saW1pdFNtc3R3b3dheUFjY291bnQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubGltaXRDb250YWN0QWNjb3VudCA9IHJlcy5saW1pdENvbnRhY3RBY2NvdW50O1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpbWl0TGFuZGluZ3BhZ2VBY2NvdW50ID0gcmVzLmxpbWl0TGFuZGluZ3BhZ2VBY2NvdW50O1xyXG4gICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5lcnJvciA9ICdmYWlsJztcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgJChcIiNtb2RhbFJlY2hhcmdlXCIpLm1vZGFsKCdzaG93Jyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuc2hvd3NtcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuc2hvd3Ntc3R3b3dheSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuc2hvd2xhbmRpbmdwYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS5zaG93ZW1haWwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFNlcnZpY2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5zaG93c21zID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNob3dzbXN0d293YXkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2hvd2xhbmRpbmdwYWdlID0gZmFsc2U7ICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAkc2NvcGUuc2hvd2VtYWlsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc2VydmljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuc2VydmljZXNbaV0gPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NtcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNlcnZpY2VzW2ldID09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dlbWFpbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNlcnZpY2VzW2ldID09IDcpIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dzbXN0d293YXkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5zZXJ2aWNlc1tpXSA9PSA4KSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93bGFuZGluZ3BhZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5yZWNoYXJnZUFwcGx5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgc21zTGltaXQ6ICRzY29wZS5zbXNMaW1pdCxcclxuICAgICAgICAgICAgICAgIHNtc3R3b3dheUxpbWl0OiAkc2NvcGUuc21zdHdvd2F5TGltaXQsXHJcbiAgICAgICAgICAgICAgICBsYW5kaW5ncGFnZUxpbWl0OiAkc2NvcGUubGFuZGluZ3BhZ2VMaW1pdCxcclxuICAgICAgICAgICAgICAgIG1haWxMaW1pdDogJHNjb3BlLm1haWxMaW1pdCxcclxuICAgICAgICAgICAgICAgIGlkQWNjb3VudDogJHNjb3BlLmlkQWNjb3VudCxcclxuICAgICAgICAgICAgICAgIHNlcnZpY2VzOiAkc2NvcGUuc2VydmljZXNcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBtYWluLnJlY2hhcmdlQWNjb3VudChkYXRhLCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc21zVG90YWxBbGxpZWQgPSAkc2NvcGUuc21zVG90YWxBbGxpZWQgLSAkc2NvcGUuc21zTGltaXQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc21zdHdvd2F5VG90YWxBbGxpZWQgPSAkc2NvcGUuc21zdHdvd2F5VG90YWxBbGxpZWQgLSAkc2NvcGUuc21zdHdvd2F5TGltaXQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubGFuZGluZ3BhZ2VUb3RhbEFsbGllZCA9ICRzY29wZS5sYW5kaW5ncGFnZVRvdGFsQWxsaWVkIC0gJHNjb3BlLmxhbmRpbmdwYWdlTGltaXQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29udGFjdFRvdGFsQWxsaWVkID0gJHNjb3BlLmNvbnRhY3RUb3RhbEFsbGllZCAtICRzY29wZS5tYWlsTGltaXQ7XHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLnN1Y2Nlc3MocmVzWzBdKTtcclxuICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZXJyb3IgPSAnZmFpbCc7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICQoXCIjbW9kYWxSZWNoYXJnZVwiKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmZvcndhcmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWwgKz0gMTtcclxuICAgICAgICAgICAgICAkc2NvcGUucGFnZSArPSAxO1xyXG4gICAgICAgICAgICAgICRzY29wZS5nZXRBbGwoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgJHNjb3BlLmZhc3Rmb3J3YXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5pbml0aWFsID0gKCRzY29wZS5hY2NvdW50cy50b3RhbF9wYWdlcyAtIDEpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5wYWdlID0gJHNjb3BlLmFjY291bnRzLnRvdGFsX3BhZ2VzO1xyXG4gICAgICAgICAgICAgICRzY29wZS5nZXRBbGwoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgJHNjb3BlLmJhY2t3YXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5pbml0aWFsIC09IDE7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnBhZ2UgLT0gMTtcclxuICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICRzY29wZS5mYXN0YmFja3dhcmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmluaXRpYWwgPSAwO1xyXG4gICAgICAgICAgICAgICRzY29wZS5wYWdlID0gMTtcclxuICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWxsKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0QWxsKCk7XHJcbiAgICAgICAgICB9XSlcclxuICAgICAgICAuY29udHJvbGxlcignY3RybFJlY2hhcmdlcycsIFsnJHNjb3BlJywgJyRodHRwJywgJ21haW4nLCAnJHEnLCAnbm90aWZpY2F0aW9uU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCBtYWluLCAkcSwgbm90aWZpY2F0aW9uU2VydmljZSkge1xyXG4gICAgICAgICAgJHNjb3BlLmFjY291bnQgPSB7fTtcclxuICAgICAgICAgICRzY29wZS5oaXN0b3J5ID0gW107XHJcbiAgICAgICAgICAkc2NvcGUubGlzdFJhbmdlc3ByaWNlcyA9IFtdO1xyXG4gICAgICAgICAgJHNjb3BlLnF1YW50aXR5ID0gbnVsbDtcclxuICAgICAgICAgICRzY29wZS5vYmplY3RSYW5nZVByaWNlcyA9IGZhbHNlO1xyXG4gICAgICAgICAgJHNjb3BlLmlzX3NlcnZpY2VzID0gJyc7XHJcblxyXG4gICAgICAgICAgJHNjb3BlLmRhdGEgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICRzY29wZS5yZWNoYXJnZVNlcnZpY2UgPSBmdW5jdGlvbiAoaWRTZXJ2aWNlcykge1xyXG4gICAgICAgICAgICBtYWluLmdldHJlY2hhcmdlc2VydmljZXMoaWRTZXJ2aWNlcywgZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICRzY29wZS5hY2NvdW50ID0gcmVzLmFjY291bnQ7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmhpc3RvcnkgPSByZXMuaGlzdG9yeTtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2VydmljZXMgPSByZXMuc2VydmljZXM7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmlzX3NlcnZpY2VzID0gcmVzLnNlcnZpY2VzLmlkU2VydmljZXMgPT0gMSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAkc2NvcGUubGlzdFJhbmdlc3ByaWNlcyA9IHJlcy5yYW5nZXNwcmljZXM7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICRyb290U2NvcGUuZXJyb3IgPSAnZmFpbCc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgICRzY29wZS5yZWNoYXJnZVNlcnZpY2UoaWRTZXJ2aWNlcyk7XHJcblxyXG4gICAgICAgICAgJHNjb3BlLm5nQ2hhbmdlID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJlY2hhcmdlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIGlkUmFuZ2VzUHJpY2VzID0gdmFsdWUuaWRSYW5nZXNQcmljZXM7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLm9iamVjdFJhbmdlUHJpY2VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkc2NvcGUub2JqZWN0UmFuZ2VQcmljZXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfV0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vanMvYW5ndWxhci9hY2NvdW50L2NvbnRyb2xsZXIuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n");

/***/ })
/******/ ]);