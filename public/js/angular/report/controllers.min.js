(function(){angular.module("report.controllers",[]).filter("propsFilter",function(){return function(a,t){var e=[];if(angular.isArray(a)){var i=Object.keys(t);a.forEach(function(a){for(var n=!1,l=0;l<i.length;l++){var o=i[l],r=t[o].toLowerCase();if(a[o].toString().toLowerCase().indexOf(r)!==-1){n=!0;break}}n&&e.push(a)})}else e=a;return e}}).controller("indexController",["$scope","restService","notificationService","constantReport",function(a,t,e,i){$("#dateInitial").datetimepicker({format:"yyyy-MM-dd",language:"es"}).on("changeDate",function(t){a.tick(),a.$apply()}),$("#dateFinal").datetimepicker({format:"yyyy-MM-dd",language:"es"}).on("changeDate",function(t){a.tick(),a.$apply()}),a.tick=function(){a.search.dateInitial=$("#valuedateInitial").val(),a.search.dateFinal=$("#valuedateFinal").val()},a.title=i.Titles.reportmail,a.initial=0,a.page=1,a.search={},a.accounts=[],a.forward=function(){a.initial+=1,a.page+=1,a.getAll()},a.fastforward=function(){a.initial=a.report.total_pages-1,a.page=a.report.total_pages,a.getAll()},a.backward=function(){a.initial-=1,a.page-=1,a.getAll()},a.fastbackward=function(){a.initial=0,a.page=1,a.getAll()},t.getAllAccount().then(function(t){a.accounts=t}),a.searchReport=function(){a.getAll()},a.cleanFilters=function(){a.search={},$("#valuedateInitial").val(""),$("#valuedateFinal").val(""),a.getAll()},a.searchDate=function(){a.search.dateFinal&&a.search.dateInitial&&a.getAll()},a.dowloadReport=function(){t.downloadReport(a.search).then(function(){var a=fullUrlBase+"statistic/download";location.href=a})},a.getAll=function(){t.getAllReportEmail(a.initial,a.search).then(function(t){a.report=t})},a.getAll()}]).controller("indexControllerRecharge",["$scope","restService","notificationService","constantReport",function(a,t,e,i){$("#dateInitial").datetimepicker({format:"yyyy-MM-dd",language:"es"}).on("changeDate",function(t){a.tick(),a.$apply()}),$("#dateFinal").datetimepicker({format:"yyyy-MM-dd",language:"es"}).on("changeDate",function(t){a.tick(),a.$apply()}),a.tick=function(){a.search.dateInitial=$("#valuedateInitial").val(),a.search.dateFinal=$("#valuedateFinal").val()},a.title=i.Titles.reportrecharge,a.initial=0,a.page=1,a.search={},a.accounts=[],a.forward=function(){a.initial+=1,a.page+=1,a.getAllRecharge()},a.fastforward=function(){a.initial=a.report.total_pages-1,a.page=a.report.total_pages,a.getAllRecharge()},a.backward=function(){a.initial-=1,a.page-=1,a.getAllRecharge()},a.fastbackward=function(){a.initial=0,a.page=1,a.getAllRecharge()},t.getAllAccount().then(function(t){a.accounts=t}),a.searchReport=function(){a.getAllRecharge()},a.searchReportRecharge=function(){a.getAllRecharge()},a.cleanFilters=function(){a.search={},$("#valuedateInitial").val(""),$("#valuedateFinal").val(""),a.getAllRecharge()},a.searchDate=function(){a.search.dateFinal&&a.search.dateInitial&&a.getAllRecharge()},a.searchDateRecharge=function(){a.search.dateFinal&&a.search.dateInitial&&a.getAllRecharge()},a.dowloadReport=function(){t.downloadReportRecharge(a.search,a.title).then(function(){var t=fullUrlBase+"statistic/downloadexcel/"+a.title;location.href=t})},a.getAllRecharge=function(){t.getAllReportRecharge(a.initial,a.search).then(function(t){a.report=t})},a.getAllRecharge()}]).controller("indexControllerPlan",["$scope","restService","notificationService","constantReport",function(a,t,e,i){$("#dateInitial").datetimepicker({format:"yyyy-MM-dd",language:"es"}).on("changeDate",function(t){a.tick(),a.$apply()}),$("#dateFinal").datetimepicker({format:"yyyy-MM-dd",language:"es"}).on("changeDate",function(t){a.tick(),a.$apply()}),a.tick=function(){a.search.dateInitial=$("#valuedateInitial").val(),a.search.dateFinal=$("#valuedateFinal").val()},a.title=i.Titles.reportchangeplan,a.initial=0,a.page=1,a.search={},a.accounts=[],a.forward=function(){a.initial+=1,a.page+=1,a.getAllRecharge()},a.fastforward=function(){a.initial=a.report.total_pages-1,a.page=a.report.total_pages,a.getAllRecharge()},a.backward=function(){a.initial-=1,a.page-=1,a.getAllRecharge()},a.fastbackward=function(){a.initial=0,a.page=1,a.getAllRecharge()},t.getAllAccount().then(function(t){a.accounts=t}),a.searchReport=function(){a.getAllRecharge()},a.searchReportRecharge=function(){a.getAllRecharge()},a.cleanFilters=function(){a.search={},$("#valuedateInitial").val(""),$("#valuedateFinal").val(""),a.getAllRecharge()},a.searchDate=function(){a.search.dateFinal&&a.search.dateInitial&&a.getAllRecharge()},a.searchDateRecharge=function(){a.search.dateFinal&&a.search.dateInitial&&a.getAllRecharge()},a.dowloadReport=function(){t.downloadReportChangePlan(a.search,a.title).then(function(){var t=fullUrlBase+"statistic/downloadexcel/"+a.title;location.href=t})},a.getAllRecharge=function(){t.getAllChangePlan(a.initial,a.search).then(function(t){a.report=t})},a.getAllRecharge()}]).controller("indexControllerStadistics",["$scope","restService","notificationService","$state","$location","$window",function(a,t,e,i,n,l){function o(t){var e=t.date,i=t.mode;if("day"===i)for(var n=new Date(e).setHours(0,0,0,0),l=0;l<a.events.length;l++){var o=new Date(a.events[l].date).setHours(0,0,0,0);if(n===o)return a.events[l].status}return""}a.today=function(){a.dt=new Date},a.today(),a.clear=function(){a.dt=null},a.inlineOptions={customClass:o,minDate:new Date,showWeeks:!0},a.dateOptions={formatYear:"yy",maxDate:new Date,minDate:new Date,startingDay:1},a.toggleMin=function(){a.inlineOptions.minDate=a.inlineOptions.minDate?null:new Date,a.dateOptions.minDate=a.inlineOptions.minDate},a.toggleMin(),a.openDatePickerI=function(t){a.listDropMail[t].openedInital?a.listDropMail[t].openedInital=!1:a.listDropMail[t].openedInital=!0},a.openDatePickerF=function(t){a.listDropMail[t].openedeFinal?a.listDropMail[t].openedeFinal=!1:a.listDropMail[t].openedeFinal=!0},a.setDate=function(t,e,i){a.dt=new Date(t,e,i)},a.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[0],a.altInputFormats=["M!/d!/yyyy"];var r=new Date;r.setDate(r.getDate()+1);var s=new Date;s.setDate(r.getDate()+1),a.events=[{date:r,status:"full"},{date:s,status:"partially"}],a.currentNavItem="page1",a.listDropMail=[],a.listDropSms=[],a.listFilters=[{title:"MAIL",class:"glyphicon glyphicon-send",value:1,nameId:"divListOptionMail",category:"m"},{title:"SMS",class:"glyphicon glyphicon-phone",value:2,nameId:"divListOptionSms",category:"s"}],a.tabs=[{title:"Mes actual",value:"1",pos:0,timeFindSpecific:"d",valueoption:1},{title:"Mes Anterior",value:"2",pos:1,timeFindSpecific:"d",valueoption:1},{title:"Último año",value:"3",pos:2,timeFindSpecific:"M",valueoption:1},{title:"Hoy",value:"4",pos:3,timeFindSpecific:"H",valueoption:2},{title:"Ayer",value:"5",pos:4,timeFindSpecific:"H",valueoption:2},{title:"Días del mes",value:"6",pos:5,timeFindSpecific:"d",valueoption:2},{title:"Hoy",value:"7",pos:6,timeFindSpecific:"H",valueoption:3},{title:"Ayer",value:"8",pos:7,timeFindSpecific:"H",valueoption:3},{title:"Días del mes",value:"9",pos:8,timeFindSpecific:"d",valueoption:3},{title:"Hoy",value:"10",pos:9,timeFindSpecific:"H",valueoption:4},{title:"Ayer",value:"11",pos:10,timeFindSpecific:"H",valueoption:4},{title:"Días del mes",value:"12",pos:11,timeFindSpecific:"d",valueoption:4},{title:"Hoy",value:"13",pos:12,timeFindSpecific:"H",valueoption:5},{title:"Ayer",value:"14",pos:13,timeFindSpecific:"H",valueoption:5},{title:"Días del mes",value:"15",pos:14,timeFindSpecific:"d",valueoption:5},{title:"Hoy",value:"16",pos:15,timeFindSpecific:"H",valueoption:6},{title:"Ayer",value:"17",pos:16,timeFindSpecific:"H",valueoption:6},{title:"Días del mes",value:"18",pos:17,timeFindSpecific:"d",valueoption:6}],a.dayAgo=new Date,a.dayDateAgo=moment().subtract(1,"Days").toDate(),a.lisFiltersOpsMail=[{title:"Campañas enviadas de email",drag:!0,value:1,class:"glyphicon glyphicon-send",category:"m",idDateInitial:"dateinitialm1",idDateFinal:"datefinalm1",openedInital:!1,openedeFinal:!1,valueDateInitial:"",valueDateFinal:"",modelDataIni:{dateIni:a.dayDateAgo,dateFin:new Date},tabsDate:a.tabs},{title:"Envíos de mail por día",drag:!0,value:2,class:"glyphicon glyphicon-phone",category:"m",idDateInitial:"dateinitialm2",idDateFinal:"datefinalm2",openedInital:!1,openedeFinal:!1,valueDateInitial:"",valueDateFinal:"",modelDataIni:{dateIni:a.dayDateAgo,dateFin:new Date},tabsDate:a.tabs},{title:"Aperturas de Mail por día",drag:!0,value:3,class:"glyphicon glyphicon-phone",category:"m",idDateInitial:"dateinitialm3",idDateFinal:"datefinalm3",openedInital:!1,openedeFinal:!1,valueDateInitial:"",valueDateFinal:"",modelDataIni:{dateIni:a.dayDateAgo,dateFin:new Date},tabsDate:a.tabs},{title:"Clics de Mail por día",drag:!0,value:4,class:"glyphicon glyphicon-phone",category:"m",idDateInitial:"dateinitialm3",idDateFinal:"datefinalm3",openedInital:!1,openedeFinal:!1,valueDateInitial:"",valueDateFinal:"",modelDataIni:{dateIni:a.dayDateAgo,dateFin:new Date},tabsDate:a.tabs},{title:"Sms enviados por día",drag:!0,value:5,class:"glyphicon glyphicon-send",category:"s",idDateInitial:"dateinitials1",idDateFinal:"datefinals1",openedInital:!1,openedeFinal:!1,valueDateInitial:"",valueDateFinal:"",modelDataIni:{dateIni:a.dayDateAgo,dateFin:new Date},tabsDate:a.tabs},{title:"Campañas de sms por día",drag:!0,value:6,class:"glyphicon glyphicon-send",category:"s",idDateInitial:"dateinitials2",idDateFinal:"datefinals2",openedInital:!1,openedeFinal:!1,valueDateInitial:"",valueDateFinal:"",modelDataIni:{dateIni:a.dayDateAgo,dateFin:new Date},tabsDate:a.tabs}],a.selectTab=function(e,i,n,l,o,r,s){t.getDataTabDate(e,i,o,r).then(function(t){a.getTotalCampMails(t,i,n,l,s,o)})},a.lisFiltersSms=[{title:"Campañas Totales sms",drag:!0,value:4,class:"glyphicon glyphicon-send",category:"s"}],a.countTotalMails=0,a.countTotaEmailLinks=0,a.countTotalUniqueClicks=0,a.optionsList={startCallback:function(a,t,e){},onOut:function(a,t){null!=t.draggable.scope()},onDrop:function(t,e,i,n){if(null!=e.draggable.scope()){var l=e.draggable.scope().dndDragItem;"m"==l.category?(1==l.value?a.getAllTotalCampMails(l.category,l.value):2==l.value?a.getAllClickMails(l.category,l.value):3==l.value&&a.getAllLinksCampMails(l.category,l.value),a.actionAutoHeightDivChar()):"s"==l.category&&(4==l.value?a.getTotalSms(l.category,l.value):5==l.value?a.getSentSms(l.category,l.value):6==l.value&&a.getSentTotalSms(l.category,l.value),a.actionAutoHeightDivChar())}},onOver:function(a,t,e,i,n){null!=t.draggable.scope()}},a.actionDroppableOptions={startCallback:function(a,t,e){},onOut:function(a,t){null!=t.draggable.scope()&&(document.getElementById("divOptions").style.backgroundColor="#ff6e00",document.getElementById("divOptions").style.border="none")},dropCallback:function(a,t){},onOver:function(a,t,e,i,n){null!=t.draggable.scope()&&(document.getElementById("divOptions").style.backgroundColor="#333333",document.getElementById("divOptions").style.border="dashed white")},onDrop:function(a,t,e,i){if(null!=t.draggable.scope()){t.draggable.scope().dndDragItem;document.getElementById("divOptions").style.backgroundColor="#ff6e00",document.getElementById("divOptions").style.border="none"}}},a.actionAutoHeightDivChar=function(){document.getElementById("divOptions").style.height+="'"+a.divHeghtContentChar+"px;'",document.getElementById("divChooseOptions").style.height+="'"+a.divHeghtContentChar+"px;'"},a.chargeInitialChar=function(){listoption=a.lisFiltersOpsMail[1],listoption2=a.lisFiltersOpsMail[2],a.lisFiltersOpsMail.splice(1,1),a.lisFiltersOpsMail.splice(1,1),a.subscribe(listoption),a.subscribe(listoption2)},a.subscribe=function(t){if("m"==t.category){for(var e=0;e<a.lisFiltersOpsMail.length;e++)a.lisFiltersOpsMail[e].value==t.value&&a.lisFiltersOpsMail.splice(e,1);a.listDropMail.push(t)}else if("s"==t.category){for(var e=0;e<a.lisFiltersOpsMail.length;e++)a.lisFiltersOpsMail[e].value==t.value&&a.lisFiltersOpsMail.splice(e,1);a.listDropMail.push(t)}},a.unsubscribe=function(t){if("m"==t.category){for(var e=0;e<a.listDropMail.length;e++)a.listDropMail[e].value==t.value&&(a.listDropMail.splice(e,1),a.arrayDataCharMail.splice(e,1),a.arrayTitleCharMail.splice(e,1));a.lisFiltersOpsMail.push(t)}else if("s"==t.category){for(var e=0;e<a.listDropMail.length;e++)a.listDropMail[e].value==t.value&&(a.listDropMail.splice(e,1),a.arrayDataCharSms.splice(e,1),a.arrayTitleCharSms.splice(e,1));a.lisFiltersOpsMail.push(t)}},a.arrayTitleCharMail=[],a.arrayDataCharMail=[],a.titleEjeY="",a.titleEstatics="",a.typeChart="column",a.countTotalCampMail=0,a.titleTotalMail="",a.timeDetailX="Horas",a.getTotalCampMails=function(t,e,i,n,l,o){a.countTotalCampMail=t.info[0].totalLinkCamp,a.titleTotalMail="Total de Campañas",a.titleEjeY="# Campañas",a.titleEstatics=l,a.arrayDataCharMail=[],a.arrayTitleCharMail=[],a.arrayDataSent=[],a.arrayTitleMail=[],a.arrayDataMessages=[],a.arrayDataTotalMessages=[],a.totalMessagesSent=0,a.arrayDataFunction=[],"H"==o?a.timeDetailX="Horas":"d"==o?a.timeDetailX="Días":"M"==o&&(a.timeDetailX="Meses"),t.info[0].dataLinks.length>0?($.each(t.info[0].dataLinks,function(t,e){a.arrayTitleCharMail.push(e.timeSpecific),a.arrayDataFunction.push(e.timeSpecific,parseInt(e.messagesSent)),a.arrayDataMessages.push(a.arrayDataFunction),a.arrayDataFunction=[]}),a.arrayDataCharMail.push({colorByPoint:!0,showInLegend:!1,name:"Envios de Mail",data:a.arrayDataMessages})):a.titleEstatics="No se encontrarón campañas en estas fechas",a.drawGraphicsMail(e,i,n)},a.getAllTotalCampMails=function(e,i){t.getAllCampMail(i).then(function(t){a.countTotalCampMail=t.info[0].totalCampSubAccount,a.titleTotalMail="Total de Campañas",a.titleEjeY="Mails",a.titleEstatics="Estadísticas de Mail",a.arrayDataCharMail=[],a.arrayTitleCharMail=[],a.arrayTitleCharMail.push(a.titleTotalMail),a.arrayDataSent=[],a.arrayTitleMail=[],a.totalMessagesSent=0,t.info[0].dataMail.length>0?($.each(t.info[0].dataMail,function(t,e){a.totalMessagesSent+=parseInt(e.messagesSent),a.arrayDataCharMail.push({name:"Campaña "+(parseInt(t)+1),data:[parseInt(e.messagesSent)]})}),a.arrayDataCharMail.push({name:"Total Mails enviados",data:[parseInt(a.totalMessagesSent)]})):a.titleEstatics="No se encontrarón campañas en estas fechas",a.drawGraphicsMail(e,i)})},a.countTotalLinkCamp=0,a.titleTotalLinksCamp="",a.getAllLinksCampMails=function(e,i){t.getAllCampMail(i).then(function(t){a.countTotalLinkCamp=0,a.titleTotalLinksCamp="Links",a.titleEjeY="Cantidad de Links en la campaña",a.titleEstatics="Estadísticas de Links",a.arrayDataCharMail=[],a.arrayTitleCharMail=[],a.arrayTitleCharMail.push(a.titleTotalLinksCamp),t.info[0].dataLinks.length>0?($.each(t.info[0].dataLinks,function(t,e){a.countTotalLinkCamp+=parseInt(e.NUM_LINKS_MAIL),a.arrayDataCharMail.push({name:"Campaña "+(parseInt(t)+1),data:[parseInt(e.NUM_LINKS_MAIL)]})}),a.arrayDataCharMail.push({name:"Total Links",data:[parseInt(a.countTotalLinkCamp)]})):a.titleEstatics="No se encontrarón campañas en estas fechas",a.drawGraphicsMail(e,i)})},a.getAllClickMails=function(e,i){t.getAllCampMail(i).then(function(t){a.titleTotalMail="Total de Clics unicos",a.titleEjeY="Cantidad de Clics unicos por mail",a.titleEstatics="Estadísticas de clics por Link",a.arrayDataCharMail=[],a.arrayTitleCharMail=[],a.arrayTitleCharMail.push(a.titleTotalMail),t.info[0].dataClickLink.length>0?$.each(t.info[0].dataClickLink,function(t,e){a.arrayDataCharMail.push({name:"Campaña "+(parseInt(t)+1),data:[parseInt(e.uniqueClicks)]})}):a.titleEstatics="No se encontrarón campañas en estas fechas",a.drawGraphicsMail(e,i)})};var c=null;a.drawGraphicsMail=function(t,e,i){c={chart:{type:a.typeChart,width:464,height:350,defaultSeriesType:"areaspline",backgroundColor:{linearGradient:[0,0,500,500],stops:[[0,"rgb(255, 255, 255)"],[1,"rgb(240, 240, 255)"]]}},plotOptions:{series:{stacking:"normal"}},credits:{enabled:!1},title:{text:a.titleEstatics,style:{color:"#000",font:'bold 16px "Trebuchet MS", Verdana, sans-serif'}},xAxis:{title:{enabled:!0,text:"Tiempo en "+a.timeDetailX,style:{fontWeight:"normal"}},categories:a.arrayTitleCharMail},yAxis:{title:{text:a.titleEjeY}},series:a.arrayDataCharMail,colors:["#058DC7","#50B432","#ED561B","#DDDF00","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4"],subtitle:{style:{color:"#666666",font:'bold 12px "Trebuchet MS", Verdana, sans-serif'}},legend:{itemStyle:{font:"9pt Trebuchet MS, Verdana, sans-serif",color:"black"},itemHoverStyle:{color:"gray"}},exporting:{buttons:{contextButton:{menuItems:[{text:"Exportar to PDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{text:"Exportar to JPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{text:"Exportar to PNG",onclick:function(){this.exportChart()},separator:!1},{text:"Estilo Normal",onclick:function(){a.themeDefault(e.category+e.value+e.tabsDate[i].pos)},separator:!1},{text:"Estilo Sand",onclick:function(){a.themeChartSand(e.category+e.value+e.tabsDate[i].pos)},separator:!1},{text:"Estilo Grid",onclick:function(){a.themeChartGridLight(e.category+e.value+e.tabsDate[i].pos)},separator:!1}]}}}},c.chart.renderTo="divCharFil"+e.category+e.value+e.tabsDate[i].pos,c.chart.type="column";new Highcharts.Chart(c)},a.themeDefault=function(t){a.chartToChange=angular.element(document.getElementById("divCharFil"+t)).highcharts(),a.chartToChange.theme={colors:["#058DC7","#50B432","#ED561B","#DDDF00","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4"],chart:{backgroundColor:{linearGradient:[0,0,500,500],stops:[[0,"rgb(255, 255, 255)"],[1,"rgb(240, 240, 255)"]]}},title:{style:{color:"#000",font:'bold 16px "Trebuchet MS", Verdana, sans-serif'}},subtitle:{style:{color:"#666666",font:'bold 12px "Trebuchet MS", Verdana, sans-serif'}},legend:{itemStyle:{font:"9pt Trebuchet MS, Verdana, sans-serif",color:"black"},itemHoverStyle:{color:"gray"}}},Highcharts.setOptions(a.chartToChange.theme),a.chartToChange.update(a.chartToChange.theme)},a.themeDarkUnica=function(t){a.chartToChange=angular.element(document.getElementById("divCharFil"+t)).highcharts(),a.chartToChange.theme={colors:["#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:{linearGradient:{x1:0,y1:0,x2:1,y2:1},stops:[[0,"#2a2a2b"],[1,"#3e3e40"]]},style:{fontFamily:"'Unica One', sans-serif"},plotBorderColor:"#606063"},title:{style:{color:"#E0E0E3",textTransform:"uppercase",fontSize:"20px"}},subtitle:{style:{color:"#E0E0E3",textTransform:"uppercase"}},xAxis:{gridLineColor:"#707073",labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",title:{style:{color:"#A0A0A3"}}},yAxis:{gridLineColor:"#707073",labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",tickWidth:1,title:{style:{color:"#A0A0A3"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.85)",style:{color:"#F0F0F0"}},plotOptions:{series:{dataLabels:{color:"#B0B0B3"},marker:{lineColor:"#333"}},boxplot:{fillColor:"#505053"},candlestick:{lineColor:"white"},errorbar:{color:"white"}},legend:{itemStyle:{color:"#E0E0E3"},itemHoverStyle:{color:"#FFF"},itemHiddenStyle:{color:"#606063"}},credits:{style:{color:"#666"}},labels:{style:{color:"#707073"}},drilldown:{activeAxisLabelStyle:{color:"#F0F0F3"},activeDataLabelStyle:{color:"#F0F0F3"}},navigation:{buttonOptions:{symbolStroke:"#DDDDDD",theme:{fill:"#505053"}}},rangeSelector:{buttonTheme:{fill:"#505053",stroke:"#000000",style:{color:"#CCC"},states:{hover:{fill:"#707073",stroke:"#000000",style:{color:"white"}},select:{fill:"#000003",stroke:"#000000",style:{color:"white"}}}},inputBoxBorderColor:"#505053",inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(255,255,255,0.1)",series:{color:"#7798BF",lineColor:"#A6C7ED"},xAxis:{gridLineColor:"#505053"}},scrollbar:{barBackgroundColor:"#808083",barBorderColor:"#808083",buttonArrowColor:"#CCC",buttonBackgroundColor:"#606063",buttonBorderColor:"#606063",rifleColor:"#FFF",trackBackgroundColor:"#404043",trackBorderColor:"#404043"},legendBackgroundColor:"rgba(0, 0, 0, 0.5)",background2:"#505053",dataLabelsColor:"#B0B0B3",textColor:"#C0C0C0",contrastTextColor:"#F0F0F3",maskColor:"rgba(255,255,255,0.3)"},Highcharts.setOptions(a.chartToChange.theme),a.chartToChange.update(a.chartToChange.theme)},a.themeChartGridLight=function(t){a.chartToChange=angular.element(document.getElementById("divCharFil"+t)).highcharts(),a.chartToChange.theme={colors:["#7cb5ec","#f7a35c","#90ee7e","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:null,style:{fontFamily:"Dosis, sans-serif"}},title:{style:{fontSize:"16px",fontWeight:"bold",textTransform:"uppercase"}},tooltip:{borderWidth:0,backgroundColor:"rgba(219,219,216,0.8)",shadow:!1},legend:{itemStyle:{fontWeight:"bold",fontSize:"13px"}},xAxis:{gridLineWidth:1,labels:{style:{fontSize:"12px"}}},yAxis:{minorTickInterval:"auto",title:{style:{textTransform:"uppercase"}},labels:{style:{fontSize:"12px"}}},plotOptions:{candlestick:{lineColor:"#404048"}},background2:"#F0F0EA"},Highcharts.setOptions(a.chartToChange.theme),a.chartToChange.update(a.chartToChange.theme)},a.themeChartSand=function(t){a.chartToChange=angular.element(document.getElementById("divCharFil"+t)).highcharts(),a.chartToChange.theme={colors:["#f45b5b","#8085e9","#8d4654","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:null,style:{fontFamily:"Signika, serif"}},title:{style:{color:"black",fontSize:"16px",fontWeight:"bold"}},subtitle:{style:{color:"black"}},tooltip:{borderWidth:0},legend:{itemStyle:{fontWeight:"bold",fontSize:"13px"}},xAxis:{labels:{style:{color:"#6e6e70"}}},yAxis:{labels:{style:{color:"#6e6e70"}}},plotOptions:{series:{shadow:!0},candlestick:{lineColor:"#404048"},map:{shadow:!1}},navigator:{xAxis:{gridLineColor:"#D0D0D8"}},rangeSelector:{buttonTheme:{fill:"white",stroke:"#C0C0C8","stroke-width":1,states:{select:{fill:"#D0D0D8"}}}},scrollbar:{trackBorderColor:"#C0C0C8"},background2:"#E0E0E8"},Highcharts.setOptions(a.chartToChange.theme),a.chartToChange.update(a.chartToChange.theme)},a.arrayTitleCharSms=[],a.arrayDataCharSms=[],a.titleEjeYSms="",a.titleEstatics="",a.titleTotalSms="",a.totalSms=0,a.countCampSms=0,a.getTotalSms=function(e,i){t.getAllCampSms(i).then(function(t){a.countCampSms=t.info[0].totalCountSms,a.titleTotalSms="Total de Campañas sms",a.titleEjeYSms="Sms",a.titleEstatics="Estadísticas de Sms",a.arrayDataCharSms=[],a.arrayTitleCharSms=[],a.arrayTitleCharSms.push(a.titleTotalSms),a.arrayDataCharSms.push({name:"Total campañas sms",data:[parseInt(a.countCampSms)]}),a.drawGraphicsSms(e,i)})},a.getSentSms=function(e,i){t.getAllCampSms(i).then(function(t){a.countCampSms=t.info[0].totalCountSms,a.titleTotalSms="Total de Sms Enviados",a.titleEjeYSms="Sms",a.titleEstatics="Estadísticas de Sms",a.arrayDataCharSms=[],a.arrayTitleCharSms=[],a.arrayTitleCharSms.push(a.titleTotalSms),$.each(t.info[0].dataSmsSent,function(t,e){a.arrayDataCharSms.push({name:"Campaña "+(parseInt(t)+1),data:[parseInt(e.sent)]})}),a.drawGraphicsSms(e,i)})},a.getSentTotalSms=function(e,i){t.getAllCampSms(i).then(function(t){a.countCampSms=t.info[0].totalCountSms,a.titleTotalSms="",a.titleEjeYSms="Sms",a.titleEstatics="Estadísticas de Sms",a.arrayDataCharSms=[],a.arrayTitleCharSms=[],a.arrayDataSmsSent=[],a.arrayDataSmsTotal=[],$.each(t.info[0].dataSmsSent,function(t,e){a.titleTotalSms="Campaña "+(parseInt(t)+1),a.arrayTitleCharSms.push(a.titleTotalSms),a.arrayDataSmsSent.push(parseInt(e.sent)),a.arrayDataSmsTotal.push(parseInt(e.total))}),a.arrayDataCharSms.push({name:"Cantidad de sms enviados",data:a.arrayDataSmsSent},{name:"Cantidad de sms recibidos",data:a.arrayDataSmsTotal}),a.drawGraphicsSms(e,i)})},a.drawGraphicsSms=function(t,e){Highcharts.chart("divCharFil"+t+e,{chart:{type:"column"},title:{text:a.titleEstatics},xAxis:{categories:a.arrayTitleCharSms},yAxis:{title:{text:a.titleEjeYSms}},series:a.arrayDataCharSms})},a.mailOpenMonth=0,a.boundedHardMonth=0,a.boundedSoftMonth=0,a.quantityPollMonth=0,a.smsMonth=0,a.chargeInitial=function(){t.getChargeInitial().then(function(t){a.mailOpenMonth=t.info[0].mailOpenMonth,a.boundedHardMonth=t.info[0].bouncedHard,a.boundedSoftMonth=t.info[0].bouncedSoft,a.quantityPollMonth=t.info[0].qualitypoll,a.smsMonth=t.info[0].quantitySmsMonth})},a.countTotalSmsSents=0,a.countTotalSmsOk=0,a.countTotalCampSms=0,a.totalCampnias=parseInt(a.countTotalMails)+parseInt(a.countTotalCampSms),a.dateInitial="",a.dateFinal="",a.findDataDate=function(e){a.dateInitial=angular.element("#dateInitial"+e.category+e.value).val(),a.dateFinal=angular.element("#dateFinal"+e.category+e.value).val(),e.valueDateInitial=a.dateInitial,e.valueDateFinal=a.dateFinal,""==a.dateInitial||""==a.dateFinal?alert("Por favor complete los campos de las fechas"):"m"==e.category?(a.arrayDataCharMail=[],a.arrayTitleCharMail=[],t.getChargeDataDateMail(e).then(function(t){1==e.value?(a.countTotalCampMail=t.info[0].totalCampSubAccount,a.titleTotalMail="Total de Campañas",a.titleEjeY="Mails",a.titleEstatics="Estadísticas de Mail",a.arrayDataSent=[],a.arrayTitleMail=[],a.totalMessagesSent=0,t.info[0].dataMail.length>0?($.each(t.info[0].dataMail,function(t,e){a.totalMessagesSent+=parseInt(e.messagesSent),a.arrayDataCharMail.push({name:"Campaña "+(parseInt(t)+1),data:[parseInt(e.messagesSent)]})}),a.arrayDataCharMail.push({name:"Total Mails enviados",data:[parseInt(a.totalMessagesSent)]})):a.titleEstatics="No se encontrarón campañas en estas fechas",a.arrayTitleCharMail.push(a.titleTotalMail)):2==e.value?(a.titleTotalMail="Total de Clics unicos",a.titleEjeY="Cantidad de Clics unicos por mail",a.titleEstatics="Estadísticas de clics por Link",t.info[0].dataClickLink.length>0?$.each(t.info[0].dataClickLink,function(t,e){a.arrayDataCharMail.push({name:"Campaña "+(parseInt(t)+1),data:[parseInt(e.uniqueClicks)]})}):a.titleEstatics="No se encontrarón campañas en estas fechas",a.arrayTitleCharMail.push(a.titleTotalMail)):3==e.value&&(a.countTotalLinkCamp=0,a.titleTotalLinksCamp="Links",a.titleEjeY="Cantidad de Links en la campaña",a.titleEstatics="Estadísticas de Links",t.info[0].dataLinks.length>0?($.each(t.info[0].dataLinks,function(t,e){a.countTotalLinkCamp+=parseInt(e.NUM_LINKS_MAIL),a.arrayDataCharMail.push({name:"Campaña "+(parseInt(t)+1),data:[parseInt(e.NUM_LINKS_MAIL)]})}),a.arrayDataCharMail.push({name:"Total Links",data:[parseInt(a.countTotalLinkCamp)]})):a.titleEstatics="No se encontrarón campañas en estas fechas",a.arrayTitleCharMail.push(a.titleTotalLinksCamp)),a.drawGraphicsMail(e.category,e.value)})):"s"==e.category&&(a.arrayDataCharSms=[],a.arrayTitleCharSms=[],t.getChargeDataDateSms(e).then(function(t){4==e.value?(a.countCampSms=t.info[0].totalCountSms,a.titleTotalSms="Total de Campañas sms",a.titleEjeYSms="Sms",a.titleEstatics="Estadísticas de Sms",t.info[0].dataSms.length>0?a.arrayDataCharSms.push({name:"Total campañas sms",data:[parseInt(a.countCampSms)]}):a.titleEstatics="No se encontrarón campañas en estas fechas",a.arrayTitleCharSms.push(a.titleTotalSms)):5==e.value?(a.countCampSms=t.info[0].totalCountSms,a.titleTotalSms="Total de Sms Enviados",a.titleEjeYSms="Sms",a.titleEstatics="Estadísticas de Sms",t.info[0].dataSmsSent.length>0?$.each(t.info[0].dataSmsSent,function(t,e){a.arrayDataCharSms.push({name:"Campaña "+(parseInt(t)+1),data:[parseInt(e.sent)]})}):a.titleEstatics="No se encontrarón campañas en estas fechas",a.arrayTitleCharSms.push(a.titleTotalSms)):6==e.value&&(a.countCampSms=t.info[0].totalCountSms,a.titleTotalSms="",a.titleEjeYSms="Sms",a.titleEstatics="Estadísticas de Sms",a.arrayDataSmsSent=[],a.arrayDataSmsTotal=[],t.info[0].dataSmsSent.length>0&&($.each(t.info[0].dataSmsSent,function(t,e){a.titleTotalSms="Campaña "+(parseInt(t)+1),a.arrayTitleCharSms.push(a.titleTotalSms),a.arrayDataSmsSent.push(parseInt(e.sent)),a.arrayDataSmsTotal.push(parseInt(e.total))}),a.arrayDataCharSms.push({name:"Cantidad de sms enviados",data:a.arrayDataSmsSent},{name:"Cantidad de sms recibidos",data:a.arrayDataSmsTotal})),a.arrayTitleCharSms.push(a.titleTotalSms)),a.drawGraphicsSms(e.category,e.value)}))},a.divHeghtContentChar=angular.element("#divOptions").prop("offsetHeight"),a.chargeCharInitial=function(){a.chargeInitial(),a.chargeCharPagInitial(),a.findRolServices()},a.chargeCharPagInitial=function(){a.subscribe(a.lisFiltersOpsMail[0]),a.subscribe(a.lisFiltersOpsMail[1])},a.InvertirChart=function(t,e){var i=angular.element(document.getElementById("divCharFil"+t)).highcharts(),n={};1==e?(a.typeChart="column",n.type="column"):2==e?(a.typeChart="pie",n.type=a.typeChart,n.plotOptions={pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}},series:{animation:{duration:1e3}}}):3==e&&(a.typeChart="line",n.type=a.typeChart,n.legend={layout:"vertical",align:"right",verticalAlign:"middle"}),i.update({chart:n,plotOptions:n.plotOptions,legend:n.legend})},a.redirect=function(a){l.location="#/"+a},a.redirectModulo=function(a){l.location.href=a},a.rolServices=[],a.findRolServices=function(){t.getFindRolServices().then(function(t){var e=Object.keys(t).length;e>0?$.each(t,function(t,e){a.rolServices.push(e.idService)}):alert("El usuario no tiene ningun permiso para acceder a esta página")})},a.chargeCharInitial()}]).controller("indexSmsController",["$scope","restService","notificationService","constantReport",function(a,t,e,i){a.dowloadReportSms=function(){t.downloadReportSms(a.search).then(function(){var a=fullUrlBase+"statistic/download";location.href=a})},$("#dateInitial").datetimepicker({format:"yyyy-MM-dd",language:"es"}).on("changeDate",function(t){a.tick(),a.$apply()}),$("#dateFinal").datetimepicker({format:"yyyy-MM-dd",language:"es"}).on("changeDate",function(t){a.tick(),a.$apply()}),a.tick=function(){a.search.dateInitial=$("#valuedateInitial").val(),a.search.dateFinal=$("#valuedateFinal").val()},a.title=i.Titles.reportsms,a.initial=0,a.page=1,a.search={},a.accounts=[],a.forward=function(){a.initial+=1,a.page+=1,a.getAll()},a.fastforward=function(){a.initial=a.report.total_pages-1,a.page=a.report.total_pages,a.getAll()},a.backward=function(){a.initial-=1,a.page-=1,a.getAll()},a.fastbackward=function(){a.initial=0,a.page=1,a.getAll()},t.getAllAccount().then(function(t){a.accounts=t}),a.searchReport=function(){a.getAll()},a.cleanFilters=function(){a.search={},$("#valuedateInitial").val(""),$("#valuedateFinal").val(""),a.getAll()},a.searchDate=function(){a.search.dateFinal&&a.search.dateInitial&&a.getAll()},a.getAll=function(){t.getAllReportSms(a.initial,a.search).then(function(t){a.report=t})},a.getAll()}]).controller("graphController",["$scope","restService","notificationService",function(a,t,e){a.services=[{idService:1,name:"Correo"},{idService:2,name:"Sms"}],a.graphres=[],a.data={},a.data.selected=1,a.search={},$("#dateInitial").datepicker({format:"yyyy-mm",viewMode:"months",minViewMode:"months",autoclose:!0}).on("changeDate",function(t){a.tick(),a.$apply()}),$("#dateFinal").datepicker({format:"yyyy-mm",viewMode:"months",minViewMode:"months",autoclose:!0}).on("changeDate",function(t){a.tick(),a.$apply()}),a.tick=function(){a.search.dateInitial=$("#valuedateInitial").val(),a.search.dateFinal=$("#valuedateFinal").val()},a.cleanFilters=function(){a.search={},$("#valuedateInitial").val(""),$("#valuedateFinal").val(""),a.getAll()},a.searchGraph=function(){1==a.data.selected?a.mail():2==a.data.selected&&a.sms()},a.searchDateMail=function(){a.search.dateFinal&&a.search.dateInitial&&(1==a.data.selected?a.mail():2==a.data.selected&&a.sms())},a.title=function(){var t="";return 1==a.data.selected?t="de correo":2==a.data.selected&&(t="de sms"),t},a.sms=function(){t.graphSms(a.search).then(function(t){a.graphres=t,a.graph(t,"Sms")})},a.mail=function(){a.getGraphMail=function(){t.graphMail(a.search).then(function(t){a.graphres=t,a.graph(t,"Correos")})},a.getGraphMail()},a.graph=function(t,e){
a.chart={options:{chart:{type:"column"},xAxis:{type:"category"},plotOptions:{series:{lineWidth:1,fillOpacity:.5,borderWidth:0}},legend:{enabled:!0},title:{text:" "},credits:{enabled:!1}},series:[{name:e,data:t,color:"#7cb5ec"}]}},a.mail(),a.total=function(){for(var t=0,e=0;e<a.graphres.length;e++)t+=a.graphres[e].y;return t}}]).controller("excelsmsController",["$scope","restService","notificationService",function(a,t,e){a.search={},$("#dateInitial").datepicker({format:"yyyy-mm",viewMode:"months",minViewMode:"months",autoclose:!0}).on("changeDate",function(t){a.tick(),a.$apply()}),$("#dateFinal").datepicker({format:"yyyy-mm",viewMode:"months",minViewMode:"months",autoclose:!0}).on("changeDate",function(t){a.tick(),a.$apply()}),a.tick=function(){a.search.dateInitial=$("#valuedateInitial").val(),a.search.dateFinal=$("#valuedateFinal").val()},a.cleanFilters=function(){a.search={},$("#valuedateInitial").val(""),$("#valuedateFinal").val(""),a.getAll()},a.searchDateMail=function(){a.search.dateFinal&&a.search.dateInitial&&a.getAll()},a.initial=0,a.page=1,a.forward=function(){a.initial+=1,a.page+=1,a.getAll()},a.fastforward=function(){a.initial=a.infosms.total_pages-1,a.page=a.infosms.total_pages,a.getAll()},a.backward=function(){a.initial-=1,a.page-=1,a.getAll()},a.fastbackward=function(){a.initial=0,a.page=1,a.getAll()},a.downloadSms=function(){t.downloadSms(a.search).then(function(){var a=fullUrlBase+"statistic/download";location.href=a})},a.getAll=function(){t.getInfoExcelSms(a.initial,a.search).then(function(t){a.infosms=t})},a.getAll()}]).controller("excelsmsdayController",["$scope","restService","notificationService","constantReport",function(a,t,e,i){a.title=i.Titles.reportexcelsmsday,a.downloadSms=function(){t.downloadSmsbyday(a.search,a.title).then(function(){var t=fullUrlBase+"statistic/downloadexcel/"+a.title;location.href=t})},a.cleanFilters=function(){a.search={},a.search.valuedateInitial="",a.search.valuedateFinal="",a.getAll()},a.searchDateMail=function(){a.search.dateInitial=a.search.valuedateInitial,a.search.dateFinal=a.search.valuedateFinal,a.getAll()},a.initial=0,a.page=1,a.forward=function(){a.initial+=1,a.page+=1,a.getAll()},a.fastforward=function(){a.initial=a.infosms.total_pages-1,a.page=a.infosms.total_pages,a.getAll()},a.backward=function(){a.initial-=1,a.page-=1,a.getAll()},a.fastbackward=function(){a.initial=0,a.page=1,a.getAll()},a.getAll=function(){t.getInfoExcelDaySms(a.initial,a.search).then(function(t){t.items.length>0?a.infosms=t:e.warning(i.Notifications.Errors.errorNoneSmsDataMonth)})},a.getAll()}]).controller("infosmsController",["$scope","restService","notificationService","constantReport",function(a,t,e,i){a.title=i.Titles.reportsms,a.dowloadReport=function(){t.dowloadReportInfoDetailSms(a.search,a.title).then(function(){var t=fullUrlBase+"statistic/downloadexcel/"+a.title;location.href=t})},a.search={},a.cleanFilters=function(){a.search={},a.search.valuedateInitial="",a.search.valuedateFinal="",a.getAll()},a.searchReport=function(){a.search.dateInitial=a.search.valuedateInitial,a.search.dateFinal=a.search.valuedateFinal,a.getAll()},a.searchDate=function(){a.search.dateInitial=a.search.valuedateInitial,a.search.dateFinal=a.search.valuedateFinal,a.getAll()},a.initial=0,a.page=1,a.forward=function(){a.initial+=1,a.page+=1,a.getAll()},a.fastforward=function(){a.initial=a.report.total_pages-1,a.page=a.report.total_pages,a.getAll()},a.backward=function(){a.initial-=1,a.page-=1,a.getAll()},a.fastbackward=function(){a.initial=0,a.page=1,a.getAll()},t.getSubaccount().then(function(t){a.subaccount=t}),t.getEmailUsers().then(function(t){a.users=t}),a.getAll=function(){t.getInfoDetailSms(a.initial,a.search).then(function(t){a.report=t})},a.getAll()}]).controller("infomailController",["$scope","restService","notificationService","constantReport",function(a,t,e,i){a.title=i.Titles.reportinfomail,a.dowloadReport=function(){t.dowloadReportInfoDetailMail(a.search,a.title).then(function(){var t=fullUrlBase+"statistic/downloadexcel/"+a.title;location.href=t})},a.search={},a.cleanFilters=function(){a.search={},a.search.valuedateInitial="",a.search.valuedateFinal="",a.getAll()},a.searchReport=function(){a.getAll()},a.searchDate=function(){a.search.dateInitial=a.search.valuedateInitial,a.search.dateFinal=a.search.valuedateFinal,a.getAll()},a.initial=0,a.page=1,a.forward=function(){a.initial+=1,a.page+=1,a.getAll()},a.fastforward=function(){a.initial=a.report.total_pages-1,a.page=a.report.total_pages,a.getAll()},a.backward=function(){a.initial-=1,a.page-=1,a.getAll()},a.fastbackward=function(){a.initial=0,a.page=1,a.getAll()},t.getSubaccount().then(function(t){a.subaccount=t}),t.getEmailUsers().then(function(t){a.users=t}),a.getAll=function(){t.getInfoDetailMail(a.initial,a.search).then(function(t){a.report=t})},a.getAll()}]).controller("reportvalidation",["$scope","restService","notificationService","constantReport","$window",function(a,t,e,i,n){a.data={},a.misc={progressbar:!1,initial:0,page:1,nameForm:"",totalValidations:0,total_pages:0,search:{},accounts:[],categories:[{name:"A"},{name:"B"},{name:"D"}],progressbar:!0,categoriesBad:[{name:"F"}]},a.functions={forward:function(){a.misc.initial+=1,a.misc.page+=1,a.resService.getAllMailValidation()},fastforward:function(){a.misc.initial=a.misc.total_pages-1,a.misc.page=a.misc.total_pages,a.resService.getAllMailValidation()},backward:function(){a.misc.initial-=1,a.misc.page-=1,a.resService.getAllMailValidation()},fastbackward:function(){a.misc.initial=0,a.misc.page=1,a.resService.getAllMailValidation()},cleanFilters:function(){a.misc.search.dateInitial="",a.misc.search.dateFinal="",a.misc.initial=0,a.misc.page=1,a.misc.search={},this.getAllMailValidation()},cleanFiltersBad:function(){a.misc.search.dateInitialTwo="",a.misc.search.dateFinalTwo="",a.misc.initial=0,a.misc.page=1,a.misc.search={},this.getAllMailBounced()},searchDate:function(){if(!a.misc.search.dateFinal&&a.misc.search.dateInitial||a.misc.search.dateFinal&&!a.misc.search.dateInitial)return e.warning(i.Notifications.Errors.dateComplete),!1;if(a.misc.search.email){if(a.re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,!a.misc.search.email.match(a.re))return e.warning(i.Notifications.Errors.emailNotCorrect),!1;a.data.initial=0,a.data.page=1,a.resService.getAllMailValidation()}else this.getAllMailValidation()},searchDateTwo:function(){if(!a.misc.search.dateFinalTwo&&a.misc.search.dateInitialTwo||a.misc.search.dateFinalTwo&&!a.misc.search.dateInitialTwo)return e.warning(i.Notifications.Errors.dateComplete),!1;if(a.misc.search.email){if(a.re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,!a.misc.search.email.match(a.re))return e.warning(i.Notifications.Errors.emailNotCorrect),!1;a.data.initial=0,a.data.page=1,a.resService.getAllMailBounced()}else this.getAllMailBounced()},searchDateBadEmail:function(){a.misc.search.dateFinal&&a.misc.search.dateInitial&&this.getAllMailBounced()},getAllMailValidation:function(){a.resService.getAllMailValidation()},getAllMailBounced:function(){a.resService.getAllMailBounced()},getAllAccount:function(){a.resService.getAllAccount()},searchReport:function(){a.misc.initial=0,a.misc.page=1,a.resService.getAllMailValidation()},searchReportBounced:function(){a.misc.initial=0,a.misc.page=1,a.resService.getAllMailBounced()},dowloadReport:function(){a.resService.dowloadReport()},dowloadReportBounced:function(){a.resService.dowloadReportBounced()},changeOptionEmailValidation:function(){a.misc.initial=0,a.misc.page=1,a.misc.search={},a.resService.getAllMailValidation()},changeOptionEmailBounced:function(){a.misc.initial=0,a.misc.page=1,a.misc.search={},a.resService.getAllMailBounced()},startDateOnSetTime:function(){a.$broadcast("start-date-changed")},endDateOnSetTime:function(){a.$broadcast("end-date-changed")},startDateBeforeRender:function(t){if(a.misc.search.dateFinal){var e=moment(a.misc.search.dateFinal);t.filter(function(a){return a.localDateValue()>=e.valueOf()}).forEach(function(a){a.selectable=!1})}},endDateBeforeRender:function(t,e){if(a.misc.search.dateInitial){var i=moment(a.misc.search.dateInitial).subtract(1,t).add(1,"minute");e.filter(function(a){return a.localDateValue()<=i.valueOf()}).forEach(function(a){a.selectable=!1})}},startDateBeforeRenderTwo:function(t){if(a.misc.search.dateFinalTwo){var e=moment(a.misc.search.dateFinalTwo);t.filter(function(a){return a.localDateValue()>=e.valueOf()}).forEach(function(a){a.selectable=!1})}},endDateBeforeRenderTwo:function(t,e){if(a.misc.search.dateInitialTwo){var i=moment(a.misc.search.dateInitialTwo).subtract(1,t).add(1,"minute");e.filter(function(a){return a.localDateValue()<=i.valueOf()}).forEach(function(a){a.selectable=!1})}},filterDate:function(){a.data.initial=0,a.data.page=1,a.resService.getAllMailValidation()},findEmail:function(){a.re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,a.misc.search.email?a.misc.search.email.match(a.re)?(a.data.initial=0,a.data.page=1,a.resService.getAllMailValidation()):e.warning(i.Notifications.Errors.emailNotCorrect):e.warning(i.Notifications.Errors.completeEmail)},findEmailBounced:function(){a.re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,a.misc.search.email?a.misc.search.email.match(a.re)?(a.data.initial=0,a.data.page=1,a.resService.getAllMailBounced()):e.warning(i.Notifications.Errors.emailNotCorrect):e.warning(i.Notifications.Errors.completeEmail)},forwardTwo:function(){a.misc.initial+=1,a.misc.page+=1,a.resService.getAllMailBounced()},fastforwardTwo:function(){a.misc.initial=a.misc.total_pages-1,a.misc.page=a.misc.total_pages,a.resService.getAllMailBounced()},backwardTwo:function(){a.misc.initial-=1,a.misc.page-=1,a.resService.getAllMailBounced()},fastbackwardTwo:function(){a.misc.initial=0,a.misc.page=1,a.resService.getAllMailBounced()}},a.resService={getAllMailValidation:function(){a.misc.progressbar=!1,t.getAllMailValidation(a.misc.initial,a.misc.search).then(function(t){t.totalValidations>0?(a.loading=!0,a.data=t.data,a.misc.totalValidations=t.totalValidations,a.misc.total_pages=t.total_pages,a.misc.progressbar=!0):(a.misc.totalValidations=0,a.misc.total_pages=0,a.loading=!1,a.misc.progressbar=!0,e.warning(i.Notifications.Errors.errorNoneContactsGetMailValidation))}).catch(function(a){e.error(a.message)})},getAllMailBounced:function(){a.misc.progressbar=!1,t.getAllMailBounced(a.misc.initial,a.misc.search).then(function(t){t.totalValidations>0?(a.loading=!0,a.data=t.data,a.misc.totalValidations=t.totalValidations,a.misc.total_pages=t.total_pages,a.misc.progressbar=!0):(a.misc.totalValidations=0,a.misc.total_pages=0,a.loading=!1,a.misc.progressbar=!0,e.warning(i.Notifications.Errors.errorNoneContactsGetMailValidation))}).catch(function(a){e.error(a.message)})},getAllAccount:function(){t.getAllAccount().then(function(t){t.length>0?a.misc.accounts=t:e.warning(i.Notifications.Errors.noGetAccount)})},dowloadReport:function(){a.misc.progressbar=!1,t.downloadMailValidation(a.misc.initial,a.misc.search).then(function(t){if(sessionStorage.setItem("var",t.respuest),1===t.respuest){a.misc.progressbar=!0;var e="reporte_de_correos_validados",i=fullUrlBase+"statistic/downloadexcel/"+e;n.location.href=i}else a.misc.progressbar=!1})},dowloadReportBounced:function(){a.misc.progressbar=!1,t.downloadMailBounced(a.misc.initial,a.misc.search).then(function(t){if(sessionStorage.setItem("var",t.respuest),1===t.respuest){a.misc.progressbar=!0;var e="reporte_de_correos_no_validados",i=fullUrlBase+"statistic/downloadexcel/"+e;n.location.href=i}else a.misc.progressbar=!1})}},a.functions.getAllAccount(),a.functions.getAllMailValidation()}]).controller("smsxemailController",["$scope","restService","notificationService","constantReport","$window",function(a,t,e,i,n){a.data={},a.data.initial=0,a.data.page=1,a.data.filter={},a.misc={},a.functions={setList:function(t){a.misc.list=t},setMethodMisc:function(t,e){a.misc[t]=e},setMethodData:function(t,e){a.data[t]=e},searchname:function(){a.restServices.getAll()},Pagination:{forward:function(){a.data.initial+=1,a.data.page+=1,a.restServices.getAll()},fastforward:function(){a.data.initial=a.misc.list.total_pages-1,a.data.page=a.misc.list.total_pages,a.restServices.getAll()},backward:function(){a.data.initial-=1,a.data.page-=1,a.restServices.getAll()},fastbackward:function(){a.data.initial=0,a.data.page=1,a.restServices.getAll()},filterDate:function(){a.data.initial=0,a.data.page=1,a.restServices.getAll()}},cleanFilters:function(){a.data.filter.valuedateInitial="",a.data.filter.valuedateFinal="",a.restServices.getAll()},searchDate:function(){a.restServices.getAll()}},a.restServices={getAll:function(){t.getAllReportSmsxemail(a.data.initial,a.data).then(function(t){a.functions.setList(t)}).catch(function(a){e.error(a.data.message)})}},a.restServices.getAll()}]).controller("listsmschannel",["$scope","restService","notificationService","constantReport","$window",function(a,t,e,i,n){a.data={data:{}},a.misc={progressbar:!1,initial:0,page:1,nameForm:"",totalValidations:0,total_pages:0,search:{},accounts:[],categories:[{name:"A"},{name:"B"},{name:"D"}],progressbar:!0,categoriesBad:[{name:"F"}],columnsChannel:[],dataTotalChannel:0,dateChoose:moment(),dateFormat:""},a.functions={getDataSmsChannel:function(){a.services.getDataSmsChannel()},searchDate:function(){if(a.misc.search.dateFinal)this.getDataSmsChannel();else if(!a.misc.search.dateFinal)return e.warning(i.Notifications.Errors.dateComplete),!1},cleanFilters:function(){a.misc.search.dateInitial="",a.misc.search.dateFinal="",a.misc.initial=0,a.misc.page=1,a.misc.search={},this.getDataSmsChannel()}},a.services={getDataSmsChannel:function(){a.misc.progressbar=!1,t.getDataSmsChannel(a.misc.initial,a.misc.search).then(function(t){t.totalValidations>0?(a.loading=!0,a.data=t.data,a.columnsChannel=t.columnsChannel,a.dataTotalChannel=t.dataTotalChannel,a.misc.totalValidations=t.totalValidations,a.misc.total_pages=t.total_pages,a.misc.progressbar=!0,a.misc.dateFormat=a.misc.search.dateFinal,a.misc.dateFormat=t.dateInfo):(a.misc.totalValidations=0,a.misc.total_pages=0,a.loading=!1,a.misc.progressbar=!0,e.warning(i.Notifications.Errors.errorNoneSms))}).catch(function(a){e.error(a.message)})}},a.functions.getDataSmsChannel()}])})();